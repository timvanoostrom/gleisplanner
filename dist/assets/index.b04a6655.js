var e,t,n,r,l=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&f(e,n,t[n]);if(s)for(var n of s(t))c.call(t,n)&&f(e,n,t[n]);return e},p=(e,t)=>i(e,o(t));import{w as u,l as h,d as g,S as $,i as m,s as y,c as v,e as b,a as x,b as w,f as k,g as O,n as S,t as E,h as C,j as I,u as P,k as A,m as T,r as L,o as j,p as M,q as D,v as R,x as N,y as z,z as q,A as U,B as _,C as V,D as B,E as K,F as G,G as W,H as F,I as H,J as Y,K as X,L as J,M as Q,N as Z,O as ee,P as te,Q as ne,R as re,T as le,U as ie,V as oe,W as se,X as ae,Y as ce,Z as fe,_ as de,$ as pe,a0 as ue,a1 as he,a2 as ge,a3 as $e,a4 as me,a5 as ye,a6 as ve,a7 as be,a8 as xe}from"./vendor.7a0ce02c.js";function we(e){return e*(Math.PI/180)}function ke(e){return Math.round(e*(180/Math.PI))}function Oe(e){const t=e.map((e=>e.x)),n=e.map((e=>e.y)),r=Math.min.apply(null,t)-20,l=Math.min.apply(null,n)-20,i=Math.max.apply(null,t),o=Math.max.apply(null,n);return{x:t,y:n,minX:r,minY:l,maxX:i,maxY:o,width:i-r+20,height:o-l+20}}function Se(e,t,n,r){var l=e-n,i=t-r,o=Math.atan2(-i,-l);return(o*=180/Math.PI)<0&&(o+=360),o}function Ee(e,t,n,r){return{x:(e+n)/2,y:(t+r)/2}}function Ce(e,t,n,r,l){const i=Math.cos(l),o=Math.sin(l);return{x:i*(n-e)+o*(r-t)+e,y:i*(r-t)-o*(n-e)+t}}function Ie(e){let t=ke(e);return t<-180?t+=360:t>180&&(t-=360),we(t)}(t=e||(e={}))[t.R=1]="R",t[t.L=-1]="L",(r=n||(n={}))[r.A=1]="A",r[r.B=2]="B",r[r.AB=3]="AB";const Pe={id:"roco-line",title:"Roco line",gleis:[{artnr:"42400",id:"roco-42400",title:"F4w",type:"Flex",segments:[{type:"Flex",length:920}]},{artnr:"42401",id:"roco-42401",title:"F4c",type:"Flex",segments:[{type:"Flex",length:920}]},{artnr:"42406",id:"roco-42406",title:"G4",type:"Straight",segments:[{type:"Straight",length:920}]},{id:"roco-D2",title:"D2",artnr:"D2",type:"Straight",category:"Connect",segments:[{type:"Straight",length:2}]},{id:"roco-D4",title:"D4",artnr:"D4",type:"Straight",category:"Connect",segments:[{type:"Straight",length:4}]},{id:"roco-D5",title:"D5",artnr:"D5",type:"Straight",category:"Connect",segments:[{type:"Straight",length:5}]},{id:"roco-D8",title:"D8",artnr:"D8",type:"Straight",category:"Connect",segments:[{type:"Straight",length:8}]},{id:"roco-D12",title:"D12",artnr:"D12",type:"Straight",category:"Connect",segments:[{type:"Straight",length:12}]},{artnr:"42408",id:"roco-42408",title:"R2¼",type:"Curve",segments:[{type:"Curve",radius:358,angle:7.5,direction:e.R}]},{artnr:"42409",id:"roco-42409",title:"R3¼",type:"Curve",segments:[{type:"Curve",radius:419.6,angle:7.5,direction:e.R}]},{artnr:"42410",id:"roco-42410",title:"G1",type:"Straight",segments:[{type:"Straight",length:230}]},{artnr:"42411",id:"roco-42411",title:"DG1",type:"Straight",segments:[{type:"Straight",length:119}]},{artnr:"42412",id:"roco-42412",title:"G½",type:"Straight",segments:[{type:"Straight",length:115}]},{artnr:"42413",id:"roco-42413",title:"G¼",type:"Straight",segments:[{type:"Straight",length:57.5}]},{artnr:"42422",id:"roco-42422",title:"R2",type:"Curve",segments:[{type:"Curve",radius:358,angle:30,direction:e.R}]},{artnr:"42423",id:"roco-42423",title:"R3",type:"Curve",segments:[{type:"Curve",radius:419.6,angle:30,direction:e.R}]},{artnr:"42424",id:"roco-42424",title:"R4",type:"Curve",segments:[{type:"Curve",radius:481.2,angle:30,direction:e.R}]},{artnr:"42425",id:"roco-42425",title:"R5",type:"Curve",segments:[{type:"Curve",radius:542.8,angle:30,direction:e.R}]},{artnr:"42426",id:"roco-42426",title:"R6",type:"Curve",segments:[{type:"Curve",radius:604.4,angle:30,direction:e.R}]},{artnr:"42427",id:"roco-42427",title:"R9",type:"Curve",segments:[{type:"Curve",radius:826.4,angle:15,direction:e.R}]},{artnr:"42428",id:"roco-42428",title:"R10",type:"Curve",segments:[{type:"Curve",radius:888,angle:15,direction:e.R}]},{artnr:"42430",id:"roco-42430",title:"R20",type:"Curve",segments:[{type:"Curve",radius:1962,angle:5,direction:e.R}]},{artnr:"42440",id:"roco-42440",title:"Wl15",type:"Turnout",segments:[{type:"Straight",length:230},{type:"Curve",direction:e.L,radius:873.5,angle:15,length1:4}]},{artnr:"42441",id:"roco-42441",title:"Wr15",type:"Turnout",segments:[{type:"Straight",length:230},{type:"Curve",direction:e.R,radius:873.5,angle:15,length1:4}]},{artnr:"42448",id:"roco-42448",title:"EKW15",type:"Engels",segments:[{type:"Straight",length:230},{type:"Straight",angle:15,length:230}]},{artnr:"42451",id:"roco-42451",title:"DKW15",type:"Engels",segments:[{type:"Straight",length:230},{type:"Straight",angle:15,length:230}]},{artnr:"42454",id:"roco-42454",title:"DWW15",type:"ThreeWay",segments:[{type:"Curve",direction:e.R,radius:873.5,angle:15,length1:57.7},{type:"Straight",length:287.5},{type:"Curve",direction:e.L,radius:873.5,angle:15}]},{artnr:"42464",id:"roco-42464",title:"BWl2/3",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.L,radius:358,angle:30,length1:61.6,rotationPointOffsetRadius:33},{type:"Curve",direction:e.L,radius:358,angle:30}]},{artnr:"42465",id:"roco-42465",title:"BWr2/3",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.R,radius:358,angle:30,length1:61.6,rotationPointOffsetRadius:33},{type:"Curve",direction:e.R,radius:358,angle:30}]},{artnr:"42472",id:"roco-42472",title:"BWl3/4",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.L,radius:419.6,angle:30,length1:61.6,rotationPointOffsetRadius:33},{type:"Curve",direction:e.L,radius:419.6,angle:30}]},{artnr:"42473",id:"roco-42473",title:"BWr3/4",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.R,radius:419.6,angle:30,length1:61.6,rotationPointOffsetRadius:33},{type:"Curve",direction:e.R,radius:419.6,angle:30}]},{artnr:"42470",id:"roco-42470",title:"BWl5/6",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.L,radius:542.8,angle:30,length1:61.6,rotationPointOffsetRadius:46},{type:"Curve",direction:e.L,radius:542.8,angle:30}]},{artnr:"42471",id:"roco-42471",title:"BWr5/6",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.R,radius:542.8,angle:30,length1:61.6,rotationPointOffsetRadius:46},{type:"Curve",direction:e.R,radius:542.8,angle:30}]},{artnr:"42476",id:"roco-42476",title:"BWl9/10",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.L,radius:826.4,angle:30,length1:61.6,rotationPointOffsetRadius:65},{type:"Curve",direction:e.L,radius:826.4,angle:30}]},{artnr:"42477",id:"roco-42477",title:"BWr9/10",type:"TurnoutCurved",segments:[{type:"Curve",direction:e.R,radius:826.4,angle:30,length1:61.6},{type:"Curve",direction:e.R,radius:826.4,angle:30}]},{artnr:"42488",id:"roco-42488",title:"Wl10",type:"Turnout",segments:[{type:"Straight",length:345},{type:"Curve",direction:e.L,radius:1946,angle:10,length1:7.25}]},{artnr:"42489",id:"roco-42489",title:"Wr10",type:"Turnout",segments:[{type:"Straight",length:345},{type:"Curve",direction:e.R,radius:1946,angle:10,length1:7.25}]},{artnr:"42493",id:"roco-42493",title:"EKW10",type:"Engels",segments:[{type:"Straight",length:345},{type:"Straight",angle:10,length:345}]},{artnr:"42496",id:"roco-42496",title:"DKW10",type:"Engels",segments:[{type:"Straight",length:345},{type:"Straight",angle:10,length:345}]},{artnr:"42497",id:"roco-42497",title:"K15",type:"Crossing",segments:[{type:"Straight",length:230},{type:"Straight",angle:15,length:230}]},{artnr:"42498",id:"roco-42498",title:"K30",type:"Crossing",segments:[{type:"Straight",length:119},{type:"Straight",angle:30,length:119}]}]},Ae={id:"piko-a",title:"Piko A gleis",gleis:[{id:"piko-a-55209",artnr:"55209",type:"Flex",title:"Flex",price:5.28,segments:[{length:940,type:"Flex"}]},{id:"piko-a-55200",artnr:"55200",type:"Straight",title:"G239",segments:[{length:239.07,type:"Straight"}]},{id:"piko-a-55201",artnr:"55201",type:"Straight",title:"G231",price:1.72,segments:[{length:230.93,type:"Straight"}]},{id:"piko-a-55202",artnr:"55202",type:"Straight",title:"G119",segments:[{length:119.54,type:"Straight"}]},{id:"piko-a-55203",artnr:"55203",type:"Straight",title:"G115",segments:[{length:115.46,type:"Straight"}]},{id:"piko-a-55204",artnr:"55204",type:"Straight",title:"G107",segments:[{length:107.32,type:"Straight"}]},{id:"piko-a-55205",artnr:"55205",type:"Straight",title:"G62",segments:[{length:61.88,type:"Straight"}]},{id:"piko-a-55211",artnr:"55211",type:"Curve",title:"R1",price:2.02,segments:[{type:"Curve",angle:30,radius:360,direction:e.R}]},{id:"piko-a-55251",artnr:"55251",type:"Curve",title:"R1¼ ",segments:[{type:"Curve",angle:7.5,radius:360,direction:e.R}]},{id:"piko-a-55212",artnr:"55212",type:"Curve",title:"R2",price:2.02,segments:[{type:"Curve",angle:30,radius:421.88,direction:e.R}]},{id:"piko-a-55252",artnr:"55252",type:"Curve",title:"R2¼",segments:[{type:"Curve",angle:7.5,radius:421.88,direction:e.R}]},{id:"piko-a-55213",artnr:"55213",type:"Curve",title:"R3",price:2.2,segments:[{type:"Curve",angle:30,radius:483.75,direction:e.R}]},{id:"piko-a-55214",artnr:"55214",type:"Curve",title:"R4",price:2.2,segments:[{type:"Curve",angle:30,radius:545.63,direction:e.R}]},{id:"piko-a-55219",artnr:"55219",type:"Curve",title:"R9",price:2.42,segments:[{type:"Curve",angle:15,radius:907.97,direction:e.R}]},{id:"piko-a-55220",artnr:"55220",title:"WL15",type:"Turnout",price:17.07,segments:[{type:"Straight",length:239.07},{type:"Curve",angle:15,radius:907.97,direction:e.L}]},{id:"piko-a-55221",artnr:"55221",title:"WR15",type:"Turnout",price:17.07,segments:[{type:"Straight",length:239.07},{type:"Curve",angle:15,radius:907.97,direction:e.R}]},{id:"piko-a-55226",artnr:"55226",title:"WY",type:"Turnout",price:34.85,segments:[{type:"Curve",angle:15,radius:907.97,direction:e.L},{type:"Curve",angle:15,radius:907.97,direction:e.R}]},{id:"piko-a-55222",artnr:"55222",type:"TurnoutCurved",title:"BWl2/3",segments:[{type:"Curve",length1:61.88,angle:30,radius:422.88,direction:e.L},{type:"Curve",angle:30,radius:422.88,direction:e.L}]},{id:"piko-a-55223",artnr:"55223",type:"TurnoutCurved",title:"BWr2/3",segments:[{type:"Curve",length1:61.88,angle:30,radius:422.88,direction:e.R},{type:"Curve",angle:30,radius:422.88,direction:e.R}]},{id:"piko-a-55227",artnr:"55227",type:"TurnoutCurved",title:"BWl3/4",segments:[{type:"Curve",length1:61.88,angle:30,radius:483.75,direction:e.L},{type:"Curve",angle:30,radius:483.75,direction:e.L}]},{id:"piko-a-55228",artnr:"55228",type:"TurnoutCurved",title:"BWr3/4",segments:[{type:"Curve",length1:61.88,angle:30,radius:483.75,direction:e.R},{type:"Curve",angle:30,radius:483.75,direction:e.R}]},{id:"piko-a-55225",artnr:"55225",type:"ThreeWay",title:"DWW15",segments:[{type:"Straight",length:239.07},{type:"Curve",angle:15,radius:907.97,direction:e.R},{type:"Curve",angle:15,radius:907.97,direction:e.L}]},{id:"piko-a-55240",artnr:"55240",type:"Crossing",title:"K15",price:20.46,segments:[{type:"Straight",length:239.07},{type:"Straight",angle:15,length:239.07}]},{id:"piko-a-55241",artnr:"55241",type:"Crossing",title:"K30",price:18.7,segments:[{type:"Straight",length:119.54},{type:"Straight",angle:30,length:119.54}]},{id:"piko-a-55224",artnr:"55224",type:"Engels",title:"DKW15",price:34.85,segments:[{type:"Straight",length:239.07},{type:"Straight",angle:15,length:239.07}]}]},Te={dimensions:{width:5500,height:2800},gridSize:{width:500,height:500},gridVisible:!0,scale:1,protoGleisIdActive:"roco-42441",gleisIdsActive:[],viewBoxTranslation:null,trackLibQuickSelect:null,sidebarState:"visible",activeTrackLibId:"roco-line",selectionToolsEnabled:!1},Le=[];function je(e,t){const n=u(t),r=h.getItem(e).then((e=>{null!=e&&("object"!=typeof t||Array.isArray(e)||Array.isArray(t)?n.set(null!=e?e:t):n.set(d(d({},t),e)))})).catch((e=>{console.log("eeee",e)}));return Le.push(r),r.then((()=>{n.subscribe((t=>{h.setItem(e,t)}))})),n}const Me=je("appConfig",Te);function De(e){return[g(Me,(t=>{var n;return null!=(n=t[e])?n:Te[e]})),t=>{!function(e,t){Me.update((n=>{const r="function"==typeof t?t(n[e]):t;return p(d({},n),{[e]:r})}))}(e,t)}]}const Re=u({[Pe.id]:Pe,[Ae.id]:Ae}),[Ne,ze]=De("activeTrackLibId"),qe=g(Re,(e=>Object.entries(e).flatMap((([e,{gleis:t}])=>t.map((t=>(t.segments.filter((e=>!!e.angle)).forEach((e=>{e.angle=we(e.angle)})),t.libId=e,t))))))),Ue=g(Re,(e=>Object.fromEntries(Object.values(e).flatMap((e=>e.gleis.map((t=>[t.artnr,p(d({},t),{brand:e.title})]))))))),_e=g(qe,(e=>Object.fromEntries(e.map((e=>[e.id,e]))))),Ve=g([qe,Ne],(([e,t])=>{const n=e.filter((e=>e.libId===t)).reduce(((e,t)=>{const n=t.category||t.type;return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.entries(n)})),[Be,Ke]=De("trackLibQuickSelect");Ve.subscribe((e=>{Ke(Object.fromEntries(e.map((([e,t])=>[e,t[0].id]))))}));function Ge(e){let t,n,r,l,i;const o=e[5].default,s=v(o,e,e[4],null);return{c(){t=b("button"),s&&s.c(),this.h()},l(e){t=x(e,"BUTTON",{class:!0,disabled:!0});var n=w(t);s&&s.l(n),n.forEach(k),this.h()},h(){O(t,"class",n=S("Button "+(e[2]?e[2]:""))+" svelte-12pxw2j"),t.disabled=e[3],E(t,"isActive",e[0]),E(t,"normal","normal"===e[1]),E(t,"plain","plain"===e[1])},m(n,o){C(n,t,o),s&&s.m(t,null),r=!0,l||(i=[I(t,"click",e[6]),I(t,"mouseenter",e[7]),I(t,"mouseleave",e[8])],l=!0)},p(e,[l]){s&&s.p&&(!r||16&l)&&P(s,o,e,e[4],l,null,null),(!r||4&l&&n!==(n=S("Button "+(e[2]?e[2]:""))+" svelte-12pxw2j"))&&O(t,"class",n),(!r||8&l)&&(t.disabled=e[3]),5&l&&E(t,"isActive",e[0]),6&l&&E(t,"normal","normal"===e[1]),6&l&&E(t,"plain","plain"===e[1])},i(e){r||(A(s,e),r=!0)},o(e){T(s,e),r=!1},d(e){e&&k(t),s&&s.d(e),l=!1,L(i)}}}function We(e,t,n){let{$$slots:r={},$$scope:l}=t,{isActive:i=!1}=t,{variant:o="normal"}=t,{className:s=""}=t,{disabled:a=!1}=t;return e.$$set=e=>{"isActive"in e&&n(0,i=e.isActive),"variant"in e&&n(1,o=e.variant),"className"in e&&n(2,s=e.className),"disabled"in e&&n(3,a=e.disabled),"$$scope"in e&&n(4,l=e.$$scope)},[i,o,s,a,l,r,function(t){j(e,t)},function(t){j(e,t)},function(t){j(e,t)}]}class Fe extends ${constructor(e){super(),m(this,e,We,Ge,y,{isActive:0,variant:1,className:2,disabled:3})}}const He=e=>({}),Ye=e=>({});function Xe(e){let t,n,r,l,i,o,s,a,c=e[3]&&Je(e);const f=[et,Ze],d=[];function p(e,t){return e[1]?0:1}l=p(e),i=d[l]=f[l](e);const u=e[10]["header-right"],h=v(u,e,e[12],Ye);return{c(){t=b("header"),c&&c.c(),n=M(),r=b("h4"),i.c(),o=M(),s=b("div"),h&&h.c(),this.h()},l(e){t=x(e,"HEADER",{class:!0});var l=w(t);c&&c.l(l),n=D(l),r=x(l,"H4",{class:!0});var a=w(r);i.l(a),a.forEach(k),o=D(l),s=x(l,"DIV",{class:!0});var f=w(s);h&&h.l(f),f.forEach(k),l.forEach(k),this.h()},h(){O(r,"class","svelte-unm82v"),O(s,"class","header-right svelte-unm82v"),O(t,"class","svelte-unm82v")},m(e,i){C(e,t,i),c&&c.m(t,null),R(t,n),R(t,r),d[l].m(r,null),R(t,o),R(t,s),h&&h.m(s,null),a=!0},p(e,o){e[3]?c?(c.p(e,o),8&o&&A(c,1)):(c=Je(e),c.c(),A(c,1),c.m(t,n)):c&&(_(),T(c,1,1,(()=>{c=null})),V());let s=l;l=p(e),l===s?d[l].p(e,o):(_(),T(d[s],1,1,(()=>{d[s]=null})),V(),i=d[l],i?i.p(e,o):(i=d[l]=f[l](e),i.c()),A(i,1),i.m(r,null)),h&&h.p&&(!a||4096&o)&&P(h,u,e,e[12],o,He,Ye)},i(e){a||(A(c),A(i),A(h,e),a=!0)},o(e){T(c),T(i),T(h,e),a=!1},d(e){e&&k(t),c&&c.d(),d[l].d(),h&&h.d(e)}}}function Je(e){let t,n;return t=new Fe({props:{className:"toggle",variant:"plain",$$slots:{default:[Qe]},$$scope:{ctx:e}}}),t.$on("click",e[11]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};4160&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Qe(e){let t,n;return{c(){n=B(),this.h()},l(e){n=B(),this.h()},h(){t=new H(n)},m(r,l){t.m(e[6],r,l),C(r,n,l)},p(e,n){64&n&&t.p(e[6])},d(e){e&&k(n),e&&t.d()}}}function Ze(e){let t;return{c(){t=K(e[0])},l(n){t=G(n,e[0])},m(e,n){C(e,t,n)},p(e,n){1&n&&W(t,e[0])},i:F,o:F,d(e){e&&k(t)}}}function et(e){let t,n;return t=new Fe({props:{variant:"plain",$$slots:{default:[tt]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};4097&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function tt(e){let t;return{c(){t=K(e[0])},l(n){t=G(n,e[0])},m(e,n){C(e,t,n)},p(e,n){1&n&&W(t,e[0])},d(e){e&&k(t)}}}function nt(e){let t,n,r,l;const i=[lt,rt],o=[];function s(e,t){return e[1]?0:1}return n=s(e),r=o[n]=i[n](e),{c(){t=b("div"),r.c(),this.h()},l(e){t=x(e,"DIV",{class:!0});var n=w(t);r.l(n),n.forEach(k),this.h()},h(){O(t,"class","PanelContent svelte-unm82v")},m(e,r){C(e,t,r),o[n].m(t,null),l=!0},p(e,l){let a=n;n=s(e),n===a?o[n].p(e,l):(_(),T(o[a],1,1,(()=>{o[a]=null})),V(),r=o[n],r?r.p(e,l):(r=o[n]=i[n](e),r.c()),A(r,1),r.m(t,null))},i(e){l||(A(r),l=!0)},o(e){T(r),l=!1},d(e){e&&k(t),o[n].d()}}}function rt(e){let t;const n=e[10].default,r=v(n,e,e[12],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||4096&l)&&P(r,n,e,e[12],l,null,null)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function lt(e){let t,n;const r=e[10].default,l=v(r,e,e[12],null);return{c(){t=b("div"),l&&l.c(),this.h()},l(e){t=x(e,"DIV",{class:!0});var n=w(t);l&&l.l(n),n.forEach(k),this.h()},h(){O(t,"class","DropdownPanel svelte-unm82v")},m(e,r){C(e,t,r),l&&l.m(t,null),n=!0},p(e,t){l&&l.p&&(!n||4096&t)&&P(l,r,e,e[12],t,null,null)},i(e){n||(A(l,e),n=!0)},o(e){T(l,e),n=!1},d(e){e&&k(t),l&&l.d(e)}}}function it(e){let t,n,r,l,i,o=e[0]&&Xe(e),s=!e[4]&&nt(e);return{c(){t=b("div"),o&&o.c(),n=M(),s&&s.c(),this.h()},l(e){t=x(e,"DIV",{class:!0});var r=w(t);o&&o.l(r),n=D(r),s&&s.l(r),r.forEach(k),this.h()},h(){O(t,"class","ControlMenuPanel svelte-unm82v"),E(t,"dropdown",e[1]),E(t,"isOpen",e[5]),E(t,"flex",e[2])},m(a,c){C(a,t,c),o&&o.m(t,null),R(t,n),s&&s.m(t,null),r=!0,l||(i=[I(t,"mouseenter",e[7]),I(t,"mouseleave",e[8])],l=!0)},p(e,[r]){e[0]?o?(o.p(e,r),1&r&&A(o,1)):(o=Xe(e),o.c(),A(o,1),o.m(t,n)):o&&(_(),T(o,1,1,(()=>{o=null})),V()),e[4]?s&&(_(),T(s,1,1,(()=>{s=null})),V()):s?(s.p(e,r),16&r&&A(s,1)):(s=nt(e),s.c(),A(s,1),s.m(t,null)),2&r&&E(t,"dropdown",e[1]),32&r&&E(t,"isOpen",e[5]),4&r&&E(t,"flex",e[2])},i(e){r||(A(o),A(s),r=!0)},o(e){T(o),T(s),r=!1},d(e){e&&k(t),o&&o.d(),s&&s.d(),l=!1,L(i)}}}function ot(e,t,n){let r,l,{$$slots:i={},$$scope:o}=t,{title:s=""}=t,{dropdown:a=!1}=t,{flex:c=!0}=t,{toggle:f=!1}=t,{startMinimized:d=!1}=t,p=!1;return e.$$set=e=>{"title"in e&&n(0,s=e.title),"dropdown"in e&&n(1,a=e.dropdown),"flex"in e&&n(2,c=e.flex),"toggle"in e&&n(3,f=e.toggle),"startMinimized"in e&&n(9,d=e.startMinimized),"$$scope"in e&&n(12,o=e.$$scope)},e.$$.update=()=>{512&e.$$.dirty&&n(4,r=d),16&e.$$.dirty&&n(6,l=r?"+":"-")},[s,a,c,f,r,p,l,function(){n(5,p=!0)},function(){n(5,p=!1)},d,i,()=>n(4,r=!r),o]}class st extends ${constructor(e){super(),m(this,e,ot,it,y,{title:0,dropdown:1,flex:2,toggle:3,startMinimized:9})}}const at={ad:"f641","address-book":"f2b9","address-card":"f2bb",adjust:"f042","air-freshener":"f5d0","align-center":"f037","align-justify":"f039","align-left":"f036","align-right":"f038",allergies:"f461",ambulance:"f0f9","american-sign-language-interpreting":"f2a3",anchor:"f13d","angle-double-down":"f103","angle-double-left":"f100","angle-double-right":"f101","angle-double-up":"f102","angle-down":"f107","angle-left":"f104","angle-right":"f105","angle-up":"f106",angry:"f556",ankh:"f644","apple-alt":"f5d1",archive:"f187",archway:"f557","arrow-alt-circle-down":"f358","arrow-alt-circle-left":"f359","arrow-alt-circle-right":"f35a","arrow-alt-circle-up":"f35b","arrow-circle-down":"f0ab","arrow-circle-left":"f0a8","arrow-circle-right":"f0a9","arrow-circle-up":"f0aa","arrow-down":"f063","arrow-left":"f060","arrow-right":"f061","arrow-up":"f062","arrows-alt":"f0b2","arrows-alt-h":"f337","arrows-alt-v":"f338","assistive-listening-systems":"f2a2",asterisk:"f069",at:"f1fa",atlas:"f558",atom:"f5d2","audio-description":"f29e",award:"f559",baby:"f77c","baby-carriage":"f77d",backspace:"f55a",backward:"f04a",bacon:"f7e5",bacteria:"e059",bacterium:"e05a",bahai:"f666","balance-scale":"f24e","balance-scale-left":"f515","balance-scale-right":"f516",ban:"f05e","band-aid":"f462",barcode:"f02a",bars:"f0c9","baseball-ball":"f433","basketball-ball":"f434",bath:"f2cd","battery-empty":"f244","battery-full":"f240","battery-half":"f242","battery-quarter":"f243","battery-three-quarters":"f241",bed:"f236",beer:"f0fc",bell:"f0f3","bell-slash":"f1f6","bezier-curve":"f55b",bible:"f647",bicycle:"f206",biking:"f84a",binoculars:"f1e5",biohazard:"f780","birthday-cake":"f1fd",blender:"f517","blender-phone":"f6b6",blind:"f29d",blog:"f781",bold:"f032",bolt:"f0e7",bomb:"f1e2",bone:"f5d7",bong:"f55c",book:"f02d","book-dead":"f6b7","book-medical":"f7e6","book-open":"f518","book-reader":"f5da",bookmark:"f02e","border-all":"f84c","border-none":"f850","border-style":"f853","bowling-ball":"f436",box:"f466","box-open":"f49e","box-tissue":"e05b",boxes:"f468",braille:"f2a1",brain:"f5dc","bread-slice":"f7ec",briefcase:"f0b1","briefcase-medical":"f469","broadcast-tower":"f519",broom:"f51a",brush:"f55d",bug:"f188",building:"f1ad",bullhorn:"f0a1",bullseye:"f140",burn:"f46a",bus:"f207","bus-alt":"f55e","business-time":"f64a",calculator:"f1ec",calendar:"f133","calendar-alt":"f073","calendar-check":"f274","calendar-day":"f783","calendar-minus":"f272","calendar-plus":"f271","calendar-times":"f273","calendar-week":"f784",camera:"f030","camera-retro":"f083",campground:"f6bb","candy-cane":"f786",cannabis:"f55f",capsules:"f46b",car:"f1b9","car-alt":"f5de","car-battery":"f5df","car-crash":"f5e1","car-side":"f5e4",caravan:"f8ff","caret-down":"f0d7","caret-left":"f0d9","caret-right":"f0da","caret-square-down":"f150","caret-square-left":"f191","caret-square-right":"f152","caret-square-up":"f151","caret-up":"f0d8",carrot:"f787","cart-arrow-down":"f218","cart-plus":"f217","cash-register":"f788",cat:"f6be",certificate:"f0a3",chair:"f6c0",chalkboard:"f51b","chalkboard-teacher":"f51c","charging-station":"f5e7","chart-area":"f1fe","chart-bar":"f080","chart-line":"f201","chart-pie":"f200",check:"f00c","check-circle":"f058","check-double":"f560","check-square":"f14a",cheese:"f7ef",chess:"f439","chess-bishop":"f43a","chess-board":"f43c","chess-king":"f43f","chess-knight":"f441","chess-pawn":"f443","chess-queen":"f445","chess-rook":"f447","chevron-circle-down":"f13a","chevron-circle-left":"f137","chevron-circle-right":"f138","chevron-circle-up":"f139","chevron-down":"f078","chevron-left":"f053","chevron-right":"f054","chevron-up":"f077",child:"f1ae",church:"f51d",circle:"f111","circle-notch":"f1ce",city:"f64f","clinic-medical":"f7f2",clipboard:"f328","clipboard-check":"f46c","clipboard-list":"f46d",clock:"f017",clone:"f24d","closed-captioning":"f20a",cloud:"f0c2","cloud-download-alt":"f381","cloud-meatball":"f73b","cloud-moon":"f6c3","cloud-moon-rain":"f73c","cloud-rain":"f73d","cloud-showers-heavy":"f740","cloud-sun":"f6c4","cloud-sun-rain":"f743","cloud-upload-alt":"f382",cocktail:"f561",code:"f121","code-branch":"f126",coffee:"f0f4",cog:"f013",cogs:"f085",coins:"f51e",columns:"f0db",comment:"f075","comment-alt":"f27a","comment-dollar":"f651","comment-dots":"f4ad","comment-medical":"f7f5","comment-slash":"f4b3",comments:"f086","comments-dollar":"f653","compact-disc":"f51f",compass:"f14e",compress:"f066","compress-alt":"f422","compress-arrows-alt":"f78c","concierge-bell":"f562",cookie:"f563","cookie-bite":"f564",copy:"f0c5",copyright:"f1f9",couch:"f4b8","credit-card":"f09d",crop:"f125","crop-alt":"f565",cross:"f654",crosshairs:"f05b",crow:"f520",crown:"f521",crutch:"f7f7",cube:"f1b2",cubes:"f1b3",cut:"f0c4",database:"f1c0",deaf:"f2a4",democrat:"f747",desktop:"f108",dharmachakra:"f655",diagnoses:"f470",dice:"f522","dice-d20":"f6cf","dice-d6":"f6d1","dice-five":"f523","dice-four":"f524","dice-one":"f525","dice-six":"f526","dice-three":"f527","dice-two":"f528","digital-tachograph":"f566",directions:"f5eb",disease:"f7fa",divide:"f529",dizzy:"f567",dna:"f471",dog:"f6d3","dollar-sign":"f155",dolly:"f472","dolly-flatbed":"f474",donate:"f4b9","door-closed":"f52a","door-open":"f52b","dot-circle":"f192",dove:"f4ba",download:"f019","drafting-compass":"f568",dragon:"f6d5","draw-polygon":"f5ee",drum:"f569","drum-steelpan":"f56a","drumstick-bite":"f6d7",dumbbell:"f44b",dumpster:"f793","dumpster-fire":"f794",dungeon:"f6d9",edit:"f044",egg:"f7fb",eject:"f052","ellipsis-h":"f141","ellipsis-v":"f142",envelope:"f0e0","envelope-open":"f2b6","envelope-open-text":"f658","envelope-square":"f199",equals:"f52c",eraser:"f12d",ethernet:"f796","euro-sign":"f153","exchange-alt":"f362",exclamation:"f12a","exclamation-circle":"f06a","exclamation-triangle":"f071",expand:"f065","expand-alt":"f424","expand-arrows-alt":"f31e","external-link-alt":"f35d","external-link-square-alt":"f360",eye:"f06e","eye-dropper":"f1fb","eye-slash":"f070",fan:"f863","fast-backward":"f049","fast-forward":"f050",faucet:"e005",fax:"f1ac",feather:"f52d","feather-alt":"f56b",female:"f182","fighter-jet":"f0fb",file:"f15b","file-alt":"f15c","file-archive":"f1c6","file-audio":"f1c7","file-code":"f1c9","file-contract":"f56c","file-csv":"f6dd","file-download":"f56d","file-excel":"f1c3","file-export":"f56e","file-image":"f1c5","file-import":"f56f","file-invoice":"f570","file-invoice-dollar":"f571","file-medical":"f477","file-medical-alt":"f478","file-pdf":"f1c1","file-powerpoint":"f1c4","file-prescription":"f572","file-signature":"f573","file-upload":"f574","file-video":"f1c8","file-word":"f1c2",fill:"f575","fill-drip":"f576",film:"f008",filter:"f0b0",fingerprint:"f577",fire:"f06d","fire-alt":"f7e4","fire-extinguisher":"f134","first-aid":"f479",fish:"f578","fist-raised":"f6de",flag:"f024","flag-checkered":"f11e","flag-usa":"f74d",flask:"f0c3",flushed:"f579",folder:"f07b","folder-minus":"f65d","folder-open":"f07c","folder-plus":"f65e",font:"f031","font-awesome-logo-full":"f4e6","football-ball":"f44e",forward:"f04e",frog:"f52e",frown:"f119","frown-open":"f57a","funnel-dollar":"f662",futbol:"f1e3",gamepad:"f11b","gas-pump":"f52f",gavel:"f0e3",gem:"f3a5",genderless:"f22d",ghost:"f6e2",gift:"f06b",gifts:"f79c","glass-cheers":"f79f","glass-martini":"f000","glass-martini-alt":"f57b","glass-whiskey":"f7a0",glasses:"f530",globe:"f0ac","globe-africa":"f57c","globe-americas":"f57d","globe-asia":"f57e","globe-europe":"f7a2","golf-ball":"f450",gopuram:"f664","graduation-cap":"f19d","greater-than":"f531","greater-than-equal":"f532",grimace:"f57f",grin:"f580","grin-alt":"f581","grin-beam":"f582","grin-beam-sweat":"f583","grin-hearts":"f584","grin-squint":"f585","grin-squint-tears":"f586","grin-stars":"f587","grin-tears":"f588","grin-tongue":"f589","grin-tongue-squint":"f58a","grin-tongue-wink":"f58b","grin-wink":"f58c","grip-horizontal":"f58d","grip-lines":"f7a4","grip-lines-vertical":"f7a5","grip-vertical":"f58e",guitar:"f7a6","h-square":"f0fd",hamburger:"f805",hammer:"f6e3",hamsa:"f665","hand-holding":"f4bd","hand-holding-heart":"f4be","hand-holding-medical":"e05c","hand-holding-usd":"f4c0","hand-holding-water":"f4c1","hand-lizard":"f258","hand-middle-finger":"f806","hand-paper":"f256","hand-peace":"f25b","hand-point-down":"f0a7","hand-point-left":"f0a5","hand-point-right":"f0a4","hand-point-up":"f0a6","hand-pointer":"f25a","hand-rock":"f255","hand-scissors":"f257","hand-sparkles":"e05d","hand-spock":"f259",hands:"f4c2","hands-helping":"f4c4","hands-wash":"e05e",handshake:"f2b5","handshake-alt-slash":"e05f","handshake-slash":"e060",hanukiah:"f6e6","hard-hat":"f807",hashtag:"f292","hat-cowboy":"f8c0","hat-cowboy-side":"f8c1","hat-wizard":"f6e8",hdd:"f0a0","head-side-cough":"e061","head-side-cough-slash":"e062","head-side-mask":"e063","head-side-virus":"e064",heading:"f1dc",headphones:"f025","headphones-alt":"f58f",headset:"f590",heart:"f004","heart-broken":"f7a9",heartbeat:"f21e",helicopter:"f533",highlighter:"f591",hiking:"f6ec",hippo:"f6ed",history:"f1da","hockey-puck":"f453","holly-berry":"f7aa",home:"f015",horse:"f6f0","horse-head":"f7ab",hospital:"f0f8","hospital-alt":"f47d","hospital-symbol":"f47e","hospital-user":"f80d","hot-tub":"f593",hotdog:"f80f",hotel:"f594",hourglass:"f254","hourglass-end":"f253","hourglass-half":"f252","hourglass-start":"f251","house-damage":"f6f1","house-user":"e065",hryvnia:"f6f2","i-cursor":"f246","ice-cream":"f810",icicles:"f7ad",icons:"f86d","id-badge":"f2c1","id-card":"f2c2","id-card-alt":"f47f",igloo:"f7ae",image:"f03e",images:"f302",inbox:"f01c",indent:"f03c",industry:"f275",infinity:"f534",info:"f129","info-circle":"f05a",italic:"f033",jedi:"f669",joint:"f595","journal-whills":"f66a",kaaba:"f66b",key:"f084",keyboard:"f11c",khanda:"f66d",kiss:"f596","kiss-beam":"f597","kiss-wink-heart":"f598","kiwi-bird":"f535",landmark:"f66f",language:"f1ab",laptop:"f109","laptop-code":"f5fc","laptop-house":"e066","laptop-medical":"f812",laugh:"f599","laugh-beam":"f59a","laugh-squint":"f59b","laugh-wink":"f59c","layer-group":"f5fd",leaf:"f06c",lemon:"f094","less-than":"f536","less-than-equal":"f537","level-down-alt":"f3be","level-up-alt":"f3bf","life-ring":"f1cd",lightbulb:"f0eb",link:"f0c1","lira-sign":"f195",list:"f03a","list-alt":"f022","list-ol":"f0cb","list-ul":"f0ca","location-arrow":"f124",lock:"f023","lock-open":"f3c1","long-arrow-alt-down":"f309","long-arrow-alt-left":"f30a","long-arrow-alt-right":"f30b","long-arrow-alt-up":"f30c","low-vision":"f2a8","luggage-cart":"f59d",lungs:"f604","lungs-virus":"e067",magic:"f0d0",magnet:"f076","mail-bulk":"f674",male:"f183",map:"f279","map-marked":"f59f","map-marked-alt":"f5a0","map-marker":"f041","map-marker-alt":"f3c5","map-pin":"f276","map-signs":"f277",marker:"f5a1",mars:"f222","mars-double":"f227","mars-stroke":"f229","mars-stroke-h":"f22b","mars-stroke-v":"f22a",mask:"f6fa",medal:"f5a2",medkit:"f0fa",meh:"f11a","meh-blank":"f5a4","meh-rolling-eyes":"f5a5",memory:"f538",menorah:"f676",mercury:"f223",meteor:"f753",microchip:"f2db",microphone:"f130","microphone-alt":"f3c9","microphone-alt-slash":"f539","microphone-slash":"f131",microscope:"f610",minus:"f068","minus-circle":"f056","minus-square":"f146",mitten:"f7b5",mobile:"f10b","mobile-alt":"f3cd","money-bill":"f0d6","money-bill-alt":"f3d1","money-bill-wave":"f53a","money-bill-wave-alt":"f53b","money-check":"f53c","money-check-alt":"f53d",monument:"f5a6",moon:"f186","mortar-pestle":"f5a7",mosque:"f678",motorcycle:"f21c",mountain:"f6fc",mouse:"f8cc","mouse-pointer":"f245","mug-hot":"f7b6",music:"f001","network-wired":"f6ff",neuter:"f22c",newspaper:"f1ea","not-equal":"f53e","notes-medical":"f481","object-group":"f247","object-ungroup":"f248","oil-can":"f613",om:"f679",otter:"f700",outdent:"f03b",pager:"f815","paint-brush":"f1fc","paint-roller":"f5aa",palette:"f53f",pallet:"f482","paper-plane":"f1d8",paperclip:"f0c6","parachute-box":"f4cd",paragraph:"f1dd",parking:"f540",passport:"f5ab",pastafarianism:"f67b",paste:"f0ea",pause:"f04c","pause-circle":"f28b",paw:"f1b0",peace:"f67c",pen:"f304","pen-alt":"f305","pen-fancy":"f5ac","pen-nib":"f5ad","pen-square":"f14b","pencil-alt":"f303","pencil-ruler":"f5ae","people-arrows":"e068","people-carry":"f4ce","pepper-hot":"f816",percent:"f295",percentage:"f541","person-booth":"f756",phone:"f095","phone-alt":"f879","phone-slash":"f3dd","phone-square":"f098","phone-square-alt":"f87b","phone-volume":"f2a0","photo-video":"f87c","piggy-bank":"f4d3",pills:"f484","pizza-slice":"f818","place-of-worship":"f67f",plane:"f072","plane-arrival":"f5af","plane-departure":"f5b0","plane-slash":"e069",play:"f04b","play-circle":"f144",plug:"f1e6",plus:"f067","plus-circle":"f055","plus-square":"f0fe",podcast:"f2ce",poll:"f681","poll-h":"f682",poo:"f2fe","poo-storm":"f75a",poop:"f619",portrait:"f3e0","pound-sign":"f154","power-off":"f011",pray:"f683","praying-hands":"f684",prescription:"f5b1","prescription-bottle":"f485","prescription-bottle-alt":"f486",print:"f02f",procedures:"f487","project-diagram":"f542","pump-medical":"e06a","pump-soap":"e06b","puzzle-piece":"f12e",qrcode:"f029",question:"f128","question-circle":"f059",quidditch:"f458","quote-left":"f10d","quote-right":"f10e",quran:"f687",radiation:"f7b9","radiation-alt":"f7ba",rainbow:"f75b",random:"f074",receipt:"f543","record-vinyl":"f8d9",recycle:"f1b8",redo:"f01e","redo-alt":"f2f9",registered:"f25d","remove-format":"f87d",reply:"f3e5","reply-all":"f122",republican:"f75e",restroom:"f7bd",retweet:"f079",ribbon:"f4d6",ring:"f70b",road:"f018",robot:"f544",rocket:"f135",route:"f4d7",rss:"f09e","rss-square":"f143","ruble-sign":"f158",ruler:"f545","ruler-combined":"f546","ruler-horizontal":"f547","ruler-vertical":"f548",running:"f70c","rupee-sign":"f156","sad-cry":"f5b3","sad-tear":"f5b4",satellite:"f7bf","satellite-dish":"f7c0",save:"f0c7",school:"f549",screwdriver:"f54a",scroll:"f70e","sd-card":"f7c2",search:"f002","search-dollar":"f688","search-location":"f689","search-minus":"f010","search-plus":"f00e",seedling:"f4d8",server:"f233",shapes:"f61f",share:"f064","share-alt":"f1e0","share-alt-square":"f1e1","share-square":"f14d","shekel-sign":"f20b","shield-alt":"f3ed","shield-virus":"e06c",ship:"f21a","shipping-fast":"f48b","shoe-prints":"f54b","shopping-bag":"f290","shopping-basket":"f291","shopping-cart":"f07a",shower:"f2cc","shuttle-van":"f5b6",sign:"f4d9","sign-in-alt":"f2f6","sign-language":"f2a7","sign-out-alt":"f2f5",signal:"f012",signature:"f5b7","sim-card":"f7c4",sink:"e06d",sitemap:"f0e8",skating:"f7c5",skiing:"f7c9","skiing-nordic":"f7ca",skull:"f54c","skull-crossbones":"f714",slash:"f715",sleigh:"f7cc","sliders-h":"f1de",smile:"f118","smile-beam":"f5b8","smile-wink":"f4da",smog:"f75f",smoking:"f48d","smoking-ban":"f54d",sms:"f7cd",snowboarding:"f7ce",snowflake:"f2dc",snowman:"f7d0",snowplow:"f7d2",soap:"e06e",socks:"f696","solar-panel":"f5ba",sort:"f0dc","sort-alpha-down":"f15d","sort-alpha-down-alt":"f881","sort-alpha-up":"f15e","sort-alpha-up-alt":"f882","sort-amount-down":"f160","sort-amount-down-alt":"f884","sort-amount-up":"f161","sort-amount-up-alt":"f885","sort-down":"f0dd","sort-numeric-down":"f162","sort-numeric-down-alt":"f886","sort-numeric-up":"f163","sort-numeric-up-alt":"f887","sort-up":"f0de",spa:"f5bb","space-shuttle":"f197","spell-check":"f891",spider:"f717",spinner:"f110",splotch:"f5bc","spray-can":"f5bd",square:"f0c8","square-full":"f45c","square-root-alt":"f698",stamp:"f5bf",star:"f005","star-and-crescent":"f699","star-half":"f089","star-half-alt":"f5c0","star-of-david":"f69a","star-of-life":"f621","step-backward":"f048","step-forward":"f051",stethoscope:"f0f1","sticky-note":"f249",stop:"f04d","stop-circle":"f28d",stopwatch:"f2f2","stopwatch-20":"e06f",store:"f54e","store-alt":"f54f","store-alt-slash":"e070","store-slash":"e071",stream:"f550","street-view":"f21d",strikethrough:"f0cc",stroopwafel:"f551",subscript:"f12c",subway:"f239",suitcase:"f0f2","suitcase-rolling":"f5c1",sun:"f185",superscript:"f12b",surprise:"f5c2",swatchbook:"f5c3",swimmer:"f5c4","swimming-pool":"f5c5",synagogue:"f69b",sync:"f021","sync-alt":"f2f1",syringe:"f48e",table:"f0ce","table-tennis":"f45d",tablet:"f10a","tablet-alt":"f3fa",tablets:"f490","tachometer-alt":"f3fd",tag:"f02b",tags:"f02c",tape:"f4db",tasks:"f0ae",taxi:"f1ba",teeth:"f62e","teeth-open":"f62f","temperature-high":"f769","temperature-low":"f76b",tenge:"f7d7",terminal:"f120","text-height":"f034","text-width":"f035",th:"f00a","th-large":"f009","th-list":"f00b","theater-masks":"f630",thermometer:"f491","thermometer-empty":"f2cb","thermometer-full":"f2c7","thermometer-half":"f2c9","thermometer-quarter":"f2ca","thermometer-three-quarters":"f2c8","thumbs-down":"f165","thumbs-up":"f164",thumbtack:"f08d","ticket-alt":"f3ff",times:"f00d","times-circle":"f057",tint:"f043","tint-slash":"f5c7",tired:"f5c8","toggle-off":"f204","toggle-on":"f205",toilet:"f7d8","toilet-paper":"f71e","toilet-paper-slash":"e072",toolbox:"f552",tools:"f7d9",tooth:"f5c9",torah:"f6a0","torii-gate":"f6a1",tractor:"f722",trademark:"f25c","traffic-light":"f637",trailer:"e041",train:"f238",tram:"f7da",transgender:"f224","transgender-alt":"f225",trash:"f1f8","trash-alt":"f2ed","trash-restore":"f829","trash-restore-alt":"f82a",tree:"f1bb",trophy:"f091",truck:"f0d1","truck-loading":"f4de","truck-monster":"f63b","truck-moving":"f4df","truck-pickup":"f63c",tshirt:"f553",tty:"f1e4",tv:"f26c",umbrella:"f0e9","umbrella-beach":"f5ca",underline:"f0cd",undo:"f0e2","undo-alt":"f2ea","universal-access":"f29a",university:"f19c",unlink:"f127",unlock:"f09c","unlock-alt":"f13e",upload:"f093",user:"f007","user-alt":"f406","user-alt-slash":"f4fa","user-astronaut":"f4fb","user-check":"f4fc","user-circle":"f2bd","user-clock":"f4fd","user-cog":"f4fe","user-edit":"f4ff","user-friends":"f500","user-graduate":"f501","user-injured":"f728","user-lock":"f502","user-md":"f0f0","user-minus":"f503","user-ninja":"f504","user-nurse":"f82f","user-plus":"f234","user-secret":"f21b","user-shield":"f505","user-slash":"f506","user-tag":"f507","user-tie":"f508","user-times":"f235",users:"f0c0","users-cog":"f509","users-slash":"e073","utensil-spoon":"f2e5",utensils:"f2e7","vector-square":"f5cb",venus:"f221","venus-double":"f226","venus-mars":"f228",vest:"e085","vest-patches":"e086",vial:"f492",vials:"f493",video:"f03d","video-slash":"f4e2",vihara:"f6a7",virus:"e074","virus-slash":"e075",viruses:"e076",voicemail:"f897","volleyball-ball":"f45f","volume-down":"f027","volume-mute":"f6a9","volume-off":"f026","volume-up":"f028","vote-yea":"f772","vr-cardboard":"f729",walking:"f554",wallet:"f555",warehouse:"f494",water:"f773","wave-square":"f83e",weight:"f496","weight-hanging":"f5cd",wheelchair:"f193",wifi:"f1eb",wind:"f72e","window-close":"f410","window-maximize":"f2d0","window-minimize":"f2d1","window-restore":"f2d2","wine-bottle":"f72f","wine-glass":"f4e3","wine-glass-alt":"f5ce","won-sign":"f159",wrench:"f0ad","x-ray":"f497","yen-sign":"f157","yin-yang":"f6ad"};function ct(e,t=16){if(!(e in at))throw new Error(`Icon ${e} not present.`);return`&#x${at[e]}`}function ft(e){let t,n,r=ct(e[0],e[1])+"";return{c(){t=b("span"),this.h()},l(e){t=x(e,"SPAN",{class:!0,style:!0}),w(t).forEach(k),this.h()},h(){O(t,"class","Icon svelte-11ajq4s"),O(t,"style",n=`font-size: ${e[1]}px;color:${e[2]}`)},m(e,n){C(e,t,n),t.innerHTML=r},p(e,[l]){3&l&&r!==(r=ct(e[0],e[1])+"")&&(t.innerHTML=r),6&l&&n!==(n=`font-size: ${e[1]}px;color:${e[2]}`)&&O(t,"style",n)},i:F,o:F,d(e){e&&k(t)}}}function dt(e,t,n){let{name:r}=t,{size:l=16}=t,{color:i="#000000"}=t;return e.$$set=e=>{"name"in e&&n(0,r=e.name),"size"in e&&n(1,l=e.size),"color"in e&&n(2,i=e.color)},[r,l,i]}class pt extends ${constructor(e){super(),m(this,e,dt,ft,y,{name:0,size:1,color:2})}}function ut(e){let t,n;return t=new pt({props:{color:e[2],name:e[0],size:e[1]}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.color=e[2]),1&n&&(r.name=e[0]),2&n&&(r.size=e[1]),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ht(e){let t,n;return t=new Fe({props:{variant:"plain",$$slots:{default:[ut]},$$scope:{ctx:e}}}),t.$on("click",e[3]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};23&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function gt(e,t,n){let{name:r}=t,{size:l=16}=t,{color:i="#000000"}=t;return e.$$set=e=>{"name"in e&&n(0,r=e.name),"size"in e&&n(1,l=e.size),"color"in e&&n(2,i=e.color)},[r,l,i,function(t){j(e,t)}]}class $t extends ${constructor(e){super(),m(this,e,gt,ht,y,{name:0,size:1,color:2})}}const mt=Math.PI/2,yt=Math.PI,vt=e.R,bt=-mt;function xt(e,t){return Array.from(function*(e,t){for(;e<=t;)yield e++}(e,t))}function wt(){return"gp"+Y()}function kt(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function Ot(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function St(e,t=4){return Number(Math.round(Number(e+"e"+t))+"e-"+t)}function Et(t,n,r){let{connectAngle:l=0,x:i=450,y:o=250,direction:s}=t;const a=!0===t.root,c=l+mt;let f=i,d=o;s=s||("c1"===t.type?e.L:e.R);let p=f+Math.cos(c)*n.length*s,u=d+Math.sin(c)*n.length*s,h=Ee(f,d,p,u);const g=n.angle||0;if(l+=g,g){const e=n.length/2,t=f+Math.cos(c)*e*s,r=d+Math.sin(c)*e*s;{const{x:e,y:n}=Ce(t,r,f,d,-g);f=e,d=n}{const{x:e,y:n}=Ce(t,r,p,u,-g);p=e,u=n}h={x:t,y:r}}const $={x:f,y:d,type:"c1",direction:a?e.L:s===e.L?e.R:e.L,connectAngle:l},m={x:p,y:u,type:"c2",direction:s,connectAngle:l};return"c1"===(null==r?void 0:r.type)&&($.type="c2",m.type="c1"),[$,m,{x:h.x,y:h.y,connectAngle:l,type:"lbl"}]}function Ct({path:e,x1:t,y1:n,x2:r,y2:l,spreadX:i,spreadY:o}){const s=t-i,a=n-o,c=r-i,f=l-o,d=r+i,p=l+o,u=t+i,h=n+o;e.moveTo(d,p),e.lineTo(u,h),e.lineTo(s,a),e.lineTo(c,f),e.lineTo(d,p)}function It(e,t){const[{x:n,y:r,type:l},{x:i,y:o}]=e,s=we(Se(n,r,i,o)),a=X();a.moveTo(n,r),a.lineTo(i,o);const c=8.2*Math.cos(s-mt),f=8.2*Math.sin(s-mt),d=14.5*Math.cos(s-mt),p=14.5*Math.sin(s-mt);let u=n-c,h=r-f,g=i-c,$=o-f,m=i+c,y=o+f,v=n+c,b=r+f;const x=X();x.moveTo(u,h),x.lineTo(g,$);const w=X();w.moveTo(v,b),w.lineTo(m,y);const k=X();Ct({path:k,x1:n,y1:r,x2:i,y2:o,spreadX:d,spreadY:p});const O={d:x,type:"p1"},S={d:w,type:"p2"};"c2"===l&&(O.type="p2",S.type="p1");return[{d:k,type:"outer"},{d:a,type:"main"},O,S]}function Pt(...e){const t=new Map;for(const n of e.flat())t.has(n.type)?t.get(n.type).push(n):t.set(n.type,[n]);return Array.from(t.values()).flatMap((e=>e))}function At({pointOrigin:e,protos:t,connectingPointOrigin:n,variant:r}){let[l,i]=t;"s2"===r?i=p(d({},i),{angle:-i.angle}):e=n,_l("blap",r,e.direction,ke(e.connectAngle+yt*e.direction));const[o,s,a]=Et(e,l,n),[c,f,u]=Et(e,i,n);return[o,s,c,f,u,p(d({},n),{type:"po-s1"})]}function Tt(e,t,n){var r;const l=e.createSVGPoint(),i=null==(r=t.transform.baseVal.consolidate())?void 0:r.matrix;let o=n;return i&&(l.x=o.x,l.y=o.y,o=l.matrixTransform(i)),{x:o.x,y:o.y}}function Lt(e,t,n,{x:r,y:l}){const i=e.createSVGPoint();i.x=r,i.y=l;const o=i.matrixTransform(n.getScreenCTM().inverse());let s={x:o.x,y:o.y};return n!==t&&n.transform.baseVal.consolidate&&(s=Tt(e,n,s)),{x:s.x,y:s.y}}function jt({pointOrigin:t,proto:n,connectingPointOrigin:r}){let{connectAngle:l=0,x:i=450,y:o=250,direction:s}=t;const a=!0===t.root;l===-yt&&(l=yt),n.length1&&(i+=Math.cos(l+mt*s)*n.length1,o+=Math.sin(l+mt*s)*n.length1);let c=0,f=0,d=0;f=l,d=f+n.angle*s,c=l+yt*s;const[p,u]=function({x:e,y:t,angle:n,radius:r}){return[e+Math.cos(n)*r,t+Math.sin(n)*r]}({x:i,y:o,radius:n.radius,angle:c}),h=X(),g=d<f;h.moveTo(i,o),h.arc(p,u,n.radius,f,d,g);const $=function(e){const t=.5*e.getTotalLength();return e.getPointAtLength(t)}(new Q(h.toString()));let{_x0:m,_y0:y,_x1:v,_y1:b}=h;n.length2&&(v+=Math.cos(l+(n.angle+mt)*s)*n.length2,b+=Math.sin(l+(n.angle+mt)*s)*n.length2);const x=a&&g?e.R:a?e.L:s===e.L?e.R:e.L,w={x:t.x,y:t.y,type:"c1",direction:x,connectAngle:f},k={x:v,y:b,type:"c2",direction:s,connectAngle:d};"c1"===(null==r?void 0:r.type)&&(w.type="c2",k.type="c1"),a&&(w.root=!0);return[w,k,{x:p,y:u,type:"cc"},{x:$.x,y:$.y,connectAngle:l,type:"lbl"}]}function Mt(t,n){let[{x:r,y:l,connectAngle:i,direction:o,type:s},{x:a,y:c,connectAngle:f,direction:d},{x:p,y:u}]=t;const h=f<i&&!(i===yt&&f<0),g=X();g.moveTo(r,l),g.arc(p,u,n.radius,i,f,h);const $=X();$.arc(p,u,n.radius-14.5,i,f,h),$.arc(p,u,n.radius+14.5,f,i,!h),$.closePath();const m=X();m.arc(p,u,n.radius-8.2,i,f,h);const y=X();y.arc(p,u,n.radius+8.2,i,f,h);const v={d:m,type:"p1"},b={d:y,type:"p2"};(d===o&&(o===e.R&&"c2"===s||o===e.L&&"c1"===s)||d!==o&&(o===e.R&&"c1"===s||o===e.L&&"c2"===s))&&(v.type="p2",b.type="p1");return[{d:$,type:"outer"},{d:g,type:"main"},v,b]}function Dt({pointOrigin:e,protos:t,connectingPointOrigin:n,variant:r,doubleSlip:l=!1}){const i=At({pointOrigin:e,protos:t,connectingPointOrigin:n,variant:"s2"===r||"s4"===r?"s2":"s1"}),[o,s,a,c,f,d]=i,p=[o,s,a,c,f,d],u=we(Se(o.x,o.y,s.x,s.y)),h=we(Se(a.x,a.y,c.x,c.y)),g=("s2"===r||"s4"===r?h:u)+t[1].angle/2,$=16.4*1.5,m=$*Math.cos(g+mt),y=$*Math.sin(g+mt);let v={x:f.x+m,y:f.y+y,type:"add"};if("s3"!==r&&"s4"!==r||(v.x=f.x+-1*m,v.y=f.y+-1*y),p.push(v),l){const e=f.x+-1*m,t=f.y+-1*y;p.push({x:e,y:t,type:"add"})}return p}globalThis._l=console.log,globalThis._d=console.dir;const Rt=u(null);function Nt({pointOrigin:t,useMaxLength:n=!1,proto:r,finalize:l=!1}){const i=J(Rt);if(i){const o=d({},t),s=Math.hypot(t.x-i.x,t.y-i.y);let a=1,c=1,f=Ie(we(Se(i.x,i.y,o.x,o.y))),u=f,h=f-yt;const g=i.y>t.y,$=!(i.x<t.x);if(n){const e=i.x+Math.cos(f)*r.length,t=i.y+Math.sin(f)*r.length;o.x>e&&(o.x=e),o.y>t&&(o.y=t)}if(-1!==i.connectAngle&&-1===o.connectAngle){const e=i.connectAngle-(f-mt);u=i.connectAngle+mt*i.direction,h=i.connectAngle-2*e+(yt+mt*i.direction)}-1===i.connectAngle&&-1!==o.connectAngle&&(h=o.connectAngle+mt*o.direction),-1!==i.connectAngle&&-1!==o.connectAngle&&(u=i.connectAngle+mt*i.direction,h=o.connectAngle+mt*o.direction);let m=u-mt,y=h+mt*i.direction;const v=Math.cos(u)*s/2.5,b=Math.sin(u)*s/2.5,x=Math.cos(h)*s/2.5,w=Math.sin(h)*s/2.5,k=i.x+a*v,O=i.y+a*b,S=o.x+c*x,E=o.y+c*w,C=i.direction||e.L,I=p(d({},i),{connectAngle:m,direction:C,type:"c1"}),P=i.direction||e.R,A=$?2:-2,T=g?2:-2,L=p(d({},o),{x:o.x+(l?0:A),y:o.y+(l?0:T),connectAngle:y,direction:P,type:"c2"}),j=[I,{x:k,y:O,type:"fcp1"},{x:S,y:E,type:"fcp2"},L];return"c1"===(null==i?void 0:i.type)&&(I.type="c2",L.type="c1"),j}console.error("Calculate flexpoints needs connectFlexPointStart to be set.")}function zt(e,t){e.bezierCurveTo(t.points[1].x,t.points[1].y,t.points[2].x,t.points[2].y,t.points[3].x,t.points[3].y)}function qt(e,t){const n=14.5,[{x:r,y:l,direction:i,type:o},{x:s,y:a},{x:c,y:f},{x:d,y:p,direction:u}]=e;let h;try{h=new Z(r,l,s,a,c,f,d,p)}catch(C){}if(!h)return It(e);const g=X(),$=X();g.moveTo(h.points[0].x,h.points[0].y),zt(g,h);const m=new Q(g.toString()),y=h.length(),v=y/t.length,b=y/v,x=xt(1,v).map((e=>{const t=m.getPointAtLength(e*b),r=m.getTangentAtLength(e*b);let l={x:t.x-n*r.x,y:t.y-n*r.y},i={x:t.x+n*r.x,y:t.y+n*r.y};const o=Ee(l.x,l.y,i.x,i.y);return l=Ce(o.x,o.y,l.x,l.y,we(90)),i=Ce(o.x,o.y,i.x,i.y,we(90)),[l,i]}));let w=X();try{h.outline(n).curves.forEach(((e,t)=>{0===t&&w.moveTo(e.points[0].x,e.points[0].y),zt(w,e)}))}catch(C){const e=we(Se(r,l,d,p)),t=n*Math.cos(e-mt),i=n*Math.sin(e-mt);Ct({path:w,x1:r,y1:l,x2:d,y2:p,spreadX:t,spreadY:i})}for(const[I,P]of x)$.moveTo(I.x,I.y),$.lineTo(P.x,P.y);const k=X();h.offset(8.2).forEach(((e,t)=>{0===t&&k.moveTo(e.points[0].x,e.points[0].y),zt(k,e)}));const O=X();h.offset(-8.2).forEach(((e,t)=>{0===t&&O.moveTo(e.points[0].x,e.points[0].y),zt(O,e)}));const S={d:k,type:"p1"},E={d:O,type:"p2"};"c2"===o&&(S.type="p2",E.type="p1");return[{d:w,type:"outer"},{d:g,type:"main"},{d:$,type:"splits"},S,E]}function Ut({pointOrigin:e,protos:t,connectingPointOrigin:n,variant:r}){let l=e;const i=t.find((e=>"Curve"===e.type));let o=i.direction,s=e.direction===o?e.connectAngle:e.connectAngle+yt;"c1"===r&&(s=e.direction!==o?e.connectAngle:e.connectAngle+yt,o*=-1);const a=jt({pointOrigin:{x:e.x,y:e.y,connectAngle:s,direction:o,type:"c1"},proto:i,connectingPointOrigin:n}),c=t.find((e=>"Straight"===e.type));"c1"===r&&(l=p(d({},a[1]),{direction:-1*a[1].direction}));const f=Et(l,c,n),u=n||e,h=!u.type||u.type.endsWith("c2")?"po-c2":"po-c1",g=[...f,...a],[$,m,y,v,b,x,w]=g,k=[v,m,b,x,y,p(d({},u),{type:h})];if("s2"===r){const e=Ut({pointOrigin:p(d({},m),{direction:-1*m.direction}),protos:t,connectingPointOrigin:n});return"po-c2"===h?(e[0].type="c2",e[1].type="c1",e[2].type="c1"):"po-c1"===h&&(e[0].type="c1",e[1].type="c1",e[2].type="c2"),e}return"c1"===r?("po-c2"===h?(b.type="c2",v.type="c1",m.type="c1"):"po-c1"===h&&(b.type="c1",v.type="c2",m.type="c2"),i.length1&&(x.x=x.x+Math.cos(b.connectAngle-mt*b.direction)*i.length1,x.y=x.y+Math.sin(b.connectAngle-mt*b.direction)*i.length1),[b,m,v,x,y,p(d({},u),{type:h})]):("po-c1"===h&&(k[0].type="c2",k[1].type="c1",k[2].type="c1"),k)}function _t({pointOrigin:e,protos:t,connectingPointOrigin:n,variant:r}){const[l,i]=t;let o=l.direction;r&&"c1"!==r&&(e=function({pointOrigin:e,proto:t,variant:n}){const r=e.direction,l=d({},e);r===t.direction?(l.connectAngle=Ie(e.connectAngle+-1*yt),l.direction=-1*r):-1===t.direction&&1===r&&(l.direction=1);const i=p(d({},t),{direction:-1*t.direction});delete i.length1,"c2"===n&&(i.length2=t.length1);const[o,s]=jt({pointOrigin:l,proto:i}),a=p(d({},s),{direction:r});return-1===r&&1===t.direction&&(a.connectAngle=s.connectAngle+yt),1===r&&-1===t.direction&&(a.connectAngle=s.connectAngle-yt),-1===r&&t.direction,_l("blap",r,t.direction),a}({pointOrigin:e,proto:l,variant:r}));let s=e.direction===o?e.connectAngle:e.connectAngle+yt,a={x:e.x,y:e.y,connectAngle:s,direction:o,type:"c1"};const c=jt({pointOrigin:a,proto:l,connectingPointOrigin:n}),f=jt({pointOrigin:a,proto:i,connectingPointOrigin:n}),u=n||e,h=!u.type||u.type.endsWith("c2")?"po-c2":"po-c1",g=[...c,...f],[$,m,y,v,b,x,w,k]=g,O=[$,m,x,y,w,v,p(d({},u),{type:h})];return _l("potype",h,r),r&&"c1"!==r?"po-c1"===h?(O[0].type="c1",O[1].type="c2",O[2].type="c2"):(O[0].type="c2",O[1].type="c1",O[2].type="c1"):"po-c1"===h&&(O[0].type="c2",O[1].type="c1",O[2].type="c1"),O}const Vt=(e,t,n="#fff")=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <rect\n    height="10"\n    width="10"\n    y="0"\n    x="0"\n    style="fill:${n}"\n  />\n  <path style="stroke:${t}" d="m0 0l10 10" />\n</pattern>`,Bt=Vt("pattern3","rgba(0, 0, 0, .3)"),Kt={pattern1:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible">\n    <path style="stroke:${t}" d="m0 10l10-10" />\n</pattern>`,pattern2:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path\n    style="stroke:${t};fill:${t}"\n    d="m10 1-9 9h-1v-1l9-9h1zm-10-1v1l1-1zm9 10h1v-1z"\n  />\n</pattern>`,pattern3:Vt,pattern4:(e,t,n="#fff")=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <rect\n    height="10"\n    width="10"\n    y="0"\n    x="0"\n    style="fill:${n}"\n  />\n  <path\n    style="stroke:${t};fill:${t}"\n    d="m0 1 9 9h1v-1l-9-9h-1zm0 8v1h1zm9-9h1v1z"\n  />\n</pattern>`,pattern5:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke-linejoin:bevel;stroke:${t}" d="m5 0v10" />\n</pattern>`,pattern6:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t};fill:${t}" d="m4 0h2v10h-2v-10z" />\n</pattern>`,pattern7:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke-linejoin:bevel;stroke:${t}" d="m0 5h10" />\n</pattern>`,pattern8:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t};fill:${t}" d="m0 4h10v2h-10z" />\n</pattern>`,pattern9:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t}" d="m5 0v10m-5-5h10" />\n</pattern>`,pattern10:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t}" d="m0 0l10 10m0-10l-10 10" />\n</pattern>`,pattern11:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <circle cy="5" cx="5" r="1" style="stroke:${t};fill:${t}" />\n</pattern>`,pattern12:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <circle cy="5" cx="5" r="2" style="stroke:${t};fill:${t}" />\n</pattern>`,pattern13:(e,t)=>`\n<pattern\n  id="${e}"\n  height="20"\n  width="20"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <circle cy="3" cx="5" r="2" style="fill:${t}" />\n  <circle cy="13" cx="5" r="2" style="fill:${t}" />\n  <circle cy="8" cx="15" r="2" style="fill:${t}" />\n  <circle cy="18" cx="15" r="2" style="fill:${t}" />\n</pattern>`,pattern14:(e,t)=>`\n<pattern\n  id="${e}"\n  height="12"\n  width="12"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <rect\n    y="0"\n    x="0"\n    style="stroke:${t};fill:none"\n    height="12"\n    width="12"\n  />\n  <circle cy="6" cx="6" r="1" style="stroke:${t};fill:${t}" />\n</pattern>`,pattern15:(e,t)=>`\n<pattern\n  id="${e}"\n  height="12"\n  width="12"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <rect\n    y="0"\n    x="0"\n    style="stroke:${t};fill:none"\n    height="12"\n    width="12"\n  />\n  <circle cy="6" cx="6" r="2" style="stroke:${t};fill:${t}" />\n</pattern>`,pattern16:(e,t)=>`\n<pattern\n  id="${e}"\n  height="12"\n  width="12"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path\n    style="stroke-linejoin:bevel;stroke:${t};fill:DarkGrey"\n    d="m0 9l3 3 9-9-3-3z"\n  />\n  <path\n    style="fill:DarkGrey"\n    d="m0 0v3l3 3 3-3-3-3h-3zm6 9l3 3h3v-3l-3-3zm-6 3h3l-3-3zm12-12v3l-3-3z"\n  />\n</pattern>`,pattern17:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t};fill:${t}" d="m0 0h10l-10 10z" />\n</pattern>`,pattern18:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <rect\n    y="0"\n    x="0"\n    style="stroke:${t};fill:${t}"\n    height="5"\n    width="5"\n  />\n  <rect\n    y="5"\n    x="5"\n    style="stroke:${t};fill:${t}"\n    height="5"\n    width="5"\n  />\n</pattern>`,pattern19:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <path style="stroke:${t};fill:${t}" d="m0 5l5 5 5-5-5-5z" />\n</pattern>`,pattern20:(e,t)=>`\n<pattern\n  id="${e}"\n  height="10"\n  width="10"\n  patternUnits="userSpaceOnUse"\n  y="0"\n  x="0"\n  overflow="visible"\n>\n  <circle cy="5" cx="5" r="4" style="stroke:${t};fill:${t}" />\n</pattern>`},Gt={layers:[{id:"base",name:"Base",isVisible:!0,locked:!0,color:kt()}],activeLayerId:"base"},Wt=je("layerControl",Gt),Ft=g(Wt,(({layers:e})=>Object.fromEntries(e.map((e=>[e.id,e]))))),Ht=g([Ft,Wt],(([e,{activeLayerId:t}])=>e[t]));function Yt(e){Wt.update((t=>{const n=t.layers.map((t=>e[t.id]?d(d({},t),e[t.id]):t));return p(d({},t),{layers:n})}))}function Xt(e){Wt.update((t=>{const n=t.layers.filter((t=>t.id!==e));return p(d({},t),{activeLayerId:"base",layers:n})}))}const Jt=g(Wt,(e=>e.layers.filter((e=>!!e.patternId)).map((e=>Kt[e.patternId](`pattern-${e.patternId}`,e.color))))),Qt=De("protoGleisIdActive"),Zt=g([Qt[0],qe],(([e,t])=>t.find((t=>t.id===e)))),[en,tn]=De("gleisIdsActive");function nn(e,t=!1){tn((n=>n.includes(e)?n.filter((t=>t!==e)):t?[...n,e]:[e]))}const rn=je("gleisPlanned",{}),ln=g([rn,Ft],(([e,t])=>{const n=Object.entries(e).filter((([e,{layerId:n}])=>{var r;return null==(r=t[n])?void 0:r.isVisible}));return Object.fromEntries(n)}));function on(e){rn.update((t=>"function"==typeof e?e(t):d(d({},t),e)))}g([en,ln],(([e,t])=>Object.values(t).filter((t=>!e.includes(t.id)))));const sn=g([en,ln,Wt],(([e,t,n])=>{const r={};for(const i of Object.values(t).filter((t=>!e.includes(t.id))))r[i.layerId]||(r[i.layerId]=[]),r[i.layerId].push(i);const l=n.layers.map((e=>e.id)).reverse();return Object.fromEntries(l.map((e=>e in r?[e,r[e]]:null)).filter((e=>!!e)))})),an=g([en,ln],(([e,t])=>{const n=[];for(const r in t)e.indexOf(r)>-1&&n.push(t[r]);return n})),cn=g([an],(([e])=>1===e.length&&"Flex"===e[0].type?e[0]:null)),fn=g([en,ln,Wt],(([e,t,n])=>{const r={};for(const l of Object.values(t)){let t=l.layerId;e.includes(l.id)&&(t="selected"),r[t]||(r[t]=[]),r[t].push(l)}return[{id:"selected"},...n.layers].reverse().flatMap(((e,t)=>r[e.id]||[]))}));function dn(e,t){const n=t.segments;switch(e.type){case"Flex":return qt(e.points,n[0]);case"Straight":return It(e.points,n[0]);case"Curve":return Mt(e.points,n[0]);case"Turnout":return function(e,t){t.find((e=>"Straight"===e.type));const n=t.find((e=>"Curve"===e.type)),[r,l,i,o]=e;return Pt(It([r,l]),Mt([r,i,o],n))}(e.points,n);case"TurnoutCurved":return function(e,t){const[n,r]=t;if(4===e.length)return Mt(e,n);const[l,i,o,s,a]=e,c=Mt([l,i,s],n),f=Mt([l,o,a],r);return Pt(It([l,{x:l.x+Math.cos(l.connectAngle+mt)*n.length1*n.direction,y:l.y+Math.sin(l.connectAngle+mt)*n.length1*n.direction}]),c,f)}(e.points,n);case"Crossing":return function(e,t){const[n,r,l,i,o]=e;return Pt(It([n,r]),It([l,i]))}(e.points);case"Engels":return function(e,t){const[n,r,l,i,o]=e;return Pt(It([n,r]),It([l,i]))}(e.points);case"ThreeWay":return e.points,[]}}function pn({pointOrigin:e,flexPoints:t}){const n=J(Ht);if((null==n?void 0:n.locked)||!(null==n?void 0:n.isVisible))return void alert("Layer is not accessible");const r=J(Zt);if(!r)return;const l=J(rn),i=gn(e);console.log("connectedGleis",i);const o=null==i?void 0:i.points.find((t=>t.x===e.x&&t.y===e.y)),s=wt(),a=r.artnr,c=n.id,f=r.type,p=[];switch(f){case"Flex":p.push(...t);break;case"Straight":{const[t]=r.segments;p.push(...Et(e,t,o))}break;case"Curve":{const[t]=r.segments;p.push(...jt({pointOrigin:e,proto:t,connectingPointOrigin:o}))}break;case"Turnout":p.push(...Ut({pointOrigin:e,protos:r.segments,connectingPointOrigin:o}));break;case"TurnoutCurved":p.push(..._t({pointOrigin:e,protos:r.segments,connectingPointOrigin:o}));break;case"Crossing":p.push(...At({pointOrigin:e,protos:r.segments,connectingPointOrigin:o}));break;case"Engels":p.push(...Dt({pointOrigin:e,protos:r.segments,connectingPointOrigin:o,doubleSlip:r.title.startsWith("DKW")}));break;case"ThreeWay":p.push(...(r.segments,[]))}const u=d({},l),h={points:p,id:s,artnr:a,layerId:c,type:f};u[s]=h,rn.set(u),function(e){const t=J(mn);for(const n of e.points)if("c1"===n.type||"c2"===n.type){const r=$n(n);r in t?t[r].includes(e.id)||(t[r]=[...t[r],e.id]):t[r]=[e.id]}mn.set(t)}(h),nn(s)}function un(e){rn.update((t=>{const n=d({},t);for(const r of e){if(!t||!t[r.id])return void console.info("Gleis with %s not found",[r.id]);const e=d(d({},t[r.id]),r);n[r.id]=e}return n}))}function hn(e){let t,n=e||J(en);var r;on((e=>{const r=d({},e);for(const t of n)t in r&&(yn(r[t]),delete r[t]);const l=Object.keys(r);return t=l[l.length-1],r})),r=n,tn((e=>e.filter((e=>!r.includes(e))))),t&&nn(t)}function gn(e,t){const n=function(e){return J(mn)[$n(e)]}(e);if(console.log("ids",n),!n)return;const r=J(rn),[l]=n.filter((e=>!t||e!==t));return l?r[l]:void 0}function $n({x:e,y:t}){return St(e,0)+","+St(t,0)}const mn=u({});function yn(e){const t=J(mn);for(const n of e.points)if("c1"===n.type||"c2"===n.type){const r=$n(n);r in t&&(t[r]=[...t[r].filter((t=>t!==e.id))],t[r].length||delete t[r])}mn.set(t)}let vn=fn.subscribe((e=>{if(e.length){const t=J(mn);for(const n of e)for(const e of n.points)if("c1"===e.type||"c2"===e.type){const r=$n(e);r in t?t[r].includes(n.id)||(t[r]=[...t[r],n.id]):t[r]=[n.id]}mn.set(t),vn()}}));function bn(e,t){return{x:e,y:t,connectAngle:bt,direction:vt,root:!0}}function xn(e,t,n){const r=e.slice();return r[6]=t[n],r}function wn(e){let t,n,r=e[1],l=[];for(let i=0;i<r.length;i+=1)l[i]=kn(xn(e,r,i));return{c(){t=b("div"),n=b("ul");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=x(e,"DIV",{class:!0});var r=w(t);n=x(r,"UL",{class:!0});var i=w(n);for(let t=0;t<l.length;t+=1)l[t].l(i);i.forEach(k),r.forEach(k),this.h()},h(){O(n,"class","svelte-10bnd8"),O(t,"class","ListContainer svelte-10bnd8")},m(e,r){C(e,t,r),R(t,n);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(e,t){if(14&t){let i;for(r=e[1],i=0;i<r.length;i+=1){const o=xn(e,r,i);l[i]?l[i].p(o,t):(l[i]=kn(o),l[i].c(),l[i].m(n,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}},d(e){e&&k(t),te(l,e)}}}function kn(e){let t,n,r,l,i,o,s,a,c,f,u,h=e[6].id+"",g=e[3][e[6].artnr].title+"",$=JSON.stringify(p(d({},e[6]),{points:e[6].points.map(e[5])}),null," ")+"";return{c(){t=b("li"),n=b("div"),r=b("span"),l=K(h),i=M(),o=b("span"),s=K(g),a=M(),c=b("pre"),f=K($),u=M(),this.h()},l(e){t=x(e,"LI",{class:!0});var d=w(t);n=x(d,"DIV",{class:!0});var p=w(n);r=x(p,"SPAN",{class:!0});var m=w(r);l=G(m,h),m.forEach(k),i=D(p),o=x(p,"SPAN",{class:!0});var y=w(o);s=G(y,g),y.forEach(k),p.forEach(k),a=D(d),c=x(d,"PRE",{});var v=w(c);f=G(v,$),v.forEach(k),u=D(d),d.forEach(k),this.h()},h(){O(r,"class","svelte-10bnd8"),O(o,"class","svelte-10bnd8"),O(n,"class","svelte-10bnd8"),O(t,"class","svelte-10bnd8"),E(t,"isActiveGleis",e[2].includes(e[6].id))},m(e,d){C(e,t,d),R(t,n),R(n,r),R(r,l),R(n,i),R(n,o),R(o,s),R(t,a),R(t,c),R(c,f),R(t,u)},p(e,n){2&n&&h!==(h=e[6].id+"")&&W(l,h),10&n&&g!==(g=e[3][e[6].artnr].title+"")&&W(s,g),2&n&&$!==($=JSON.stringify(p(d({},e[6]),{points:e[6].points.map(e[5])}),null," ")+"")&&W(f,$),6&n&&E(t,"isActiveGleis",e[2].includes(e[6].id))},d(e){e&&k(t)}}}function On(e){let t,n,r,l;t=new $t({props:{name:e[0]?"eye":"eye-slash"}}),t.$on("click",e[4]);let i=e[0]&&wn(e);return{c(){N(t.$$.fragment),n=M(),i&&i.c(),r=B()},l(e){z(t.$$.fragment,e),n=D(e),i&&i.l(e),r=B()},m(e,o){q(t,e,o),C(e,n,o),i&&i.m(e,o),C(e,r,o),l=!0},p(e,n){const l={};1&n&&(l.name=e[0]?"eye":"eye-slash"),t.$set(l),e[0]?i?i.p(e,n):(i=wn(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i(e){l||(A(t.$$.fragment,e),l=!0)},o(e){T(t.$$.fragment,e),l=!1},d(e){U(t,e),e&&k(n),i&&i.d(e),e&&k(r)}}}function Sn(e){let t,n,r;return n=new st({props:{flex:!1,startMinimized:!0,toggle:!0,title:"Selected gleis data",$$slots:{default:[On]},$$scope:{ctx:e}}}),{c(){t=b("div"),N(n.$$.fragment),this.h()},l(e){t=x(e,"DIV",{class:!0});var r=w(t);z(n.$$.fragment,r),r.forEach(k),this.h()},h(){O(t,"class","ConnectionPane svelte-10bnd8")},m(e,l){C(e,t,l),q(n,t,null),r=!0},p(e,[t]){const r={};527&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(A(n.$$.fragment,e),r=!0)},o(e){T(n.$$.fragment,e),r=!1},d(e){e&&k(t),U(n)}}}function En(e,t,n){let r,l,i;ee(e,an,(e=>n(1,r=e))),ee(e,en,(e=>n(2,l=e))),ee(e,Ue,(e=>n(3,i=e)));let o=!0;return[o,r,l,i,()=>n(0,o=!o),e=>p(d({},e),{connectAngle:ke(e.connectAngle||0)})]}class Cn extends ${constructor(e){super(),m(this,e,En,Sn,y,{})}}const[In,Pn]=De("dimensions"),[An,Tn]=De("gridSize"),[Ln,jn]=De("gridVisible"),[Mn,Dn]=De("viewBoxTranslation"),Rn=g([Mn,In],(([e,t])=>{if(null===e){return{x:-t.width/4,y:-t.height/4}}return e}));De("selectionToolsEnabled");const[Nn,zn]=De("scale");function qn(e){if(!(e>=.1&&e<=5))throw new Error(`scale must be between 0.1 and 5, ${e} was provided.`);zn(e)}const Un=je("gleisPlanSaved",{}),[_n,Vn]=De("gleisPlanSaveIdSelected");function Bn(e,t){return _l("createsaved",e,t),{id:e,name:t,activeTrackLibId:J(Ne),gleisPlanned:J(rn),layerControl:J(Wt),appConfig:J(Me),guides:J(Xn),dateUpdated:(new Date).toLocaleString("nl-nl")}}function Kn(e,t){const n=e||wt();Un.update((e=>{var r;return p(d({},e),{[n]:Bn(n,(null==(r=e[n])?void 0:r.name)||t)})})),Vn(n)}function Gn(e){const t=J(_n),n=`${Date.now()}-${e}`;!function(e,t){var n=document.createElement("a"),r=new Blob([e],{type:"application/json"});n.href=URL.createObjectURL(r),n.download=t+".json",n.click()}(JSON.stringify(Bn(t,e)),n)}const Wn=u(!1);function Fn(e,t){const n=t.getScreenCTM(),r=e.target.ownerSVGElement.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r.matrixTransform(n.inverse())}const Hn=De("sidebarState"),Yn=u("gleis"),Xn=je("guides",[]),Jn=g([Xn,Ft],(([e,t])=>e.filter((e=>{var n;return null==(n=t[e.layerId])?void 0:n.isVisible}))));function Qn(e,t,n=!1){const r={id:wt(),label:"",points:t,layerId:e,isShape:n};return Xn.update((e=>[...e,r])),r}function Zn(e){Xn.update((t=>t.filter((t=>!e.includes(t.id)))))}function er(e){let t,n,r,l,i,o,s,a,c,f,d;return{c(){t=b("label"),n=K("width "),r=b("input"),i=M(),o=b("label"),s=K("height "),a=b("input"),this.h()},l(e){t=x(e,"LABEL",{});var l=w(t);n=G(l,"width "),r=x(l,"INPUT",{type:!0,size:!0,value:!0}),l.forEach(k),i=D(e),o=x(e,"LABEL",{});var c=w(o);s=G(c,"height "),a=x(c,"INPUT",{type:!0,size:!0,value:!0}),c.forEach(k),this.h()},h(){O(r,"type","number"),O(r,"size","4"),r.value=l=e[0].width,O(a,"type","number"),O(a,"size","4"),a.value=c=e[0].height},m(l,c){C(l,t,c),R(t,n),R(t,r),C(l,i,c),C(l,o,c),R(o,s),R(o,a),f||(d=[I(r,"change",e[2]),I(a,"change",e[3])],f=!0)},p(e,t){1&t&&l!==(l=e[0].width)&&(r.value=l),1&t&&c!==(c=e[0].height)&&(a.value=c)},d(e){e&&k(t),e&&k(i),e&&k(o),f=!1,L(d)}}}function tr(e){let t,n;return t=new st({props:{flex:!1,startMinimized:!0,toggle:!0,title:"Dimensions",$$slots:{default:[er]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function nr(e,t,n){let r;function l(e,t){Pn((n=>Object.assign(Object.assign({},n),{[e]:t})))}ee(e,In,(e=>n(0,r=e)));return[r,l,e=>l("width",parseInt(e.currentTarget.value,10)),e=>l("height",parseInt(e.currentTarget.value,10))]}class rr extends ${constructor(e){super(),m(this,e,nr,tr,y,{})}}function lr(e){let t;return{c(){t=K("Gleis")},l(e){t=G(e,"Gleis")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function ir(e){let t;return{c(){t=K("Guides")},l(e){t=G(e,"Guides")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function or(e){let t;return{c(){t=K("Shapes")},l(e){t=G(e,"Shapes")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function sr(e){let t,n,r,l,i,o;return t=new Fe({props:{isActive:"gleis"===e[0],$$slots:{default:[lr]},$$scope:{ctx:e}}}),t.$on("click",e[1]),r=new Fe({props:{isActive:"guides"===e[0],$$slots:{default:[ir]},$$scope:{ctx:e}}}),r.$on("click",e[2]),i=new Fe({props:{isActive:"shapes"===e[0],$$slots:{default:[or]},$$scope:{ctx:e}}}),i.$on("click",e[3]),{c(){N(t.$$.fragment),n=M(),N(r.$$.fragment),l=M(),N(i.$$.fragment)},l(e){z(t.$$.fragment,e),n=D(e),z(r.$$.fragment,e),l=D(e),z(i.$$.fragment,e)},m(e,s){q(t,e,s),C(e,n,s),q(r,e,s),C(e,l,s),q(i,e,s),o=!0},p(e,n){const l={};1&n&&(l.isActive="gleis"===e[0]),16&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l);const o={};1&n&&(o.isActive="guides"===e[0]),16&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o);const s={};1&n&&(s.isActive="shapes"===e[0]),16&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s)},i(e){o||(A(t.$$.fragment,e),A(r.$$.fragment,e),A(i.$$.fragment,e),o=!0)},o(e){T(t.$$.fragment,e),T(r.$$.fragment,e),T(i.$$.fragment,e),o=!1},d(e){U(t,e),e&&k(n),U(r,e),e&&k(l),U(i,e)}}}function ar(e){let t,n;return t=new st({props:{title:"Editmode",$$slots:{default:[sr]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};17&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function cr(e,t,n){let r;ee(e,Yn,(e=>n(0,r=e)));return[r,()=>Yn.set("gleis"),()=>Yn.set("guides"),()=>Yn.set("shapes")]}class fr extends ${constructor(e){super(),m(this,e,cr,ar,y,{})}}const dr=u(null),pr=u(null),ur=u(null);function hr(e,t,n){const r=e.slice();return r[25]=t[n],r[27]=n,r}function gr(e){let t,n=[],r=new Map,l=e[2];const i=e=>e[25];for(let o=0;o<l.length;o+=1){let t=hr(e,l,o),s=i(t);r.set(s,n[o]=$r(s,t))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=B()},l(e){for(let t=0;t<n.length;t+=1)n[t].l(e);t=B()},m(e,r){for(let t=0;t<n.length;t+=1)n[t].m(e,r);C(e,t,r)},p(e,o){4&o&&(l=e[2],n=ne(n,o,i,1,e,l,r,t.parentNode,re,$r,t,hr))},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&k(t)}}}function $r(e,t){let n,r,l;return{key:e,first:null,c(){n=le("path"),this.h()},l(e){n=x(e,"path",{d:!0,class:!0},1),w(n).forEach(k),this.h()},h(){O(n,"d",r=t[25].d.toString()),O(n,"class",l=S(`spath ${t[25].type}`)+" svelte-6t5hnq"),this.first=n},m(e,t){C(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[25].d.toString())&&O(n,"d",r),4&i&&l!==(l=S(`spath ${t[25].type}`)+" svelte-6t5hnq")&&O(n,"class",l)},d(e){e&&k(n)}}}function mr(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$,m,y,v,b,S,E,P,A,T,j,R;return{c(){t=le("line"),o=M(),s=le("line"),p=M(),u=le("circle"),$=M(),m=le("line"),E=M(),P=le("circle"),this.h()},l(e){t=x(e,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0},1),w(t).forEach(k),o=D(e),s=x(e,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0},1),w(s).forEach(k),p=D(e),u=x(e,"circle",{class:!0,r:!0,cx:!0,cy:!0},1),w(u).forEach(k),$=D(e),m=x(e,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0},1),w(m).forEach(k),E=D(e),P=x(e,"circle",{class:!0,r:!0,cx:!0,cy:!0},1),w(P).forEach(k),this.h()},h(){O(t,"class","TangentLine svelte-6t5hnq"),O(t,"x1",n=e[0][0].x),O(t,"y1",r=e[0][0].y),O(t,"x2",l=e[0][3].x),O(t,"y2",i=e[0][3].y),O(s,"class","TangentLine svelte-6t5hnq"),O(s,"x1",a=e[0][0].x),O(s,"y1",c=e[0][0].y),O(s,"x2",f=e[0][1].x),O(s,"y2",d=e[0][1].y),O(u,"class","TangentPoint start svelte-6t5hnq"),O(u,"r","10"),O(u,"cx",h=e[0][1].x),O(u,"cy",g=e[0][1].y),O(m,"class","TangentLine svelte-6t5hnq"),O(m,"x1",y=e[0][2].x),O(m,"y1",v=e[0][2].y),O(m,"x2",b=e[0][3].x),O(m,"y2",S=e[0][3].y),O(P,"class","TangentPoint end svelte-6t5hnq"),O(P,"r","10"),O(P,"cx",A=e[0][2].x),O(P,"cy",T=e[0][2].y)},m(n,r){C(n,t,r),C(n,o,r),C(n,s,r),C(n,p,r),C(n,u,r),C(n,$,r),C(n,m,r),C(n,E,r),C(n,P,r),j||(R=[I(u,"pointerdown",e[8]),I(u,"pointerup",e[9]),I(P,"pointerdown",e[10]),I(P,"pointerup",e[11])],j=!0)},p(e,o){1&o&&n!==(n=e[0][0].x)&&O(t,"x1",n),1&o&&r!==(r=e[0][0].y)&&O(t,"y1",r),1&o&&l!==(l=e[0][3].x)&&O(t,"x2",l),1&o&&i!==(i=e[0][3].y)&&O(t,"y2",i),1&o&&a!==(a=e[0][0].x)&&O(s,"x1",a),1&o&&c!==(c=e[0][0].y)&&O(s,"y1",c),1&o&&f!==(f=e[0][1].x)&&O(s,"x2",f),1&o&&d!==(d=e[0][1].y)&&O(s,"y2",d),1&o&&h!==(h=e[0][1].x)&&O(u,"cx",h),1&o&&g!==(g=e[0][1].y)&&O(u,"cy",g),1&o&&y!==(y=e[0][2].x)&&O(m,"x1",y),1&o&&v!==(v=e[0][2].y)&&O(m,"y1",v),1&o&&b!==(b=e[0][3].x)&&O(m,"x2",b),1&o&&S!==(S=e[0][3].y)&&O(m,"y2",S),1&o&&A!==(A=e[0][2].x)&&O(P,"cx",A),1&o&&T!==(T=e[0][2].y)&&O(P,"cy",T)},d(e){e&&k(t),e&&k(o),e&&k(s),e&&k(p),e&&k(u),e&&k($),e&&k(m),e&&k(E),e&&k(P),j=!1,L(R)}}}function yr(e){var t,n;let r,l,i,o,s=(null==(t=e[2])?void 0:t.length)&&gr(e),a=4===(null==(n=e[0])?void 0:n.length)&&mr(e);return{c(){s&&s.c(),r=M(),a&&a.c(),l=B()},l(e){s&&s.l(e),r=D(e),a&&a.l(e),l=B()},m(t,n){s&&s.m(t,n),C(t,r,n),a&&a.m(t,n),C(t,l,n),i||(o=[I(window,"pointermove",e[6]),I(window,"dblclick",e[7])],i=!0)},p(e,[t]){var n,i;(null==(n=e[2])?void 0:n.length)?s?s.p(e,t):(s=gr(e),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),4===(null==(i=e[0])?void 0:i.length)?a?a.p(e,t):(a=mr(e),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},i:F,o:F,d(e){s&&s.d(e),e&&k(r),a&&a.d(e),e&&k(l),i=!1,L(o)}}}function vr(e,t,n){let r,l,i,o,s,a,c;ee(e,Zt,(e=>n(19,i=e))),ee(e,cn,(e=>n(21,o=e))),ee(e,Rt,(e=>n(3,s=e))),ee(e,pr,(e=>n(22,a=e))),ee(e,dr,(e=>n(23,c=e)));let f,d=!1;const p=i.segments[0];ie((()=>{console.info("FlexModeller active",o),o&&n(0,r=o.points)}));const u=e=>{if(!s)return;const t=Lt(a,c,c,{x:e.clientX,y:e.clientY});n(0,r=Nt({pointOrigin:Object.assign(Object.assign({},t),{connectAngle:-1,type:"c1"}),proto:p}))};let h,g,$,m,y=0,v=0;function b(e,t){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t&&(f=[t]);const l=e.type;if(d||"pointerdown"!==l||n(1,d=!0),d&&"pointermove"===l){v+=Math.abs(e.movementY),y+=Math.abs(e.movementX),$=y>v,m=!$,h||g||(h=e.clientX,g=e.clientY);const{x:t,y:l}=Lt(a,c,c,{x:m&&e.shiftKey&&h?h:e.clientX,y:$&&e.shiftKey&&g?g:e.clientY});for(const e of f){const i=r[e],o=1===e?e-1:e+1,s=r[o];i.x=t,i.y=l;const a=we(Se(i.x,i.y,s.x,s.y))-mt*s.direction;n(0,r[o].connectAngle=a,r),n(0,r[e]=i,r)}}d&&"pointerup"===l&&(n(1,d=!1),h=void 0,g=void 0,y=0,v=0,o&&un([{id:o.id,points:r}]))}return e.$$.update=()=>{1&e.$$.dirty&&n(2,l=4===r.length?qt(r,p):null),1&e.$$.dirty&&r&&r[3]},n(0,r=[]),[r,d,l,s,u,b,e=>{s&&u(e),d&&b(e)},()=>{s&&(Rt.set(null),pn({pointOrigin:r[0],flexPoints:r}))},e=>b(e,1),e=>b(e,1),e=>b(e,2),e=>b(e,2)]}class br extends ${constructor(e){super(),m(this,e,vr,yr,y,{})}}function xr(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function wr(e,t){let n,r,l;return{key:e,first:null,c(){n=le("path"),this.h()},l(e){n=x(e,"path",{d:!0,class:!0},1),w(n).forEach(k),this.h()},h(){O(n,"d",r=t[14].d.toString()),O(n,"class",l=S(`spath ${t[14].type}`)+" svelte-hqt0us"),this.first=n},m(e,t){C(e,n,t)},p(e,i){t=e,4&i&&r!==(r=t[14].d.toString())&&O(n,"d",r),4&i&&l!==(l=S(`spath ${t[14].type}`)+" svelte-hqt0us")&&O(n,"class",l)},d(e){e&&k(n)}}}function kr(e){let t,n,r,l,i,o,s,a,c,f=e[1].title+"",d=e[1].artnr+"",p=[],u=new Map,h=e[2];const g=e=>e[14];for(let $=0;$<h.length;$+=1){let t=xr(e,h,$),n=g(t);u.set(n,p[$]=wr(n,t))}return{c(){t=le("g"),n=le("title"),r=K(f),l=K(" - "),i=K(d);for(let e=0;e<p.length;e+=1)p[e].c();this.h()},l(e){t=x(e,"g",{id:!0,class:!0,"data-pathLen":!0,style:!0},1);var o=w(t);n=x(o,"title",{},1);var s=w(n);r=G(s,f),l=G(s," - "),i=G(s,d),s.forEach(k);for(let t=0;t<p.length;t+=1)p[t].l(o);o.forEach(k),this.h()},h(){O(t,"id",o=e[0].id),O(t,"class","Gleis svelte-hqt0us"),O(t,"data-pathlen",e[6]),O(t,"style",s=`--gleis-fill-color:${e[5]};${e[4]?`--gleis-fill-pattern: url(#pattern-${e[4]})`:""}`),E(t,"isActive",e[3])},m(o,s){C(o,t,s),R(t,n),R(n,r),R(n,l),R(n,i);for(let e=0;e<p.length;e+=1)p[e].m(t,null);a||(c=I(t,"click",e[13]),a=!0)},p(e,[n]){2&n&&f!==(f=e[1].title+"")&&W(r,f),2&n&&d!==(d=e[1].artnr+"")&&W(i,d),4&n&&(h=e[2],p=ne(p,n,g,1,e,h,u,t,re,wr,null,xr)),1&n&&o!==(o=e[0].id)&&O(t,"id",o),64&n&&O(t,"data-pathlen",e[6]),48&n&&s!==(s=`--gleis-fill-color:${e[5]};${e[4]?`--gleis-fill-pattern: url(#pattern-${e[4]})`:""}`)&&O(t,"style",s),8&n&&E(t,"isActive",e[3])},i:F,o:F,d(e){e&&k(t);for(let t=0;t<p.length;t+=1)p[t].d();a=!1,c()}}}function Or(e,t,n){let r,l,i,o,s,a,c,f,d;var p,u;ee(e,en,(e=>n(11,a=e))),ee(e,Ft,(e=>n(12,c=e))),ee(e,Ht,(e=>n(7,f=e))),ee(e,Yn,(e=>n(8,d=e)));let{gleisProps:h}=t,{proto:g}=t;return e.$$set=e=>{"gleisProps"in e&&n(0,h=e.gleisProps),"proto"in e&&n(1,g=e.proto)},e.$$.update=()=>{if(2049&e.$$.dirty&&n(3,r=a.includes(h.id)),3&e.$$.dirty)try{n(2,l=dn(h,g))}catch(t){console.error("Bad segment generation.",t)}4609&e.$$.dirty&&n(4,i=(null===n(9,p=c[h.layerId])||void 0===p?void 0:p.patternId)||""),5121&e.$$.dirty&&n(5,o=(null===n(10,u=c[h.layerId])||void 0===u?void 0:u.color)||"red"),4&e.$$.dirty&&n(6,s=l.reduce(((e,t)=>e+new Q(t.d.toString()).getTotalLength()),0))},n(2,l=[]),[h,g,l,r,i,o,s,f,d,p,u,a,c,e=>{e.stopPropagation(),!f.locked&&f.isVisible&&"gleis"===d&&nn(h.id,e.shiftKey)}]}class Sr extends ${constructor(e){super(),m(this,e,Or,kr,y,{gleisProps:0,proto:1})}}function Er(e){let t,n,r,l;return{c(){t=le("text"),n=K(e[0]),this.h()},l(r){t=x(r,"text",{x:!0,y:!0},1);var l=w(t);n=G(l,e[0]),l.forEach(k),this.h()},h(){O(t,"x",r=e[1].x-("c2"===e[1].type?40:-10)),O(t,"y",l=e[1].y)},m(e,r){C(e,t,r),R(t,n)},p(e,i){1&i&&W(n,e[0]),2&i&&r!==(r=e[1].x-("c2"===e[1].type?40:-10))&&O(t,"x",r),2&i&&l!==(l=e[1].y)&&O(t,"y",l)},d(e){e&&k(t)}}}function Cr(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$,m,y=e[1].type+"",v=ke(e[1].connectAngle)+"",b=e[1].direction+"",E=e[0]&&Er(e),P=e[2]&&e[3]&&e[4]&&e[5]&&function(e){let t;return{c(){t=le("line"),this.h()},l(e){t=x(e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0},1),w(t).forEach(k),this.h()},h(){O(t,"x1",e[2]),O(t,"y1",e[3]),O(t,"x2",e[4]),O(t,"y2",e[5]),O(t,"class","SplitLine svelte-g53fo8")},m(e,n){C(e,t,n)},p:F,d(e){e&&k(t)}}}(e);return{c(){t=le("g"),n=le("title"),r=K(y),l=K(" / "),i=K(v),o=K("° "),s=K(b),E&&E.c(),a=le("circle"),P&&P.c(),p=le("circle"),this.h()},l(e){t=x(e,"g",{},1);var c=w(t);n=x(c,"title",{},1);var f=w(n);r=G(f,y),l=G(f," / "),i=G(f,v),o=G(f,"° "),s=G(f,b),f.forEach(k),E&&E.l(c),a=x(c,"circle",{class:!0,cx:!0,cy:!0,r:!0},1),w(a).forEach(k),P&&P.l(c),p=x(c,"circle",{class:!0,cx:!0,cy:!0,r:!0},1),w(p).forEach(k),c.forEach(k),this.h()},h(){O(a,"class",c=S(`Handle ${e[1].type}`)+" svelte-g53fo8"),O(a,"cx",f=e[1].x),O(a,"cy",d=e[1].y),O(a,"r","8"),O(p,"class",u=S(`HandleClick ${e[1].type}`)+" svelte-g53fo8"),O(p,"cx",h=e[1].x),O(p,"cy",g=e[1].y),O(p,"r","10")},m(c,f){C(c,t,f),R(t,n),R(n,r),R(n,l),R(n,i),R(n,o),R(n,s),E&&E.m(t,null),R(t,a),P&&P.m(t,null),R(t,p),$||(m=I(p,"click",e[7]),$=!0)},p(e,[n]){2&n&&y!==(y=e[1].type+"")&&W(r,y),2&n&&v!==(v=ke(e[1].connectAngle)+"")&&W(i,v),2&n&&b!==(b=e[1].direction+"")&&W(s,b),e[0]?E?E.p(e,n):(E=Er(e),E.c(),E.m(t,a)):E&&(E.d(1),E=null),2&n&&c!==(c=S(`Handle ${e[1].type}`)+" svelte-g53fo8")&&O(a,"class",c),2&n&&f!==(f=e[1].x)&&O(a,"cx",f),2&n&&d!==(d=e[1].y)&&O(a,"cy",d),e[2]&&e[3]&&e[4]&&e[5]&&P.p(e,n),2&n&&u!==(u=S(`HandleClick ${e[1].type}`)+" svelte-g53fo8")&&O(p,"class",u),2&n&&h!==(h=e[1].x)&&O(p,"cx",h),2&n&&g!==(g=e[1].y)&&O(p,"cy",g)},i:F,o:F,d(e){e&&k(t),E&&E.d(),P&&P.d(),$=!1,m()}}}function Ir(e,t,n){let{label:r=""}=t,{point:l}=t;const i=oe(),o=l.x+20*Math.cos(l.connectAngle),s=l.y+20*Math.sin(l.connectAngle),a=l.x-20*Math.cos(l.connectAngle),c=l.y-20*Math.sin(l.connectAngle);function f(e,t){e.stopPropagation(),i("connect",t)}return e.$$set=e=>{"label"in e&&n(0,r=e.label),"point"in e&&n(1,l=e.point)},[r,l,o,s,a,c,f,e=>f(e,l)]}class Pr extends ${constructor(e){super(),m(this,e,Ir,Cr,y,{label:0,point:1})}}function Ar(e){let t,n;return t=new Pr({props:{point:e[2]}}),t.$on("connect",e[7]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p:F,i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Tr(e){let t,n;return t=new Pr({props:{point:e[3]}}),t.$on("connect",e[9]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p:F,i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Lr(e){let t,n,r,l,i,o,s,a=e[1]&&Ar(e);n=new Pr({props:{point:e[0]}}),n.$on("connect",e[8]);let c=e[1]&&Tr(e);return{c(){a&&a.c(),t=M(),N(n.$$.fragment),r=M(),c&&c.c(),l=B()},l(e){a&&a.l(e),t=D(e),z(n.$$.fragment,e),r=D(e),c&&c.l(e),l=B()},m(f,d){a&&a.m(f,d),C(f,t,d),q(n,f,d),C(f,r,d),c&&c.m(f,d),C(f,l,d),i=!0,o||(s=[I(window,"keydown",e[4]),I(window,"keyup",e[5])],o=!0)},p(e,[r]){e[1]?a?(a.p(e,r),2&r&&A(a,1)):(a=Ar(e),a.c(),A(a,1),a.m(t.parentNode,t)):a&&(_(),T(a,1,1,(()=>{a=null})),V());const i={};1&r&&(i.point=e[0]),n.$set(i),e[1]?c?(c.p(e,r),2&r&&A(c,1)):(c=Tr(e),c.c(),A(c,1),c.m(l.parentNode,l)):c&&(_(),T(c,1,1,(()=>{c=null})),V())},i(e){i||(A(a),A(n.$$.fragment,e),A(c),i=!0)},o(e){T(a),T(n.$$.fragment,e),T(c),i=!1},d(e){a&&a.d(e),e&&k(t),U(n,e),e&&k(r),c&&c.d(e),e&&k(l),o=!1,L(s)}}}function jr(e,t,n){let r;const l=oe();let{point:i}=t;const o=i.x,s=i.y,a=i.connectAngle,c={x:o+61.6*Math.cos(a),y:s+61.6*Math.sin(a),connectAngle:i.connectAngle,type:i.type,direction:i.direction},f={x:o-61.6*Math.cos(a),y:s-61.6*Math.sin(a),connectAngle:i.connectAngle,type:i.type,direction:i.direction};function d(e,t){e.stopPropagation(),l("connect",t)}return e.$$set=e=>{"point"in e&&n(0,i=e.point)},n(1,r=!1),[i,r,c,f,function(e){"Alt"===e.key&&n(1,r=!0)},function(e){"Alt"===e.key&&n(1,r=!1)},d,e=>d(e,c),e=>d(e,i),e=>d(e,f)]}class Mr extends ${constructor(e){super(),m(this,e,jr,Lr,y,{point:0})}}function Dr(e){let t,n;return{c:F,l:F,m(r,l){t||(n=I(window,"keydown",e[0]),t=!0)},p:F,i:F,o:F,d(e){t=!1,n()}}}function Rr(e,t,n){let r,l,i,o;ee(e,an,(e=>n(2,l=e))),ee(e,Ht,(e=>n(4,i=e))),ee(e,en,(e=>n(5,o=e)));let{onConnect:s}=t;return e.$$set=e=>{"onConnect"in e&&n(1,s=e.onConnect)},e.$$.update=()=>{4&e.$$.dirty&&(r=l[0])},[function(e){if(r.layerId===i.id&&r&&!(o.length>1)&&"Flex"!==r.type){const[t,n]=r.points;switch(e.key){case"ArrowRight":if(!e.shiftKey){const t=n;t&&s(e,t)}break;case"ArrowLeft":if(!e.shiftKey){const n=t;n&&s(e,n)}}}},s,l]}class Nr extends ${constructor(e){super(),m(this,e,Rr,Dr,y,{onConnect:1})}}function zr(e,t,n){const r=e.slice();return r[12]=t[n],r}function qr(e,t,n){const r=e.slice();return r[15]=t[n],r}function Ur(e,t,n){const r=e.slice();return r[15]=t[n],r}function _r(e){let t,n,r=[],l=new Map,i=e[4](e[12]);const o=e=>e[15];for(let s=0;s<i.length;s+=1){let t=qr(e,i,s),n=o(t);l.set(n,r[s]=Br(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=B()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=B()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);C(e,t,l),n=!0},p(e,n){25&n&&(i=e[4](e[12]),_(),r=ne(r,n,o,1,e,i,l,t.parentNode,se,Br,t,qr),V())},i(e){if(!n){for(let e=0;e<i.length;e+=1)A(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)T(r[t]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&k(t)}}}function Vr(e){let t,n,r=[],l=new Map,i=e[4](e[12]);const o=e=>e[15];for(let s=0;s<i.length;s+=1){let t=Ur(e,i,s),n=o(t);l.set(n,r[s]=Kr(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=B()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=B()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);C(e,t,l),n=!0},p(e,n){25&n&&(i=e[4](e[12]),_(),r=ne(r,n,o,1,e,i,l,t.parentNode,se,Kr,t,Ur),V())},i(e){if(!n){for(let e=0;e<i.length;e+=1)A(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)T(r[t]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&k(t)}}}function Br(e,t){let n,r,l;return r=new Pr({props:{point:t[15]}}),r.$on("connect",t[6]),{key:e,first:null,c(){n=B(),N(r.$$.fragment),this.h()},l(e){n=B(),z(r.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){C(e,n,t),q(r,e,t),l=!0},p(e,n){t=e;const l={};1&n&&(l.point=t[15]),r.$set(l)},i(e){l||(A(r.$$.fragment,e),l=!0)},o(e){T(r.$$.fragment,e),l=!1},d(e){e&&k(n),U(r,e)}}}function Kr(e,t){let n,r,l;return r=new Mr({props:{point:t[15]}}),r.$on("connect",t[5]),{key:e,first:null,c(){n=B(),N(r.$$.fragment),this.h()},l(e){n=B(),z(r.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){C(e,n,t),q(r,e,t),l=!0},p(e,n){t=e;const l={};1&n&&(l.point=t[15]),r.$set(l)},i(e){l||(A(r.$$.fragment,e),l=!0)},o(e){T(r.$$.fragment,e),l=!1},d(e){e&&k(n),U(r,e)}}}function Gr(e,t){let n,r,l,i,o,s;const a=[Vr,_r],c=[];function f(e,t){return 5&t&&(r=!!e[2].includes(e[12].id)),r?0:1}return l=f(t,-1),i=c[l]=a[l](t),{key:e,first:null,c(){n=B(),i.c(),o=B(),this.h()},l(e){n=B(),i.l(e),o=B(),this.h()},h(){this.first=n},m(e,t){C(e,n,t),c[l].m(e,t),C(e,o,t),s=!0},p(e,n){let r=l;l=f(t=e,n),l===r?c[l].p(t,n):(_(),T(c[r],1,1,(()=>{c[r]=null})),V(),i=c[l],i?i.p(t,n):(i=c[l]=a[l](t),i.c()),A(i,1),i.m(o.parentNode,o))},i(e){s||(A(i),s=!0)},o(e){T(i),s=!1},d(e){e&&k(n),c[l].d(e),e&&k(o)}}}function Wr(e){let t,n;return t=new Nr({props:{onConnect:e[3]}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p:F,i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Fr(e){let t,n,r,l=[],i=new Map,o=e[0];const s=e=>e[12].id;for(let c=0;c<o.length;c+=1){let t=zr(e,o,c),n=s(t);i.set(n,l[c]=Gr(n,t))}let a=e[1]&&Wr(e);return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=M(),a&&a.c(),n=B()},l(e){for(let t=0;t<l.length;t+=1)l[t].l(e);t=D(e),a&&a.l(e),n=B()},m(e,i){for(let t=0;t<l.length;t+=1)l[t].m(e,i);C(e,t,i),a&&a.m(e,i),C(e,n,i),r=!0},p(e,[r]){29&r&&(o=e[0],_(),l=ne(l,r,s,1,e,o,i,t.parentNode,se,Gr,t,zr),V()),e[1]?a?(a.p(e,r),2&r&&A(a,1)):(a=Wr(e),a.c(),A(a,1),a.m(n.parentNode,n)):a&&(_(),T(a,1,1,(()=>{a=null})),V())},i(e){if(!r){for(let e=0;e<o.length;e+=1)A(l[e]);A(a),r=!0}},o(e){for(let t=0;t<l.length;t+=1)T(l[t]);T(a),r=!1},d(e){for(let t=0;t<l.length;t+=1)l[t].d(e);e&&k(t),a&&a.d(e),e&&k(n)}}}function Hr(e,t,n){let r,l,i,o,s;ee(e,Zt,(e=>n(7,r=e))),ee(e,Rt,(e=>n(8,l=e))),ee(e,mn,(e=>n(9,i=e))),ee(e,ln,(e=>n(10,o=e))),ee(e,en,(e=>n(2,s=e)));var a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]])}return n};let{gleisPlanned:c=[]}=t,{quickConnectEnabled:f=!1}=t;function d(e,t){const n=a(t,["root"]);if("Flex"===r.type)if(l){!function(e,t){console.log("sss",e);const n=Nt({pointOrigin:e,proto:t,finalize:!0});pn({pointOrigin:n[0],flexPoints:n}),Rt.set(null)}(n,r.segments[0])}else Rt.set(Object.assign({},n));else console.log("pointOriginProps",n),pn({pointOrigin:Object.assign({},n)})}return e.$$set=e=>{"gleisPlanned"in e&&n(0,c=e.gleisPlanned),"quickConnectEnabled"in e&&n(1,f=e.quickConnectEnabled)},[c,f,s,d,function(e){return e.points.filter((t=>{var n;const r=null===(n=i[$n(t)])||void 0===n?void 0:n.filter((t=>{var n;return(null===(n=o[t])||void 0===n?void 0:n.layerId)===e.layerId}));return"c1"===t.type||"c2"===t.type&&(!r||r.length<=1)}))},e=>d(0,e.detail),e=>d(0,e.detail)]}class Yr extends ${constructor(e){super(),m(this,e,Hr,Fr,y,{gleisPlanned:0,quickConnectEnabled:1})}}function Xr(e,t,n){const r=e.slice();return r[5]=t[n][0],r[6]=t[n][1],r}function Jr(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$,m=e[6]+"",y=e[1][e[5]].title+"",v=e[5]+"",O=(e[6]*e[1][e[5]].price||0).toFixed(2)+"",S=e[1][e[5]].brand+"";return{c(){t=b("tr"),n=b("td"),r=K(m),l=K(" x"),i=M(),o=b("td"),s=K(y),a=M(),c=b("td"),f=K(v),d=M(),p=b("td"),u=K(O),h=M(),g=b("td"),$=K(S)},l(e){t=x(e,"TR",{});var b=w(t);n=x(b,"TD",{});var E=w(n);r=G(E,m),l=G(E," x"),E.forEach(k),i=D(b),o=x(b,"TD",{});var C=w(o);s=G(C,y),C.forEach(k),a=D(b),c=x(b,"TD",{});var I=w(c);f=G(I,v),I.forEach(k),d=D(b),p=x(b,"TD",{});var P=w(p);u=G(P,O),P.forEach(k),h=D(b),g=x(b,"TD",{});var A=w(g);$=G(A,S),A.forEach(k),b.forEach(k)},m(e,m){C(e,t,m),R(t,n),R(n,r),R(n,l),R(t,i),R(t,o),R(o,s),R(t,a),R(t,c),R(c,f),R(t,d),R(t,p),R(p,u),R(t,h),R(t,g),R(g,$)},p(e,t){1&t&&m!==(m=e[6]+"")&&W(r,m),3&t&&y!==(y=e[1][e[5]].title+"")&&W(s,y),1&t&&v!==(v=e[5]+"")&&W(f,v),3&t&&O!==(O=(e[6]*e[1][e[5]].price||0).toFixed(2)+"")&&W(u,O),3&t&&S!==(S=e[1][e[5]].brand+"")&&W($,S)},d(e){e&&k(t)}}}function Qr(e){let t,n,r,l,i,o,s,a,c,f,d,p,u=Object.entries(e[0]),h=[];for(let g=0;g<u.length;g+=1)h[g]=Jr(Xr(e,u,g));return{c(){t=b("div"),n=b("table");for(let e=0;e<h.length;e+=1)h[e].c();r=M(),l=b("tr"),i=b("td"),o=K("Total"),s=M(),a=b("tr"),c=b("td"),f=K(e[3]),d=b("td"),p=K(e[2]),this.h()},l(u){t=x(u,"DIV",{class:!0});var g=w(t);n=x(g,"TABLE",{class:!0});var $=w(n);for(let e=0;e<h.length;e+=1)h[e].l($);r=D($),l=x($,"TR",{});var m=w(l);i=x(m,"TD",{colspan:!0});var y=w(i);o=G(y,"Total"),y.forEach(k),m.forEach(k),s=D($),a=x($,"TR",{});var v=w(a);c=x(v,"TD",{colspan:!0});var b=w(c);f=G(b,e[3]),b.forEach(k),d=x(v,"TD",{});var O=w(d);p=G(O,e[2]),O.forEach(k),v.forEach(k),$.forEach(k),g.forEach(k),this.h()},h(){O(i,"colspan","4"),O(c,"colspan","3"),O(n,"class","inventoryTable svelte-1rvlf7p"),O(t,"class","InventoryContent svelte-1rvlf7p")},m(e,u){C(e,t,u),R(t,n);for(let t=0;t<h.length;t+=1)h[t].m(n,null);R(n,r),R(n,l),R(l,i),R(i,o),R(n,s),R(n,a),R(a,c),R(c,f),R(a,d),R(d,p)},p(e,t){if(3&t){let l;for(u=Object.entries(e[0]),l=0;l<u.length;l+=1){const i=Xr(e,u,l);h[l]?h[l].p(i,t):(h[l]=Jr(i),h[l].c(),h[l].m(n,r))}for(;l<h.length;l+=1)h[l].d(1);h.length=u.length}8&t&&W(f,e[3]),4&t&&W(p,e[2])},d(e){e&&k(t),te(h,e)}}}function Zr(e){let t,n;return t=new st({props:{title:"Inventory",flex:!1,startMinimized:!0,toggle:!0,$$slots:{default:[Qr]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};527&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function el(e,t,n){let r,l;ee(e,ln,(e=>n(4,r=e))),ee(e,Ue,(e=>n(1,l=e)));let i={},o=0,s=0;return e.$$.update=()=>{if(31&e.$$.dirty){n(0,i={}),n(2,o=0),n(3,s=0);for(const e of Object.values(r))i[e.artnr]||n(0,i[e.artnr]=0,i),n(0,i[e.artnr]+=1,i),n(3,s+=1);for(const[e,t]of Object.entries(i))n(2,o+=i[e]*l[e].price||0)}},[i,l,o,s,r]}class tl extends ${constructor(e){super(),m(this,e,el,Zr,y,{})}}function nl(e){let t,n,r;return{c(){t=K("Length: "),n=K(e[0]),r=K("cm")},l(l){t=G(l,"Length: "),n=G(l,e[0]),r=G(l,"cm")},m(e,l){C(e,t,l),C(e,n,l),C(e,r,l)},p(e,t){1&t&&W(n,e[0])},d(e){e&&k(t),e&&k(n),e&&k(r)}}}function rl(e){let t,n;return t=new st({props:{title:"Info",$$slots:{default:[nl]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};9&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ll(e,t,n){let r;var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(l,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}a((r=r.apply(e,t||[])).next())}))};return an.subscribe((e=>l(void 0,void 0,void 0,(function*(){yield ae(),n(0,r=Math.round(function(e){const t=document.getElementById("selected-gleis");if(t)return Array.from(t.querySelectorAll(".spath.main")).map((e=>new Q(e.getAttribute("d")).getTotalLength()||0)).reduce(((e,t)=>e+t),0);return 0}()/10))})))),n(0,r=0),[r]}class il extends ${constructor(e){super(),m(this,e,ll,rl,y,{})}}function ol(e){let t,n;return t=new pt({props:{name:e[0]?"eye":"eye-slash"}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.name=e[0]?"eye":"eye-slash"),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function sl(e){let t;return{c(){t=K("reset")},l(e){t=G(e,"reset")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function al(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$;return t=new Fe({props:{variant:"plain",$$slots:{default:[ol]},$$scope:{ctx:e}}}),t.$on("click",e[4]),u=new Fe({props:{$$slots:{default:[sl]},$$scope:{ctx:e}}}),u.$on("click",e[2]),{c(){N(t.$$.fragment),n=M(),r=b("label"),l=K("width "),i=b("input"),s=M(),a=b("label"),c=K("height "),f=b("input"),p=M(),N(u.$$.fragment),this.h()},l(e){z(t.$$.fragment,e),n=D(e),r=x(e,"LABEL",{});var o=w(r);l=G(o,"width "),i=x(o,"INPUT",{type:!0,size:!0,value:!0}),o.forEach(k),s=D(e),a=x(e,"LABEL",{});var d=w(a);c=G(d,"height "),f=x(d,"INPUT",{type:!0,size:!0,value:!0}),d.forEach(k),p=D(e),z(u.$$.fragment,e),this.h()},h(){O(i,"type","number"),O(i,"size","4"),i.value=o=e[1].width,O(f,"type","number"),O(f,"size","4"),f.value=d=e[1].height},m(o,d){q(t,o,d),C(o,n,d),C(o,r,d),R(r,l),R(r,i),C(o,s,d),C(o,a,d),R(a,c),R(a,f),C(o,p,d),q(u,o,d),h=!0,g||($=[I(i,"change",e[5]),I(f,"change",e[6])],g=!0)},p(e,n){const r={};129&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!h||2&n&&o!==(o=e[1].width))&&(i.value=o),(!h||2&n&&d!==(d=e[1].height))&&(f.value=d);const l={};128&n&&(l.$$scope={dirty:n,ctx:e}),u.$set(l)},i(e){h||(A(t.$$.fragment,e),A(u.$$.fragment,e),h=!0)},o(e){T(t.$$.fragment,e),T(u.$$.fragment,e),h=!1},d(e){U(t,e),e&&k(n),e&&k(r),e&&k(s),e&&k(a),e&&k(p),U(u,e),g=!1,L($)}}}function cl(e){let t,n;return t=new st({props:{flex:!1,startMinimized:!0,toggle:!0,title:"Grid",$$slots:{default:[al]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};131&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function fl(e,t,n){let r,l;function i(e,t){Tn((n=>Object.assign(Object.assign({},n),{[e]:t})))}ee(e,Ln,(e=>n(0,r=e))),ee(e,An,(e=>n(1,l=e)));return[r,l,function(){Tn(Te.gridSize)},i,()=>jn(!r),e=>i("width",parseInt(e.currentTarget.value,10)),e=>i("height",parseInt(e.currentTarget.value,10))]}class dl extends ${constructor(e){super(),m(this,e,fl,cl,y,{})}}function pl(e,t,n){const r=e.slice();return r[12]=t[n],r}function ul(e,t,n){const r=e.slice();return r[15]=t[n],r[17]=n,r}function hl(e){let t;return{c(){t=le("path"),this.h()},l(e){t=x(e,"path",{d:!0,class:!0},1),w(t).forEach(k),this.h()},h(){O(t,"d",e[5]),O(t,"class","GuidePath svelte-hmuqxa")},m(e,n){C(e,t,n)},p(e,n){32&n&&O(t,"d",e[5])},d(e){e&&k(t)}}}function gl(e){let t,n,r,l,i;function o(...t){return e[9](e[15],...t)}return{c(){t=le("circle"),this.h()},l(e){t=x(e,"circle",{cx:!0,cy:!0,r:!0,class:!0},1),w(t).forEach(k),this.h()},h(){O(t,"cx",n=e[15].x),O(t,"cy",r=e[15].y),O(t,"r","10"),O(t,"class","PathPoint svelte-hmuqxa")},m(e,n){C(e,t,n),l||(i=I(t,"click",o),l=!0)},p(l,i){e=l,1&i&&n!==(n=e[15].x)&&O(t,"cx",n),1&i&&r!==(r=e[15].y)&&O(t,"cy",r)},d(e){e&&k(t),l=!1,i()}}}function $l(e){let t,n=(e[3]&&!e[2]&&e[17]!==e[0].length-1||!e[3]&&!e[2]||e[2]&&0===e[17])&&gl(e);return{c(){n&&n.c(),t=B()},l(e){n&&n.l(e),t=B()},m(e,r){n&&n.m(e,r),C(e,t,r)},p(e,r){e[3]&&!e[2]&&e[17]!==e[0].length-1||!e[3]&&!e[2]||e[2]&&0===e[17]?n?n.p(e,r):(n=gl(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&k(t)}}}function ml(e){let t,n,r,l,i,o,s,a=e[12].label+"";return{c(){t=le("rect"),l=le("text"),i=K(a),this.h()},l(e){t=x(e,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0},1),w(t).forEach(k),l=x(e,"text",{x:!0,y:!0,r:!0,class:!0},1);var n=w(l);i=G(n,a),n.forEach(k),this.h()},h(){O(t,"x",n=e[12].x-25),O(t,"y",r=e[12].y-18),O(t,"width","50"),O(t,"height","24"),O(t,"class","PathLabelBg svelte-hmuqxa"),O(l,"x",o=e[12].x),O(l,"y",s=e[12].y),O(l,"r","10"),O(l,"class","PathLabel svelte-hmuqxa")},m(e,n){C(e,t,n),C(e,l,n),R(l,i)},p(e,c){64&c&&n!==(n=e[12].x-25)&&O(t,"x",n),64&c&&r!==(r=e[12].y-18)&&O(t,"y",r),64&c&&a!==(a=e[12].label+"")&&W(i,a),64&c&&o!==(o=e[12].x)&&O(l,"x",o),64&c&&s!==(s=e[12].y)&&O(l,"y",s)},d(e){e&&k(t),e&&k(l)}}}function yl(e){let t,n,r,l,i,o=e[4]&&hl(e),s=e[0],a=[];for(let d=0;d<s.length;d+=1)a[d]=$l(ul(e,s,d));let c=e[6],f=[];for(let d=0;d<c.length;d+=1)f[d]=ml(pl(e,c,d));return{c(){t=le("g"),o&&o.c(),n=B();for(let e=0;e<a.length;e+=1)a[e].c();r=B();for(let e=0;e<f.length;e+=1)f[e].c();this.h()},l(e){t=x(e,"g",{class:!0},1);var l=w(t);o&&o.l(l),n=B();for(let t=0;t<a.length;t+=1)a[t].l(l);r=B();for(let t=0;t<f.length;t+=1)f[t].l(l);l.forEach(k),this.h()},h(){O(t,"class","Guide svelte-hmuqxa"),E(t,"shape",e[2]),E(t,"isSelected",e[1])},m(s,c){C(s,t,c),o&&o.m(t,null),R(t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);R(t,r);for(let e=0;e<f.length;e+=1)f[e].m(t,null);l||(i=I(t,"click",e[8]),l=!0)},p(e,[l]){if(e[4]?o?o.p(e,l):(o=hl(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),141&l){let n;for(s=e[0],n=0;n<s.length;n+=1){const i=ul(e,s,n);a[n]?a[n].p(i,l):(a[n]=$l(i),a[n].c(),a[n].m(t,r))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}if(64&l){let n;for(c=e[6],n=0;n<c.length;n+=1){const r=pl(e,c,n);f[n]?f[n].p(r,l):(f[n]=ml(r),f[n].c(),f[n].m(t,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=c.length}4&l&&E(t,"shape",e[2]),2&l&&E(t,"isSelected",e[1])},i:F,o:F,d(e){e&&k(t),o&&o.d(),te(a,e),te(f,e),l=!1,i()}}}function vl(e,t,n){let r,{points:l=[]}=t,{isSelected:i=!1}=t,{isShape:o=!1}=t,{isTemp:s=!1}=t;const a=oe();let c,f="";function d(e,t){e.stopImmediatePropagation(),a("pathPointClick",t)}return e.$$set=e=>{"points"in e&&n(0,l=e.points),"isSelected"in e&&n(1,i=e.isSelected),"isShape"in e&&n(2,o=e.isShape),"isTemp"in e&&n(3,s=e.isTemp)},e.$$.update=()=>{if(1&e.$$.dirty&&n(6,r=function(e){const t=e.length,n=[];for(let r=0;r<t;r++)if(0!==r){const t=e[r-1],l=e[r],i=Ee(t.x,t.y,l.x,l.y),o=Math.hypot(l.x-t.x,l.y-t.y);n.push(Object.assign(Object.assign({},i),{label:`${Math.round(o)}`}))}return n}(l)),17&e.$$.dirty){n(4,c=X());for(const e of l)c._?c.lineTo(e.x,e.y):c.moveTo(e.x,e.y);n(5,f=c.toString())}},[l,i,o,s,c,f,r,d,function(t){j(e,t)},(e,t)=>d(t,e)]}class bl extends ${constructor(e){super(),m(this,e,vl,yl,y,{points:0,isSelected:1,isShape:2,isTemp:3})}}function xl(e,t,n){const r=e.slice();return r[22]=t[n],r}function wl(e,t,n){const r=e.slice();return r[22]=t[n],r}function kl(e){let t,n,r=e[5],l=[];for(let o=0;o<r.length;o+=1)l[o]=Sl(xl(e,r,o));const i=e=>T(l[e],1,1,(()=>{l[e]=null}));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=B()},l(e){for(let t=0;t<l.length;t+=1)l[t].l(e);t=B()},m(e,r){for(let t=0;t<l.length;t+=1)l[t].m(e,r);C(e,t,r),n=!0},p(e,n){if(32&n){let o;for(r=e[5],o=0;o<r.length;o+=1){const i=xl(e,r,o);l[o]?(l[o].p(i,n),A(l[o],1)):(l[o]=Sl(i),l[o].c(),A(l[o],1),l[o].m(t.parentNode,t))}for(_(),o=r.length;o<l.length;o+=1)i(o);V()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)A(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)T(l[t]);n=!1},d(e){te(l,e),e&&k(t)}}}function Ol(e){let t,n,r;t=new bl({props:{isShape:"shapes"===e[0],points:Il(e[1]),isTemp:!0}}),t.$on("pathPointClick",e[16]);let l=e[5],i=[];for(let s=0;s<l.length;s+=1)i[s]=El(wl(e,l,s));const o=e=>T(i[e],1,1,(()=>{i[e]=null}));return{c(){N(t.$$.fragment);for(let e=0;e<i.length;e+=1)i[e].c();n=B()},l(e){z(t.$$.fragment,e);for(let t=0;t<i.length;t+=1)i[t].l(e);n=B()},m(e,l){q(t,e,l);for(let t=0;t<i.length;t+=1)i[t].m(e,l);C(e,n,l),r=!0},p(e,r){const s={};if(1&r&&(s.isShape="shapes"===e[0]),2&r&&(s.points=Il(e[1])),t.$set(s),3626&r){let t;for(l=e[5],t=0;t<l.length;t+=1){const o=wl(e,l,t);i[t]?(i[t].p(o,r),A(i[t],1)):(i[t]=El(o),i[t].c(),A(i[t],1),i[t].m(n.parentNode,n))}for(_(),t=l.length;t<i.length;t+=1)o(t);V()}},i(e){if(!r){A(t.$$.fragment,e);for(let e=0;e<l.length;e+=1)A(i[e]);r=!0}},o(e){T(t.$$.fragment,e),i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)T(i[t]);r=!1},d(e){U(t,e),te(i,e),e&&k(n)}}}function Sl(e){let t,n;return t=new bl({props:{isShape:e[22].isShape,points:Il(e[22].points)}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.isShape=e[22].isShape),32&n&&(r.points=Il(e[22].points)),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function El(e){let t,n;return t=new bl({props:{isShape:e[22].isShape,isSelected:e[3].includes(e[22].id),points:Il(e[22].points)}}),t.$on("pathPointClick",e[17]),t.$on("click",(function(...t){return e[18](e[22],...t)})),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(n,r){e=n;const l={};32&r&&(l.isShape=e[22].isShape),40&r&&(l.isSelected=e[3].includes(e[22].id)),32&r&&(l.points=Il(e[22].points)),t.$set(l)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Cl(e){let t,n,r,l,i,o;const s=[Ol,kl],a=[];function c(e,t){return e[4]?0:1}return n=c(e),r=a[n]=s[n](e),{c(){t=le("g"),r.c(),this.h()},l(e){t=x(e,"g",{class:!0},1);var n=w(t);r.l(n),n.forEach(k),this.h()},h(){O(t,"class","Guides")},m(r,s){C(r,t,s),a[n].m(t,null),e[19](t),l=!0,i||(o=[I(window,"keydown",e[12]),I(window,"dblclick",e[13]),I(window,"click",e[14]),I(window,"pointermove",e[15])],i=!0)},p(e,[l]){let i=n;n=c(e),n===i?a[n].p(e,l):(_(),T(a[i],1,1,(()=>{a[i]=null})),V(),r=a[n],r?r.p(e,l):(r=a[n]=s[n](e),r.c()),A(r,1),r.m(t,null))},i(e){l||(A(r),l=!0)},o(e){T(r),l=!1},d(r){r&&k(t),a[n].d(),e[19](null),i=!1,L(o)}}}function Il(e){return e.filter((e=>!!e))}function Pl(e,t,n){let r,l,i,o;ee(e,Yn,(e=>n(0,l=e))),ee(e,Wt,(e=>n(20,i=e))),ee(e,Jn,(e=>n(5,o=e)));let s,a=[],c=[];function f(e){if(!e.target.ownerSVGElement||!r)return;const t=Fn(e,s);if(0===a.length)n(1,a=[t,t]);else if("shapes"!==l){const{id:e}=Qn(i.activeLayerId,a.slice(0,-2).map((e=>({x:e.x,y:e.y}))));n(1,a=[]),n(3,c=[e])}}function d(e){if(e.target.ownerSVGElement&&r&&a.length>=1&&a.length>1){const t=Fn(e,s);n(1,a=[...a.slice(0,-1),t])}}function p(e){var t;if(console.log("addp"),r&&(null===(t=e.target)||void 0===t?void 0:t.ownerSVGElement)){const t=Fn(e,s);a.length>=2&&n(1,a=[...a,t])}}function u(e){n(1,a=[e,e])}function h(e){if(console.log("jap!"),a.pop(),"shapes"===l){const e=a.map((e=>({x:e.x,y:e.y}))),{id:t}=Qn(i.activeLayerId,[...e,e[0]],!0);n(1,a=[]),n(3,c=[t])}else{const t=a.map((e=>({x:e.x,y:e.y}))),{id:r}=Qn(i.activeLayerId,[...t,e],!1);n(1,a=[]),n(3,c=[r])}}function g(e,t){e.stopPropagation(),c.includes(t)?n(3,c=[]):n(3,c=[t])}return e.$$.update=()=>{1&e.$$.dirty&&n(4,r="guides"===l||"shapes"===l)},[l,a,s,c,r,o,f,d,p,u,h,g,function(e){if(r)switch(e.key){case"a":case"A":if(e.metaKey&&"INPUT"!==e.target.tagName){e.preventDefault();let t=o.filter((t=>e.shiftKey||t.layerId===i.activeLayerId)).map((e=>e.id));n(3,c=t)}break;case"Backspace":if(e.preventDefault(),e.stopImmediatePropagation(),c.length>1)Zn(c),n(3,c=[]);else if(1===c.length){const e=o.find((e=>e.id===c[0]));if(e){const t=e.points.slice(0,-1);1===t.length?(Zn(c),n(3,c=[])):(console.log("pointsUpdated",t),function(e){Xn.update((t=>[...t.filter((({id:t})=>t!==e.id)),e]))}(Object.assign(Object.assign({},e),{points:t})))}}else a.length&&(a.pop(),n(1,a=[...a]))}else;},e=>f(e),e=>p(e),e=>d(e),e=>h(e.detail),e=>a.length?h(e.detail):u(e.detail),(e,t)=>g(t,e.id),function(e){ce[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class Al extends ${constructor(e){super(),m(this,e,Pl,Cl,y,{})}}function Tl(e){let t,n,r,l,i;const o=e[9].default,s=v(o,e,e[8],null);return{c(){t=b("dialog"),s&&s.c(),this.h()},l(e){t=x(e,"DIALOG",{id:!0,style:!0,class:!0});var n=w(t);s&&s.l(n),n.forEach(k),this.h()},h(){O(t,"id",e[0]),O(t,"style",n=`height: ${e[1]};width: ${e[2]}`),O(t,"class","svelte-sxv6s5"),E(t,"fixed",!e[4])},m(n,o){C(n,t,o),s&&s.m(t,null),e[10](t),r=!0,l||(i=I(t,"close",e[11]),l=!0)},p(e,[l]){s&&s.p&&(!r||256&l)&&P(s,o,e,e[8],l,null,null),(!r||1&l)&&O(t,"id",e[0]),(!r||6&l&&n!==(n=`height: ${e[1]};width: ${e[2]}`))&&O(t,"style",n)},i(e){r||(A(s,e),r=!0)},o(e){T(s,e),r=!1},d(n){n&&k(t),s&&s.d(n),e[10](null),l=!1,i()}}}function Ll(e,t,n){let r,{$$slots:l={},$$scope:i}=t,{id:o}=t,{isOpen:s=!1}=t,{modal:a=!0}=t,{height:c="400px"}=t,{width:f="260px"}=t;const d=!!window.HTMLDialogElement,p=oe();ie((()=>{fe.registerDialog(r)})),de((()=>{s&&!r.hasAttribute("open")&&(a?r.showModal():r.show())}));const u=e=>{n(6,s=!1),p("close",{foo:"bar"})};return e.$$set=e=>{"id"in e&&n(0,o=e.id),"isOpen"in e&&n(6,s=e.isOpen),"modal"in e&&n(7,a=e.modal),"height"in e&&n(1,c=e.height),"width"in e&&n(2,f=e.width),"$$scope"in e&&n(8,i=e.$$scope)},[o,c,f,r,d,u,s,a,i,l,function(e){ce[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},e=>u()]}class jl extends ${constructor(e){super(),m(this,e,Ll,Tl,y,{id:0,isOpen:6,modal:7,height:1,width:2})}}const Ml=e=>({}),Dl=e=>({}),Rl=e=>({}),Nl=e=>({}),zl=e=>({}),ql=e=>({}),Ul=e=>({}),Vl=e=>({}),Bl=e=>({}),Kl=e=>({}),Gl=e=>({}),Wl=e=>({}),Fl=e=>({}),Hl=e=>({}),Yl=e=>({}),Xl=e=>({}),Jl=e=>({}),Ql=e=>({}),Zl=e=>({}),ei=e=>({});function ti(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function ni(e){let t,n,r=e[8].title+"";return{c(){t=K(r),n=M()},l(e){t=G(e,r),n=D(e)},m(e,r){C(e,t,r),C(e,n,r)},p(e,n){1&n&&r!==(r=e[8].title+"")&&W(t,r)},d(e){e&&k(t),e&&k(n)}}}function ri(e){let t,n;return t=new Fe({props:{isActive:e[1]===`tab-${e[10]+1}`,$$slots:{default:[ni]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[5](e[10])})),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(n,r){e=n;const l={};2&r&&(l.isActive=e[1]===`tab-${e[10]+1}`),65&r&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function li(e){let t;const n=e[4]["tab-1"],r=v(n,e,e[6],ei);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Zl,ei)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function ii(e){let t;const n=e[4]["tab-2"],r=v(n,e,e[6],Ql);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Jl,Ql)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function oi(e){let t;const n=e[4]["tab-3"],r=v(n,e,e[6],Xl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Yl,Xl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function si(e){let t;const n=e[4]["tab-4"],r=v(n,e,e[6],Hl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Fl,Hl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function ai(e){let t;const n=e[4]["tab-5"],r=v(n,e,e[6],Wl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Gl,Wl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function ci(e){let t;const n=e[4]["tab-6"],r=v(n,e,e[6],Kl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Bl,Kl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function fi(e){let t;const n=e[4]["tab-7"],r=v(n,e,e[6],Vl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Ul,Vl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function di(e){let t;const n=e[4]["tab-8"],r=v(n,e,e[6],ql);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,zl,ql)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function pi(e){let t;const n=e[4]["tab-9"],r=v(n,e,e[6],Nl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Rl,Nl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function ui(e){let t;const n=e[4]["tab-10"],r=v(n,e,e[6],Dl);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||64&l)&&P(r,n,e,e[6],l,Ml,Dl)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function hi(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g=e[0],$=[];for(let b=0;b<g.length;b+=1)$[b]=ri(ti(e,g,b));const m=e=>T($[e],1,1,(()=>{$[e]=null}));let y="tab-1"===e[1]&&li(e),v="tab-2"===e[1]&&ii(e),S="tab-3"===e[1]&&oi(e),E="tab-4"===e[1]&&si(e),I="tab-5"===e[1]&&ai(e),P="tab-6"===e[1]&&ci(e),L="tab-7"===e[1]&&fi(e),j="tab-8"===e[1]&&di(e),N="tab-9"===e[1]&&pi(e),z="tab-10"===e[1]&&ui(e);return{c(){t=b("div"),n=b("div");for(let e=0;e<$.length;e+=1)$[e].c();r=M(),l=b("div"),y&&y.c(),i=M(),v&&v.c(),o=M(),S&&S.c(),s=M(),E&&E.c(),a=M(),I&&I.c(),c=M(),P&&P.c(),f=M(),L&&L.c(),d=M(),j&&j.c(),p=M(),N&&N.c(),u=M(),z&&z.c(),this.h()},l(e){t=x(e,"DIV",{class:!0});var h=w(t);n=x(h,"DIV",{class:!0});var g=w(n);for(let t=0;t<$.length;t+=1)$[t].l(g);g.forEach(k),r=D(h),l=x(h,"DIV",{class:!0});var m=w(l);y&&y.l(m),i=D(m),v&&v.l(m),o=D(m),S&&S.l(m),s=D(m),E&&E.l(m),a=D(m),I&&I.l(m),c=D(m),P&&P.l(m),f=D(m),L&&L.l(m),d=D(m),j&&j.l(m),p=D(m),N&&N.l(m),u=D(m),z&&z.l(m),m.forEach(k),h.forEach(k),this.h()},h(){O(n,"class","TabHead"),O(l,"class","MenuTabsContent svelte-kcpf4b"),O(t,"class","MenuTabs")},m(e,g){C(e,t,g),R(t,n);for(let t=0;t<$.length;t+=1)$[t].m(n,null);R(t,r),R(t,l),y&&y.m(l,null),R(l,i),v&&v.m(l,null),R(l,o),S&&S.m(l,null),R(l,s),E&&E.m(l,null),R(l,a),I&&I.m(l,null),R(l,c),P&&P.m(l,null),R(l,f),L&&L.m(l,null),R(l,d),j&&j.m(l,null),R(l,p),N&&N.m(l,null),R(l,u),z&&z.m(l,null),h=!0},p(e,[t]){if(7&t){let r;for(g=e[0],r=0;r<g.length;r+=1){const l=ti(e,g,r);$[r]?($[r].p(l,t),A($[r],1)):($[r]=ri(l),$[r].c(),A($[r],1),$[r].m(n,null))}for(_(),r=g.length;r<$.length;r+=1)m(r);V()}"tab-1"===e[1]?y?(y.p(e,t),2&t&&A(y,1)):(y=li(e),y.c(),A(y,1),y.m(l,i)):y&&(_(),T(y,1,1,(()=>{y=null})),V()),"tab-2"===e[1]?v?(v.p(e,t),2&t&&A(v,1)):(v=ii(e),v.c(),A(v,1),v.m(l,o)):v&&(_(),T(v,1,1,(()=>{v=null})),V()),"tab-3"===e[1]?S?(S.p(e,t),2&t&&A(S,1)):(S=oi(e),S.c(),A(S,1),S.m(l,s)):S&&(_(),T(S,1,1,(()=>{S=null})),V()),"tab-4"===e[1]?E?(E.p(e,t),2&t&&A(E,1)):(E=si(e),E.c(),A(E,1),E.m(l,a)):E&&(_(),T(E,1,1,(()=>{E=null})),V()),"tab-5"===e[1]?I?(I.p(e,t),2&t&&A(I,1)):(I=ai(e),I.c(),A(I,1),I.m(l,c)):I&&(_(),T(I,1,1,(()=>{I=null})),V()),"tab-6"===e[1]?P?(P.p(e,t),2&t&&A(P,1)):(P=ci(e),P.c(),A(P,1),P.m(l,f)):P&&(_(),T(P,1,1,(()=>{P=null})),V()),"tab-7"===e[1]?L?(L.p(e,t),2&t&&A(L,1)):(L=fi(e),L.c(),A(L,1),L.m(l,d)):L&&(_(),T(L,1,1,(()=>{L=null})),V()),"tab-8"===e[1]?j?(j.p(e,t),2&t&&A(j,1)):(j=di(e),j.c(),A(j,1),j.m(l,p)):j&&(_(),T(j,1,1,(()=>{j=null})),V()),"tab-9"===e[1]?N?(N.p(e,t),2&t&&A(N,1)):(N=pi(e),N.c(),A(N,1),N.m(l,u)):N&&(_(),T(N,1,1,(()=>{N=null})),V()),"tab-10"===e[1]?z?(z.p(e,t),2&t&&A(z,1)):(z=ui(e),z.c(),A(z,1),z.m(l,null)):z&&(_(),T(z,1,1,(()=>{z=null})),V())},i(e){if(!h){for(let e=0;e<g.length;e+=1)A($[e]);A(y),A(v),A(S),A(E),A(I),A(P),A(L),A(j),A(N),A(z),h=!0}},o(e){$=$.filter(Boolean);for(let t=0;t<$.length;t+=1)T($[t]);T(y),T(v),T(S),T(E),T(I),T(P),T(L),T(j),T(N),T(z),h=!1},d(e){e&&k(t),te($,e),y&&y.d(),v&&v.d(),S&&S.d(),E&&E.d(),I&&I.d(),P&&P.d(),L&&L.d(),j&&j.d(),N&&N.d(),z&&z.d()}}}function gi(e,t,n){let r,{$$slots:l={},$$scope:i}=t;const o=oe();let{tabs:s=[]}=t,{tabSelected:a="tab-1"}=t;function c(e){n(1,r=e),o("select",{id:e})}return e.$$set=e=>{"tabs"in e&&n(0,s=e.tabs),"tabSelected"in e&&n(3,a=e.tabSelected),"$$scope"in e&&n(6,i=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(1,r=a)},[s,r,c,a,l,e=>c(`tab-${e+1}`),i]}class $i extends ${constructor(e){super(),m(this,e,gi,hi,y,{tabs:0,tabSelected:3})}}const{window:mi}=ue;function yi(e,t,n){const r=e.slice();return r[51]=t[n][0],r[52]=t[n][1],r}function vi(e,t,n){const r=e.slice();return r[55]=t[n],r[57]=n,r}function bi(e){let t,n;return{c(){t=b("span"),this.h()},l(e){t=x(e,"SPAN",{class:!0,style:!0}),w(t).forEach(k),this.h()},h(){O(t,"class","LayerColor svelte-14lz3pf"),O(t,"style",n=`background-color: ${e[58].color}`)},m(e,n){C(e,t,n)},p(e,r){134217728&r[1]&&n!==(n=`background-color: ${e[58].color}`)&&O(t,"style",n)},d(e){e&&k(t)}}}function xi(e){let t,n,r,l;return t=new Fe({props:{$$slots:{default:[wi]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[27](e[58])})),r=new Fe({props:{disabled:e[58].locked||!!e[5].length,$$slots:{default:[ki]},$$scope:{ctx:e}}}),r.$on("click",(function(){return e[28](e[58])})),{c(){N(t.$$.fragment),n=M(),N(r.$$.fragment)},l(e){z(t.$$.fragment,e),n=D(e),z(r.$$.fragment,e)},m(e,i){q(t,e,i),C(e,n,i),q(r,e,i),l=!0},p(n,l){e=n;const i={};402653184&l[1]&&(i.$$scope={dirty:l,ctx:e}),t.$set(i);const o={};32&l[0]|134217728&l[1]&&(o.disabled=e[58].locked||!!e[5].length),268435456&l[1]&&(o.$$scope={dirty:l,ctx:e}),r.$set(o)},i(e){l||(A(t.$$.fragment,e),A(r.$$.fragment,e),l=!0)},o(e){T(t.$$.fragment,e),T(r.$$.fragment,e),l=!1},d(e){U(t,e),e&&k(n),U(r,e)}}}function wi(e){let t,n;return t=new pt({props:{size:12,name:e[58].locked?"lock":"lock-open"}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};134217728&n[1]&&(r.name=e[58].locked?"lock":"lock-open"),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ki(e){let t;return{c(){t=K("×")},l(e){t=G(e,"×")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Oi(e){let t,n,r,l,i,o,s,a,c,f,d,p,u=e[58].name+"";function h(...t){return e[25](e[58],...t)}function g(...t){return e[26](e[58],...t)}n=new $t({props:{name:e[58].isVisible?"eye":"eye-slash"}}),n.$on("click",(function(...t){return e[23](e[58],...t)})),l=new Fe({props:{variant:"plain",$$slots:{default:[bi]},$$scope:{ctx:e}}}),l.$on("click",(function(...t){return e[24](e[58],...t)}));let $=1!==e[9]&&xi(e);function m(...t){return e[29](e[58],...t)}return{c(){t=b("article"),N(n.$$.fragment),r=M(),N(l.$$.fragment),i=M(),o=b("span"),s=K(u),a=M(),$&&$.c(),this.h()},l(e){t=x(e,"ARTICLE",{class:!0,style:!0});var c=w(t);z(n.$$.fragment,c),r=D(c),z(l.$$.fragment,c),i=D(c),o=x(c,"SPAN",{role:!0,class:!0});var f=w(o);s=G(f,u),f.forEach(k),a=D(c),$&&$.l(c),c.forEach(k),this.h()},h(){O(o,"role","button"),O(o,"class","LayerName svelte-14lz3pf"),O(t,"class","Layer svelte-14lz3pf"),O(t,"style",c=`border-left: 5px solid ${e[58].color}`),E(t,"isActiveLayer",e[0].activeLayerId===e[58].id),E(t,"isMergeLayerId",e[5].includes(e[58].id))},m(e,c){C(e,t,c),q(n,t,null),R(t,r),q(l,t,null),R(t,i),R(t,o),R(o,s),R(t,a),$&&$.m(t,null),f=!0,d||(p=[I(o,"click",h),I(o,"dblclick",g),I(t,"click",m)],d=!0)},p(r,i){e=r;const o={};134217728&i[1]&&(o.name=e[58].isVisible?"eye":"eye-slash"),n.$set(o);const a={};402653184&i[1]&&(a.$$scope={dirty:i,ctx:e}),l.$set(a),(!f||134217728&i[1])&&u!==(u=e[58].name+"")&&W(s,u),1!==e[9]?$?($.p(e,i),512&i[0]&&A($,1)):($=xi(e),$.c(),A($,1),$.m(t,null)):$&&(_(),T($,1,1,(()=>{$=null})),V()),(!f||134217728&i[1]&&c!==(c=`border-left: 5px solid ${e[58].color}`))&&O(t,"style",c),1&i[0]|134217728&i[1]&&E(t,"isActiveLayer",e[0].activeLayerId===e[58].id),32&i[0]|134217728&i[1]&&E(t,"isMergeLayerId",e[5].includes(e[58].id))},i(e){f||(A(n.$$.fragment,e),A(l.$$.fragment,e),A($),f=!0)},o(e){T(n.$$.fragment,e),T(l.$$.fragment,e),T($),f=!1},d(e){e&&k(t),U(n),U(l),$&&$.d(),d=!1,L(p)}}}function Si(e){let t,n;return t=new jl({props:{id:"AddToLayerDialog",isOpen:!0,$$slots:{default:[Ai]},$$scope:{ctx:e}}}),t.$on("close",e[34]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};1473&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ei(e,t){let n,r,l,i=t[55].name+"";return{key:e,first:null,c(){n=b("option"),r=K(i),this.h()},l(e){n=x(e,"OPTION",{value:!0});var t=w(n);r=G(t,i),t.forEach(k),this.h()},h(){n.__value=l=t[55].id,n.value=n.__value,this.first=n},m(e,t){C(e,n,t),R(n,r)},p(e,o){t=e,1&o[0]&&i!==(i=t[55].name+"")&&W(r,i),1&o[0]&&l!==(l=t[55].id)&&(n.__value=l,n.value=n.__value)},d(e){e&&k(n)}}}function Ci(e){let t,n,r,l;return{c(){t=b("div"),n=b("input")},l(e){t=x(e,"DIV",{});var r=w(t);n=x(r,"INPUT",{}),r.forEach(k)},m(i,o){C(i,t,o),R(t,n),me(n,e[8]),r||(l=I(n,"input",e[31]),r=!0)},p(e,t){256&t[0]&&n.value!==e[8]&&me(n,e[8])},d(e){e&&k(t),r=!1,l()}}}function Ii(e){let t;return{c(){t=K("Ok")},l(e){t=G(e,"Ok")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Pi(e){let t;return{c(){t=K("Cancel")},l(e){t=G(e,"Cancel")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Ai(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h=[],g=new Map,$=e[0].layers;const m=e=>e[55].id+e[57];for(let v=0;v<$.length;v+=1){let t=vi(e,$,v),n=m(t);g.set(n,h[v]=Ei(n,t))}let y="new-layer"===e[7]&&Ci(e);return a=new Fe({props:{$$slots:{default:[Ii]},$$scope:{ctx:e}}}),a.$on("click",e[32]),f=new Fe({props:{variant:"plain",$$slots:{default:[Pi]},$$scope:{ctx:e}}}),f.$on("click",e[33]),{c(){t=b("div"),n=b("select"),r=b("option"),l=K("[new layer]");for(let e=0;e<h.length;e+=1)h[e].c();i=M(),y&&y.c(),o=M(),s=b("footer"),N(a.$$.fragment),c=M(),N(f.$$.fragment),this.h()},l(e){t=x(e,"DIV",{class:!0});var d=w(t);n=x(d,"SELECT",{});var p=w(n);r=x(p,"OPTION",{value:!0});var u=w(r);l=G(u,"[new layer]"),u.forEach(k);for(let t=0;t<h.length;t+=1)h[t].l(p);p.forEach(k),i=D(d),y&&y.l(d),o=D(d),s=x(d,"FOOTER",{class:!0});var g=w(s);z(a.$$.fragment,g),c=D(g),z(f.$$.fragment,g),g.forEach(k),d.forEach(k),this.h()},h(){r.__value="new-layer",r.value=r.__value,void 0===e[7]&&ye((()=>e[30].call(n))),O(s,"class","DialogFooter svelte-14lz3pf"),O(t,"class","DialogContent")},m(g,$){C(g,t,$),R(t,n),R(n,r),R(r,l);for(let e=0;e<h.length;e+=1)h[e].m(n,null);ve(n,e[7]),R(t,i),y&&y.m(t,null),R(t,o),R(t,s),q(a,s,null),R(s,c),q(f,s,null),d=!0,p||(u=I(n,"change",e[30]),p=!0)},p(e,r){1&r[0]&&($=e[0].layers,h=ne(h,r,m,1,e,$,g,n,re,Ei,null,vi)),129&r[0]&&ve(n,e[7]),"new-layer"===e[7]?y?y.p(e,r):(y=Ci(e),y.c(),y.m(t,o)):y&&(y.d(1),y=null);const l={};268435456&r[1]&&(l.$$scope={dirty:r,ctx:e}),a.$set(l);const i={};268435456&r[1]&&(i.$$scope={dirty:r,ctx:e}),f.$set(i)},i(e){d||(A(a.$$.fragment,e),A(f.$$.fragment,e),d=!0)},o(e){T(a.$$.fragment,e),T(f.$$.fragment,e),d=!1},d(e){e&&k(t);for(let t=0;t<h.length;t+=1)h[t].d();y&&y.d(),U(a),U(f),p=!1,u()}}}function Ti(e){let t,n;return t=new jl({props:{id:"DeleteDialogLayer",isOpen:!0,$$slots:{default:[Mi]},$$scope:{ctx:e}}}),t.$on("close",e[37]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};2&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Li(e){let t;return{c(){t=K("Ok")},l(e){t=G(e,"Ok")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function ji(e){let t;return{c(){t=K("Cancel")},l(e){t=G(e,"Cancel")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Mi(e){let t,n,r,l,i,o,s,a,c;return o=new Fe({props:{$$slots:{default:[Li]},$$scope:{ctx:e}}}),o.$on("click",e[35]),a=new Fe({props:{variant:"plain",$$slots:{default:[ji]},$$scope:{ctx:e}}}),a.$on("click",e[36]),{c(){t=b("div"),n=b("p"),r=K("Delete layer and all gleis in it?"),l=M(),i=b("footer"),N(o.$$.fragment),s=M(),N(a.$$.fragment),this.h()},l(e){t=x(e,"DIV",{class:!0});var c=w(t);n=x(c,"P",{});var f=w(n);r=G(f,"Delete layer and all gleis in it?"),f.forEach(k),l=D(c),i=x(c,"FOOTER",{class:!0});var d=w(i);z(o.$$.fragment,d),s=D(d),z(a.$$.fragment,d),d.forEach(k),c.forEach(k),this.h()},h(){O(i,"class","DialogFooter svelte-14lz3pf"),O(t,"class","DialogContent")},m(e,f){C(e,t,f),R(t,n),R(n,r),R(t,l),R(t,i),q(o,i,null),R(i,s),q(a,i,null),c=!0},p(e,t){const n={};268435456&t[1]&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};268435456&t[1]&&(r.$$scope={dirty:t,ctx:e}),a.$set(r)},i(e){c||(A(o.$$.fragment,e),A(a.$$.fragment,e),c=!0)},o(e){T(o.$$.fragment,e),T(a.$$.fragment,e),c=!1},d(e){e&&k(t),U(o),U(a)}}}function Di(e){let t,n;return t=new jl({props:{id:"EditDialogLayer",isOpen:!0,$$slots:{default:[zi]},$$scope:{ctx:e}}}),t.$on("close",e[41]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};20&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ri(e){let t;return{c(){t=K("Ok")},l(e){t=G(e,"Ok")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Ni(e){let t;return{c(){t=K("Cancel")},l(e){t=G(e,"Cancel")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function zi(e){let t,n,r,l,i,o,s,a,c,f;return i=new Fe({props:{$$slots:{default:[Ri]},$$scope:{ctx:e}}}),i.$on("click",e[39]),s=new Fe({props:{variant:"plain",$$slots:{default:[Ni]},$$scope:{ctx:e}}}),s.$on("click",e[40]),{c(){t=b("div"),n=b("input"),r=M(),l=b("footer"),N(i.$$.fragment),o=M(),N(s.$$.fragment),this.h()},l(e){t=x(e,"DIV",{class:!0});var a=w(t);n=x(a,"INPUT",{}),r=D(a),l=x(a,"FOOTER",{class:!0});var c=w(l);z(i.$$.fragment,c),o=D(c),z(s.$$.fragment,c),c.forEach(k),a.forEach(k),this.h()},h(){O(l,"class","DialogFooter svelte-14lz3pf"),O(t,"class","DialogContent")},m(d,p){C(d,t,p),R(t,n),me(n,e[4]),R(t,r),R(t,l),q(i,l,null),R(l,o),q(s,l,null),a=!0,c||(f=I(n,"input",e[38]),c=!0)},p(e,t){16&t[0]&&n.value!==e[4]&&me(n,e[4]);const r={};268435456&t[1]&&(r.$$scope={dirty:t,ctx:e}),i.$set(r);const l={};268435456&t[1]&&(l.$$scope={dirty:t,ctx:e}),s.$set(l)},i(e){a||(A(i.$$.fragment,e),A(s.$$.fragment,e),a=!0)},o(e){T(i.$$.fragment,e),T(s.$$.fragment,e),a=!1},d(e){e&&k(t),U(i),U(s),c=!1,f()}}}function qi(e){let t,n;return t=new jl({props:{id:"ColorPickerDialog",height:"460px",width:"260px",isOpen:!0,$$slots:{default:[Yi]},$$scope:{ctx:e}}}),t.$on("close",e[47]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};4104&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ui(e){let t,n;return t=new be({props:{startColor:e[12][e[3]].color||"#000000"}}),t.$on("colorChange",e[44]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};4104&n[0]&&(r.startColor=e[12][e[3]].color||"#000000"),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function _i(e){let t,n,r;return n=new st({props:{flex:!1,title:"Select Color",$$slots:{default:[Ui]},$$scope:{ctx:e}}}),{c(){t=b("div"),N(n.$$.fragment),this.h()},l(e){t=x(e,"DIV",{slot:!0});var r=w(t);z(n.$$.fragment,r),r.forEach(k),this.h()},h(){O(t,"slot","tab-1")},m(e,l){C(e,t,l),q(n,t,null),r=!0},p(e,t){const r={};4104&t[0]|268435456&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(A(n.$$.fragment,e),r=!0)},o(e){T(n.$$.fragment,e),r=!1},d(e){e&&k(t),U(n)}}}function Vi(e){let t,n;return{c(){t=le("svg"),n=le("line"),this.h()},l(e){t=x(e,"svg",{viewBox:!0},1);var r=w(t);n=x(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0},1),w(n).forEach(k),r.forEach(k),this.h()},h(){O(n,"x1",0),O(n,"y1",0),O(n,"x2",50),O(n,"y2",50),O(n,"stroke","#000"),O(t,"viewBox","0 0 25 25")},m(e,r){C(e,t,r),R(t,n)},d(e){e&&k(t)}}}function Bi(e){let t,n,r,l=e[52](`example-pattern-${e[51]}`,"#000000")+"";return{c(){t=le("svg"),n=le("g"),r=le("rect"),this.h()},l(e){t=x(e,"svg",{viewBox:!0},1);var l=w(t);n=x(l,"g",{},1),w(n).forEach(k),r=x(l,"rect",{x:!0,y:!0,width:!0,height:!0,style:!0},1),w(r).forEach(k),l.forEach(k),this.h()},h(){O(r,"x","0"),O(r,"y","0"),O(r,"width","25"),O(r,"height","25"),O(r,"style",`stroke: #000000; fill: url(#example-pattern-${e[51]});`),O(t,"viewBox","0 0 25 25")},m(e,i){C(e,t,i),R(t,n),n.innerHTML=l,R(t,r)},p:F,d(e){e&&k(t)}}}function Ki(e,t){let n,r,l,i;return r=new Fe({props:{variant:"plain",$$slots:{default:[Bi]},$$scope:{ctx:t}}}),r.$on("click",(function(){return t[43](t[51])})),{key:e,first:null,c(){n=b("li"),N(r.$$.fragment),l=M(),this.h()},l(e){n=x(e,"LI",{class:!0});var t=w(n);z(r.$$.fragment,t),l=D(t),t.forEach(k),this.h()},h(){O(n,"class","PatternExample svelte-14lz3pf"),E(n,"isSelected",t[12][t[3]].patternId===t[51]),this.first=n},m(e,t){C(e,n,t),q(r,n,null),R(n,l),i=!0},p(e,l){t=e;const i={};268435456&l[1]&&(i.$$scope={dirty:l,ctx:t}),r.$set(i),4104&l[0]&&E(n,"isSelected",t[12][t[3]].patternId===t[51])},i(e){i||(A(r.$$.fragment,e),i=!0)},o(e){T(r.$$.fragment,e),i=!1},d(e){e&&k(n),U(r)}}}function Gi(e){let t,n,r,l,i,o=[],s=new Map;r=new Fe({props:{variant:"plain",$$slots:{default:[Vi]},$$scope:{ctx:e}}}),r.$on("click",e[42]);let a=Object.entries(Kt);const c=e=>e[51];for(let f=0;f<a.length;f+=1){let t=yi(e,a,f),n=c(t);s.set(n,o[f]=Ki(n,t))}return{c(){t=b("ul"),n=b("li"),N(r.$$.fragment),l=M();for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=x(e,"UL",{class:!0});var i=w(t);n=x(i,"LI",{class:!0});var s=w(n);z(r.$$.fragment,s),s.forEach(k),l=D(i);for(let t=0;t<o.length;t+=1)o[t].l(i);i.forEach(k),this.h()},h(){O(n,"class","PatternExample svelte-14lz3pf"),E(n,"isSelected",!e[12][e[3]].patternId),O(t,"class","PatternExamples svelte-14lz3pf")},m(e,s){C(e,t,s),R(t,n),q(r,n,null),R(t,l);for(let n=0;n<o.length;n+=1)o[n].m(t,null);i=!0},p(e,l){const i={};268435456&l[1]&&(i.$$scope={dirty:l,ctx:e}),r.$set(i),4104&l[0]&&E(n,"isSelected",!e[12][e[3]].patternId),2101256&l[0]&&(a=Object.entries(Kt),_(),o=ne(o,l,c,1,e,a,s,t,se,Ki,null,yi),V())},i(e){if(!i){A(r.$$.fragment,e);for(let e=0;e<a.length;e+=1)A(o[e]);i=!0}},o(e){T(r.$$.fragment,e);for(let t=0;t<o.length;t+=1)T(o[t]);i=!1},d(e){e&&k(t),U(r);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Wi(e){let t,n,r;return n=new st({props:{flex:!1,title:"Select pattern",$$slots:{default:[Gi]},$$scope:{ctx:e}}}),{c(){t=b("div"),N(n.$$.fragment),this.h()},l(e){t=x(e,"DIV",{slot:!0});var r=w(t);z(n.$$.fragment,r),r.forEach(k),this.h()},h(){O(t,"slot","tab-2")},m(e,l){C(e,t,l),q(n,t,null),r=!0},p(e,t){const r={};4104&t[0]|268435456&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(A(n.$$.fragment,e),r=!0)},o(e){T(n.$$.fragment,e),r=!1},d(e){e&&k(t),U(n)}}}function Fi(e){let t;return{c(){t=K("Ok")},l(e){t=G(e,"Ok")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Hi(e){let t;return{c(){t=K("Cancel")},l(e){t=G(e,"Cancel")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Yi(e){let t,n,r,l,i,o,s,a;return n=new $i({props:{tabs:[{title:"Color"},{title:"Pattern"}],$$slots:{"tab-2":[Wi],"tab-1":[_i]},$$scope:{ctx:e}}}),i=new Fe({props:{$$slots:{default:[Fi]},$$scope:{ctx:e}}}),i.$on("click",e[45]),s=new Fe({props:{variant:"plain",$$slots:{default:[Hi]},$$scope:{ctx:e}}}),s.$on("click",e[46]),{c(){t=b("div"),N(n.$$.fragment),r=M(),l=b("footer"),N(i.$$.fragment),o=M(),N(s.$$.fragment),this.h()},l(e){t=x(e,"DIV",{class:!0});var a=w(t);z(n.$$.fragment,a),r=D(a),l=x(a,"FOOTER",{class:!0});var c=w(l);z(i.$$.fragment,c),o=D(c),z(s.$$.fragment,c),c.forEach(k),a.forEach(k),this.h()},h(){O(l,"class","DialogFooter svelte-14lz3pf"),O(t,"class","DialogContent")},m(e,c){C(e,t,c),q(n,t,null),R(t,r),R(t,l),q(i,l,null),R(l,o),q(s,l,null),a=!0},p(e,t){const r={};4104&t[0]|268435456&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const l={};268435456&t[1]&&(l.$$scope={dirty:t,ctx:e}),i.$set(l);const o={};268435456&t[1]&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){a||(A(n.$$.fragment,e),A(i.$$.fragment,e),A(s.$$.fragment,e),a=!0)},o(e){T(n.$$.fragment,e),T(i.$$.fragment,e),T(s.$$.fragment,e),a=!1},d(e){e&&k(t),U(n),U(i),U(s)}}}function Xi(e){let t,n,r,l,i,o,s;t=new he({props:{key:"id",list:e[11],$$slots:{default:[Oi,({item:e})=>({58:e}),({item:e})=>[0,e?134217728:0]]},$$scope:{ctx:e}}}),t.$on("sort",e[19]);let a=e[6]&&Si(e),c=e[1]&&Ti(e),f=e[2]&&Di(e),d=e[3]&&qi(e);return{c(){N(t.$$.fragment),n=M(),a&&a.c(),r=M(),c&&c.c(),l=M(),f&&f.c(),i=M(),d&&d.c(),o=B()},l(e){z(t.$$.fragment,e),n=D(e),a&&a.l(e),r=D(e),c&&c.l(e),l=D(e),f&&f.l(e),i=D(e),d&&d.l(e),o=B()},m(e,p){q(t,e,p),C(e,n,p),a&&a.m(e,p),C(e,r,p),c&&c.m(e,p),C(e,l,p),f&&f.m(e,p),C(e,i,p),d&&d.m(e,p),C(e,o,p),s=!0},p(e,n){const s={};2048&n[0]&&(s.list=e[11]),575&n[0]|402653184&n[1]&&(s.$$scope={dirty:n,ctx:e}),t.$set(s),e[6]?a?(a.p(e,n),64&n[0]&&A(a,1)):(a=Si(e),a.c(),A(a,1),a.m(r.parentNode,r)):a&&(_(),T(a,1,1,(()=>{a=null})),V()),e[1]?c?(c.p(e,n),2&n[0]&&A(c,1)):(c=Ti(e),c.c(),A(c,1),c.m(l.parentNode,l)):c&&(_(),T(c,1,1,(()=>{c=null})),V()),e[2]?f?(f.p(e,n),4&n[0]&&A(f,1)):(f=Di(e),f.c(),A(f,1),f.m(i.parentNode,i)):f&&(_(),T(f,1,1,(()=>{f=null})),V()),e[3]?d?(d.p(e,n),8&n[0]&&A(d,1)):(d=qi(e),d.c(),A(d,1),d.m(o.parentNode,o)):d&&(_(),T(d,1,1,(()=>{d=null})),V())},i(e){s||(A(t.$$.fragment,e),A(a),A(c),A(f),A(d),s=!0)},o(e){T(t.$$.fragment,e),T(a),T(c),T(f),T(d),s=!1},d(e){U(t,e),e&&k(n),a&&a.d(e),e&&k(r),c&&c.d(e),e&&k(l),f&&f.d(e),e&&k(i),d&&d.d(e),e&&k(o)}}}function Ji(e){let t,n;return t=new Fe({props:{$$slots:{default:[Qi]},$$scope:{ctx:e}}}),t.$on("click",e[22]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Qi(e){let t;return{c(){t=K("+")},l(e){t=G(e,"+")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Zi(e){let t,n;return t=new Fe({props:{$$slots:{default:[eo]},$$scope:{ctx:e}}}),t.$on("click",e[18]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function eo(e){let t;return{c(){t=K("merge selected")},l(e){t=G(e,"merge selected")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function to(e){let t,n,r,l=!e[5].length&&Ji(e),i=e[5].length&&Zi(e);return{c(){t=b("div"),l&&l.c(),n=M(),i&&i.c(),this.h()},l(e){t=x(e,"DIV",{slot:!0});var r=w(t);l&&l.l(r),n=D(r),i&&i.l(r),r.forEach(k),this.h()},h(){O(t,"slot","header-right")},m(e,o){C(e,t,o),l&&l.m(t,null),R(t,n),i&&i.m(t,null),r=!0},p(e,r){e[5].length?l&&(_(),T(l,1,1,(()=>{l=null})),V()):l?(l.p(e,r),32&r[0]&&A(l,1)):(l=Ji(e),l.c(),A(l,1),l.m(t,n)),e[5].length?i?(i.p(e,r),32&r[0]&&A(i,1)):(i=Zi(e),i.c(),A(i,1),i.m(t,null)):i&&(_(),T(i,1,1,(()=>{i=null})),V())},i(e){r||(A(l),A(i),r=!0)},o(e){T(l),T(i),r=!1},d(e){e&&k(t),l&&l.d(),i&&i.d()}}}function no(e){let t,n,r,l;return t=new st({props:{flex:!1,toggle:!0,title:"Layers",$$slots:{"header-right":[to],default:[Xi]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(i,o){q(t,i,o),n=!0,r||(l=I(mi,"keydown",e[14]),r=!0)},p(e,n){const r={};8191&n[0]|268435456&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e),r=!1,l()}}}function ro(e,t,n){let r,l,i,o,s,a,c,f;ee(e,Wt,(e=>n(0,i=e))),ee(e,Yn,(e=>n(48,o=e))),ee(e,en,(e=>n(10,s=e))),ee(e,an,(e=>n(49,a=e))),ee(e,ln,(e=>n(50,c=e))),ee(e,Ft,(e=>n(12,f=e)));let d="",p="",u="",h="",g=[],$=!1,m="new-layer",y=`Layer ${i.layers.length+1}`;function v(e){var t;let n=null==e?void 0:e.id;if(!n){const t=i.layers.length+1,r=(null==e?void 0:e.name)||window.prompt("Layer name","Layer "+t);if(!r)return;n=wt();const l={name:r,id:n,isVisible:!0,locked:!1,color:kt()};Wt.update((e=>{const t=e.layers.findIndex((t=>t.id===e.activeLayerId)),n=[...e.layers];return n.splice(t,0,l),Object.assign(Object.assign({},e),{layers:n})}))}(null===(t=null==e?void 0:e.gleisIds)||void 0===t?void 0:t.length)&&un(e.gleisIds.map((e=>({id:e,layerId:n})))),ge(Wt,i.activeLayerId=n,i)}function b(e){Yt({[e.id]:{isVisible:!e.isVisible}})}function x(e){const t=!e.locked,n={[e.id]:{locked:t}};if(t){const t=a.filter((t=>t.layerId!==e.id)).map((e=>e.id));tn(t)}Yt(n)}function w(e,t){if(e.shiftKey){if(e.preventDefault(),t.locked)return;g.includes(t.id)?n(5,g=g.filter((e=>e!==t.id))):n(5,g=[...g,t.id])}else ge(Wt,i.activeLayerId=t.id,i)}const k=pe((e=>{if(!u)return;const t=e.r,n=e.g,r=e.b;Yt({[u]:{color:Ot(t,n,r)}})}),100);function O(e){u&&Yt({[u]:{patternId:e}})}return e.$$.update=()=>{1&e.$$.dirty[0]&&n(9,r=i.layers.length),1&e.$$.dirty[0]&&n(11,l=i.layers)},[i,d,p,u,h,g,$,m,y,r,s,l,f,v,function(e){switch(!0){case"gleis"===o&&!!s.length&&"g"===e.key&&e.metaKey:e.preventDefault(),n(6,$=!0)}},b,x,w,function(){if(g.length){const e=[],t=g.shift();for(const n of Object.values(c))g.includes(n.layerId)&&e.push({id:n.id,layerId:t});un(e);for(const n of g)Xt(n);n(5,g=[])}},function(e){Wt.update((t=>Object.assign(Object.assign({},t),{layers:e.detail.map((e=>e))})))},k,O,()=>{v()},(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation(),b(e)},(e,t)=>{e.locked||(t.stopPropagation(),n(3,u=e.id))},(e,t)=>{e.locked||w(t,e)},(e,t)=>{e.locked||(n(2,p=e.id),n(4,h=e.name))},e=>x(e),e=>n(1,d=e.id),(e,t)=>{e.locked||w(t,e)},function(){m=$e(this),n(7,m)},function(){y=this.value,n(8,y)},()=>{v("new-layer"===m?{gleisIds:s,name:y}:{gleisIds:s,id:m}),n(6,$=!1)},()=>n(6,$=!1),()=>n(6,$=!1),()=>{Xt(d),n(1,d="")},()=>n(1,d=""),()=>{n(1,d="")},function(){h=this.value,n(4,h)},()=>{Yt({[p]:{name:h}}),n(4,h=""),n(2,p="")},()=>n(2,p=""),()=>{n(2,p="")},()=>O(""),e=>O(e),e=>{k(e.detail)},()=>{n(3,u="")},()=>n(3,u=""),()=>{n(3,u="")}]}class lo extends ${constructor(e){super(),m(this,e,ro,no,y,{},[-1,-1])}}function io(e,t,n){const r=e.slice();return r[10]=t[n],r}function oo(e,t,n){const r=e.slice();return r[10]=t[n],r}function so(e,t){let n,r,l,i;return{key:e,first:null,c(){n=le("line"),this.h()},l(e){n=x(e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0},1),w(n).forEach(k),this.h()},h(){O(n,"x1",r=-t[4]+t[10]*t[0]),O(n,"y1",l=-t[5]),O(n,"x2",i=-t[4]+t[10]*t[0]),O(n,"y2",t[5]),O(n,"class","svelte-x144m3"),this.first=n},m(e,t){C(e,n,t)},p(e,o){t=e,21&o&&r!==(r=-t[4]+t[10]*t[0])&&O(n,"x1",r),32&o&&l!==(l=-t[5])&&O(n,"y1",l),21&o&&i!==(i=-t[4]+t[10]*t[0])&&O(n,"x2",i),32&o&&O(n,"y2",t[5])},d(e){e&&k(n)}}}function ao(e,t){let n,r,l,i;return{key:e,first:null,c(){n=le("line"),this.h()},l(e){n=x(e,"line",{x1:!0,y1:!0,x2:!0,y2:!0,class:!0},1),w(n).forEach(k),this.h()},h(){O(n,"x1",r=-t[4]),O(n,"y1",l=-t[5]+t[10]*t[1]),O(n,"x2",t[4]),O(n,"y2",i=-t[5]+t[10]*t[1]),O(n,"class","svelte-x144m3"),this.first=n},m(e,t){C(e,n,t)},p(e,o){t=e,16&o&&r!==(r=-t[4])&&O(n,"x1",r),42&o&&l!==(l=-t[5]+t[10]*t[1])&&O(n,"y1",l),16&o&&O(n,"x2",t[4]),42&o&&i!==(i=-t[5]+t[10]*t[1])&&O(n,"y2",i)},d(e){e&&k(n)}}}function co(e){let t,n,r=[],l=new Map,i=[],o=new Map,s=e[2];const a=e=>e[10]+e[0]+e[1]+"x";for(let d=0;d<s.length;d+=1){let t=oo(e,s,d),n=a(t);l.set(n,r[d]=so(n,t))}let c=e[3];const f=e=>e[10]+e[0]+e[1]+"y";for(let d=0;d<c.length;d+=1){let t=io(e,c,d),n=f(t);o.set(n,i[d]=ao(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=M();for(let e=0;e<i.length;e+=1)i[e].c();n=B()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=D(e);for(let t=0;t<i.length;t+=1)i[t].l(e);n=B()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);C(e,t,l);for(let t=0;t<i.length;t+=1)i[t].m(e,l);C(e,n,l)},p(e,[d]){55&d&&(s=e[2],r=ne(r,d,a,1,e,s,l,t.parentNode,re,so,t,oo)),59&d&&(c=e[3],i=ne(i,d,f,1,e,c,o,n.parentNode,re,ao,n,io))},i:F,o:F,d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&k(t);for(let t=0;t<i.length;t+=1)i[t].d(e);e&&k(n)}}}function fo(e,t,n){let r,l,i,o,s,a,c,f,d,p;return ee(e,An,(e=>n(6,d=e))),ee(e,In,(e=>n(8,p=e))),e.$$.update=()=>{64&e.$$.dirty&&n(0,r=d.width),64&e.$$.dirty&&n(1,l=d.height),257&e.$$.dirty&&n(7,i=Math.floor(p.width/r)),258&e.$$.dirty&&n(9,o=Math.floor(p.height/l)),128&e.$$.dirty&&n(2,s=xt(0,i)),512&e.$$.dirty&&n(3,a=xt(0,o)),256&e.$$.dirty&&n(4,c=p.width/2),256&e.$$.dirty&&n(5,f=p.height/2)},[r,l,s,a,c,f,d,i,p,o]}class po extends ${constructor(e){super(),m(this,e,fo,co,y,{})}}function uo(e,t,n){const r=e.slice();return r[43]=t[n],r}function ho(e){let t,n=e[43]+"";return{c(){t=le("g")},l(e){t=x(e,"g",{},1),w(t).forEach(k)},m(e,r){C(e,t,r),t.innerHTML=n},p(e,r){32&r[0]&&n!==(n=e[43]+"")&&(t.innerHTML=n)},d(e){e&&k(t)}}}function go(e){let t,n;return t=new po({}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function $o(e){let t,n,r,l,i;return{c(){t=le("rect"),this.h()},l(e){t=x(e,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0},1),w(t).forEach(k),this.h()},h(){O(t,"x",n=e[0].x),O(t,"y",r=e[0].y),O(t,"width",l=e[0].width),O(t,"height",i=e[0].height),O(t,"class","DragSelectArea svelte-11yiqn8")},m(e,n){C(e,t,n)},p(e,o){1&o[0]&&n!==(n=e[0].x)&&O(t,"x",n),1&o[0]&&r!==(r=e[0].y)&&O(t,"y",r),1&o[0]&&l!==(l=e[0].width)&&O(t,"width",l),1&o[0]&&i!==(i=e[0].height)&&O(t,"height",i)},d(e){e&&k(t)}}}function mo(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$=e[5],m=[];for(let v=0;v<$.length;v+=1)m[v]=ho(uo(e,$,v));let y=e[8]&&go();const S=e[17].default,E=v(S,e,e[16],null);let j=null!==e[0]&&$o(e);return{c(){t=b("div"),n=le("svg"),r=le("defs");for(let e=0;e<m.length;e+=1)m[e].c();l=le("g"),i=le("g"),o=le("rect"),y&&y.c(),d=le("circle"),E&&E.c(),j&&j.c(),this.h()},l(e){t=x(e,"DIV",{id:!0,class:!0});var s=w(t);n=x(s,"svg",{id:!0,viewBox:!0,class:!0},1);var a=w(n);r=x(a,"defs",{},1);var c=w(r);for(let t=0;t<m.length;t+=1)m[t].l(c);l=x(c,"g",{},1),w(l).forEach(k),c.forEach(k),i=x(a,"g",{id:!0,class:!0,transform:!0},1);var f=w(i);o=x(f,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0},1),w(o).forEach(k),y&&y.l(f),d=x(f,"circle",{r:!0,fill:!0,cx:!0,cy:!0},1),w(d).forEach(k),E&&E.l(f),j&&j.l(f),f.forEach(k),a.forEach(k),s.forEach(k),this.h()},h(){O(o,"class","AvailableSpace svelte-11yiqn8"),O(o,"x",s=-e[4].width/2),O(o,"y",a=-e[4].height/2),O(o,"width",c=e[4].width),O(o,"height",f=e[4].height),O(d,"r",10),O(d,"fill","blue"),O(d,"cx",0),O(d,"cy",0),O(i,"id","gleis-base-group"),O(i,"class","ScaleSpace svelte-11yiqn8"),O(i,"transform",e[6]),O(n,"id","gleis-svg"),O(n,"viewBox",p=`${e[1].x} ${e[1].y} ${e[4].width/2} ${e[4].height/2}`),O(n,"class","svelte-11yiqn8"),O(t,"id","gleis-plane"),O(t,"class","Plane svelte-11yiqn8")},m(s,a){C(s,t,a),R(t,n),R(n,r);for(let e=0;e<m.length;e+=1)m[e].m(r,null);R(r,l),l.innerHTML=Bt,R(n,i),R(i,o),e[18](o),y&&y.m(i,null),R(i,d),E&&E.m(i,null),j&&j.m(i,null),e[20](i),e[22](n),u=!0,h||(g=[I(window,"keydown",e[14]),I(o,"pointerup",e[19]),I(i,"dblclick",e[21]),I(n,"pointerdown",e[10]),I(n,"pointermove",e[11]),I(n,"pointerup",e[12])],h=!0)},p(e,t){if(32&t[0]){let n;for($=e[5],n=0;n<$.length;n+=1){const i=uo(e,$,n);m[n]?m[n].p(i,t):(m[n]=ho(i),m[n].c(),m[n].m(r,l))}for(;n<m.length;n+=1)m[n].d(1);m.length=$.length}(!u||16&t[0]&&s!==(s=-e[4].width/2))&&O(o,"x",s),(!u||16&t[0]&&a!==(a=-e[4].height/2))&&O(o,"y",a),(!u||16&t[0]&&c!==(c=e[4].width))&&O(o,"width",c),(!u||16&t[0]&&f!==(f=e[4].height))&&O(o,"height",f),e[8]?y?256&t[0]&&A(y,1):(y=go(),y.c(),A(y,1),y.m(i,d)):y&&(_(),T(y,1,1,(()=>{y=null})),V()),E&&E.p&&(!u||65536&t[0])&&P(E,S,e,e[16],t,null,null),null!==e[0]?j?j.p(e,t):(j=$o(e),j.c(),j.m(i,null)):j&&(j.d(1),j=null),(!u||64&t[0])&&O(i,"transform",e[6]),(!u||18&t[0]&&p!==(p=`${e[1].x} ${e[1].y} ${e[4].width/2} ${e[4].height/2}`))&&O(n,"viewBox",p)},i(e){u||(A(y),A(E,e),u=!0)},o(e){T(y),T(E,e),u=!1},d(n){n&&k(t),te(m,n),e[18](null),y&&y.d(),E&&E.d(n),j&&j.d(),e[20](null),e[22](null),h=!1,L(g)}}}function yo(e,t,n){let r,l,i,o,s,a,c,f,d,p,u,h,$,m;ee(e,Rn,(e=>n(1,r=e))),ee(e,dr,(e=>n(2,l=e))),ee(e,ln,(e=>n(28,i=e))),ee(e,Wt,(e=>n(29,o=e))),ee(e,Yn,(e=>n(30,s=e))),ee(e,pr,(e=>n(3,a=e))),ee(e,Zt,(e=>n(31,c=e))),ee(e,Rt,(e=>n(32,f=e))),ee(e,Ft,(e=>n(33,d=e))),ee(e,In,(e=>n(4,p=e))),ee(e,Jt,(e=>n(5,u=e))),ee(e,ur,(e=>n(7,$=e))),ee(e,Ln,(e=>n(8,m=e)));let{$$slots:y={},$$scope:v}=t;const b=r;let x,w,k=!1,O={y:0,x:0};pr.subscribe((e=>x=e));const S=g(Nn,(e=>{if(!l)return`scale(${e})`;const t=function(e){const t={};for(var n=0;n<e.numberOfItems;n++){var r=e.getItem(n),l=r.matrix;switch(!0){case 2===r.type:t.translate={value:{x:l.e,y:l.f},get s(){return`translate(${this.value.x},${this.value.y})`}};break;case 3===r.type:t.scale={value:l.a,get s(){return`scale(${this.value})`}};break;case 4===r.type:t.rotate={value:r.angle,s:`rotate(${r.angle})`};break;case 5===r.type:case 6===r.type:break;case 1===r.type:}}return t}(l.transform.baseVal);t.scale.value=e;return Object.values(t).map((e=>e.s)).join(" ")}));ee(e,S,(e=>n(6,h=e)));const E=pe(((e,t)=>{Dn((n=>null===n?b:{x:e,y:t}))}),100);let C=null,I=null;const P=e=>{if(k){const r=Fn(e,x);O={x:w.x-r.x,y:w.y-r.y},t=w.x-r.x,n=w.y-r.y,x.viewBox.baseVal.x+=t,x.viewBox.baseVal.y+=n,E(x.viewBox.baseVal.x,x.viewBox.baseVal.y)}var t,n},A=e=>{if("gleis"!==s)return;const{x:t,y:n}=Lt(a,l,l,{x:e.clientX,y:e.clientY});"Flex"===c.type?f||(Rt.set(bn(t,n)),e.stopPropagation()):pn({pointOrigin:bn(t,n)})};function T(e){0!==O.x||0!==O.y||C||tn([])}return e.$$set=e=>{"$$scope"in e&&n(16,v=e.$$scope)},[I,r,l,a,p,u,h,$,m,S,e=>{e.metaKey?function(e){if(e.metaKey){e.stopPropagation();const{x:t,y:r}=Fn(e,l);C={x:t,y:r},n(0,I={x:t,y:r,width:10,height:10})}}(e):(e=>{e.currentTarget===x&&(k=!0,O={y:0,x:0},w=Fn(e,x))})(e)},e=>{e.metaKey?function(e){if(e.metaKey&&C){e.stopPropagation();const{x:t,y:r}=Fn(e,l);t>C.x&&r>C.y?(n(0,I.width=t-C.x,I),n(0,I.height=r-C.y,I)):t>C.x&&r<C.y?(n(0,I.width=t-C.x,I),n(0,I.height=C.y-r,I),n(0,I.y=r,I)):t<C.x&&r<C.y?(n(0,I.x=t,I),n(0,I.y=r,I),n(0,I.width=C.x-t,I),n(0,I.height=C.y-r,I)):t<C.x&&r>C.y&&(n(0,I.x=t,I),n(0,I.width=C.x-t,I),n(0,I.height=r-C.y,I))}}(e):P(e)},e=>{e.metaKey?function(e){e.stopPropagation();const t=Object.values(i).filter((e=>e.layerId===o.activeLayerId)).filter((e=>e.points.filter((e=>"cc"!==e.type)).some((e=>{return n=I,(t=e).x>=n.x&&t.x<=n.x+n.width&&t.y>=n.y&&t.y<=n.y+n.height;var t,n})))).map((e=>e.id));tn((n=>e.shiftKey?Array.from(new Set([...n,...t])):t)),C=null,n(0,I=null)}(e):(e=>{k&&(e.stopPropagation(),k=!1)})(e)},A,function(e){if("gleis"===s)switch(!0){case"Backspace"===e.key&&"INPUT"!==e.target.tagName:e.preventDefault(),hn();break;case"a"===e.key.toLowerCase()&&e.metaKey&&"INPUT"!==e.target.tagName:e.preventDefault();let t=e.shiftKey?Object.values(i).filter((e=>{const t=d[e.layerId];if(t)return!t.locked&&t.isVisible;console.log("layer does not exist",e.layerId)})).map((e=>e.id)):Object.values(i).filter((e=>e.layerId===o.activeLayerId)).map((e=>e.id));tn(t)}},T,v,y,function(e){ce[e?"unshift":"push"]((()=>{$=e,ur.set($)}))},e=>T(),function(e){ce[e?"unshift":"push"]((()=>{l=e,dr.set(l)}))},e=>A(e),function(e){ce[e?"unshift":"push"]((()=>{a=e,pr.set(a)}))}]}class vo extends ${constructor(e){super(),m(this,e,yo,mo,y,{},[-1,-1])}}function bo(e,t,n){const r=e.slice();return r[13]=t[n][0],r[14]=t[n][1].dateUpdated,r[15]=t[n][1].name,r}function xo(e,t){let n,r,l,i,o=t[15]+"";return{key:e,first:null,c(){n=b("option"),r=K(o),l=M(),this.h()},l(e){n=x(e,"OPTION",{value:!0});var t=w(n);r=G(t,o),l=D(t),t.forEach(k),this.h()},h(){n.__value=i=t[13],n.value=n.__value,this.first=n},m(e,t){C(e,n,t),R(n,r),R(n,l)},p(e,l){t=e,1&l&&o!==(o=t[15]+"")&&W(r,o),1&l&&i!==(i=t[13])&&(n.__value=i,n.value=n.__value)},d(e){e&&k(n)}}}function wo(e){let t,n;return t=new Fe({props:{$$slots:{default:[ko]},$$scope:{ctx:e}}}),t.$on("click",e[6]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ko(e){let t;return{c(){t=K("save")},l(e){t=G(e,"save")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Oo(e){let t;return{c(){t=K("save as...")},l(e){t=G(e,"save as...")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function So(e){let t,n;return t=new Fe({props:{$$slots:{default:[Eo]},$$scope:{ctx:e}}}),t.$on("click",e[8]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Eo(e){let t;return{c(){t=K("delete")},l(e){t=G(e,"delete")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Co(e){let t,n;return t=new Fe({props:{$$slots:{default:[Io]},$$scope:{ctx:e}}}),t.$on("click",e[9]),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Io(e){let t;return{c(){t=K("download")},l(e){t=G(e,"download")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Po(e){let t,n,r,l,i;return{c(){t=K("Import\n    "),n=b("span"),r=b("input"),this.h()},l(e){t=G(e,"Import\n    "),n=x(e,"SPAN",{class:!0});var l=w(n);r=x(l,"INPUT",{accept:!0,type:!0}),l.forEach(k),this.h()},h(){O(r,"accept","application/json,.json"),O(r,"type","file"),O(n,"class","InputHide svelte-bfi60r")},m(o,s){C(o,t,s),C(o,n,s),R(n,r),l||(i=I(r,"change",e[10]),l=!0)},p:F,d(e){e&&k(t),e&&k(n),l=!1,i()}}}function Ao(e){let t,n,r,l,i;return{c(){t=K("Merge\n    "),n=b("span"),r=b("input"),this.h()},l(e){t=G(e,"Merge\n    "),n=x(e,"SPAN",{class:!0});var l=w(n);r=x(l,"INPUT",{accept:!0,type:!0}),l.forEach(k),this.h()},h(){O(r,"accept","application/json,.json"),O(r,"type","file"),O(n,"class","InputHide svelte-bfi60r")},m(o,s){C(o,t,s),C(o,n,s),R(n,r),l||(i=I(r,"change",e[11]),l=!0)},p:F,d(e){e&&k(t),e&&k(n),l=!1,i()}}}function To(e){let t;return{c(){t=K("New")},l(e){t=G(e,"New")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function Lo(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$,m,y,v=[],O=new Map,S=Object.entries(e[0]);const E=e=>e[13];for(let b=0;b<S.length;b+=1){let t=bo(e,S,b),n=E(t);O.set(n,v[b]=xo(n,t))}let P=e[1]&&wo(e);s=new Fe({props:{$$slots:{default:[Oo]},$$scope:{ctx:e}}}),s.$on("click",e[7]);let L=e[1]&&So(e),j=e[1]&&Co(e);return d=new Fe({props:{className:"ImportButton",$$slots:{default:[Po]},$$scope:{ctx:e}}}),u=new Fe({props:{className:"ImportButton",$$slots:{default:[Ao]},$$scope:{ctx:e}}}),g=new Fe({props:{className:"NewButton",$$slots:{default:[To]},$$scope:{ctx:e}}}),g.$on("click",e[12]),{c(){t=b("select"),n=b("option"),r=K("------");for(let e=0;e<v.length;e+=1)v[e].c();i=M(),P&&P.c(),o=M(),N(s.$$.fragment),a=M(),L&&L.c(),c=M(),j&&j.c(),f=M(),N(d.$$.fragment),p=M(),N(u.$$.fragment),h=M(),N(g.$$.fragment),this.h()},l(e){t=x(e,"SELECT",{value:!0,disabled:!0});var l=w(t);n=x(l,"OPTION",{value:!0});var $=w(n);r=G($,"------"),$.forEach(k);for(let t=0;t<v.length;t+=1)v[t].l(l);l.forEach(k),i=D(e),P&&P.l(e),o=D(e),z(s.$$.fragment,e),a=D(e),L&&L.l(e),c=D(e),j&&j.l(e),f=D(e),z(d.$$.fragment,e),p=D(e),z(u.$$.fragment,e),h=D(e),z(g.$$.fragment,e),this.h()},h(){n.__value="",n.value=n.__value,t.disabled=l=!Object.keys(e[0]).length},m(l,b){C(l,t,b),R(t,n),R(n,r);for(let e=0;e<v.length;e+=1)v[e].m(t,null);ve(t,e[1]),C(l,i,b),P&&P.m(l,b),C(l,o,b),q(s,l,b),C(l,a,b),L&&L.m(l,b),C(l,c,b),j&&j.m(l,b),C(l,f,b),q(d,l,b),C(l,p,b),q(u,l,b),C(l,h,b),q(g,l,b),$=!0,m||(y=I(t,"input",e[5]),m=!0)},p(e,n){1&n&&(S=Object.entries(e[0]),v=ne(v,n,E,1,e,S,O,t,re,xo,null,bo)),(!$||3&n)&&ve(t,e[1]),(!$||1&n&&l!==(l=!Object.keys(e[0]).length))&&(t.disabled=l),e[1]?P?(P.p(e,n),2&n&&A(P,1)):(P=wo(e),P.c(),A(P,1),P.m(o.parentNode,o)):P&&(_(),T(P,1,1,(()=>{P=null})),V());const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),s.$set(r),e[1]?L?(L.p(e,n),2&n&&A(L,1)):(L=So(e),L.c(),A(L,1),L.m(c.parentNode,c)):L&&(_(),T(L,1,1,(()=>{L=null})),V()),e[1]?j?(j.p(e,n),2&n&&A(j,1)):(j=Co(e),j.c(),A(j,1),j.m(f.parentNode,f)):j&&(_(),T(j,1,1,(()=>{j=null})),V());const i={};262144&n&&(i.$$scope={dirty:n,ctx:e}),d.$set(i);const a={};262144&n&&(a.$$scope={dirty:n,ctx:e}),u.$set(a);const p={};262144&n&&(p.$$scope={dirty:n,ctx:e}),g.$set(p)},i(e){$||(A(P),A(s.$$.fragment,e),A(L),A(j),A(d.$$.fragment,e),A(u.$$.fragment,e),A(g.$$.fragment,e),$=!0)},o(e){T(P),T(s.$$.fragment,e),T(L),T(j),T(d.$$.fragment,e),T(u.$$.fragment,e),T(g.$$.fragment,e),$=!1},d(e){e&&k(t);for(let t=0;t<v.length;t+=1)v[t].d();e&&k(i),P&&P.d(e),e&&k(o),U(s,e),e&&k(a),L&&L.d(e),e&&k(c),j&&j.d(e),e&&k(f),U(d,e),e&&k(p),U(u,e),e&&k(h),U(g,e),m=!1,y()}}}function jo(e){let t,n;return t=new st({props:{flex:!1,startMinimized:!0,toggle:!0,title:"Save configuration",$$slots:{default:[Lo]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};262151&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Mo(e,t,n){let r,l,i;function o(e,t=!1){const n=e.target.files[0];if(n){const e=new FileReader;e.onload=function(e){try{const n=JSON.parse(e.target.result);n.gleisPlanned&&n.dateUpdated&&function(e,t=!1){const n={};if(t){for(const r of e.layerControl.layers){const e=wt();n[r.id]=e,r.id=e}const t={};for(const r of Object.values(e.gleisPlanned)){const e=n[r.layerId];e&&(r.id=wt(),r.layerId=e,t[r.id]=r)}Xn.update((t=>[...t,...e.guides.filter((e=>!!n[e.layerId])).map((e=>p(d({},e),{layerId:n[e.layerId]})))])),Wt.update((t=>p(d({},t),{layers:[...t.layers,...e.layerControl.layers]}))),rn.update((e=>d(d({},e),t)))}else Wt.set(e.layerControl),rn.set(e.gleisPlanned),Me.set(e.appConfig),Xn.set(e.guides),Kn(e.id,e.name)}(n,t)}catch(n){alert("Could not import configuration")}},e.onerror=function(e){console.error("An error ocurred reading the file",e)},e.readAsText(n,"UTF-8")}}function s(){confirm("Are you sure?")&&(Wt.set(Gt),rn.set({}),Me.set(Te),Xn.set([]),Vn(""))}ee(e,Un,(e=>n(0,l=e))),ee(e,_n,(e=>n(1,i=e)));return e.$$.update=()=>{3&e.$$.dirty&&n(2,r=l[i])},[l,i,r,o,s,e=>function(e){const t=J(Un)[e];t&&(Xn.set(t.guides),Wt.set(t.layerControl),Me.set(t.appConfig),rn.set(t.gleisPlanned),ze(t.activeTrackLibId),Vn(e))}(e.target.value),()=>{Kn(i)},()=>{const e=window.prompt("Gleisplan name",`Gleisplan ${Object.keys(l).length+1}`);e&&Kn(null,e)},()=>{var e;window.confirm("Really?")&&(e=i,Un.update((t=>{const n=d({},t);return delete n[e],n})),Vn((t=>e===t?"":t)))},()=>{Gn(r.name)},e=>o(e),e=>{confirm("Are you sure you want to merge the config? ")&&o(e,!0)},()=>s()]}class Do extends ${constructor(e){super(),m(this,e,Mo,jo,y,{})}}function Ro(e){let t;return{c(){t=K("reset")},l(e){t=G(e,"reset")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function No(e){let t;return{c(){t=K("-")},l(e){t=G(e,"-")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function zo(e){let t;return{c(){t=K("+")},l(e){t=G(e,"+")},m(e,n){C(e,t,n)},d(e){e&&k(t)}}}function qo(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h=St(e[0],2).toFixed(2)+"";return t=new Fe({props:{$$slots:{default:[Ro]},$$scope:{ctx:e}}}),t.$on("click",e[1]),o=new Fe({props:{$$slots:{default:[No]},$$scope:{ctx:e}}}),o.$on("click",e[2]),f=new Fe({props:{$$slots:{default:[zo]},$$scope:{ctx:e}}}),f.$on("click",e[4]),{c(){N(t.$$.fragment),n=M(),r=b("span"),l=K(h),i=M(),N(o.$$.fragment),s=M(),a=b("input"),c=M(),N(f.$$.fragment),this.h()},l(e){z(t.$$.fragment,e),n=D(e),r=x(e,"SPAN",{});var d=w(r);l=G(d,h),d.forEach(k),i=D(e),z(o.$$.fragment,e),s=D(e),a=x(e,"INPUT",{type:!0,min:!0,max:!0,step:!0,value:!0}),c=D(e),z(f.$$.fragment,e),this.h()},h(){O(a,"type","range"),O(a,"min",.1),O(a,"max",5),O(a,"step",.01),a.value=e[0]},m(h,g){q(t,h,g),C(h,n,g),C(h,r,g),R(r,l),C(h,i,g),q(o,h,g),C(h,s,g),C(h,a,g),C(h,c,g),q(f,h,g),d=!0,p||(u=I(a,"input",e[3]),p=!0)},p(e,n){const r={};32&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!d||1&n)&&h!==(h=St(e[0],2).toFixed(2)+"")&&W(l,h);const i={};32&n&&(i.$$scope={dirty:n,ctx:e}),o.$set(i),(!d||1&n)&&(a.value=e[0]);const s={};32&n&&(s.$$scope={dirty:n,ctx:e}),f.$set(s)},i(e){d||(A(t.$$.fragment,e),A(o.$$.fragment,e),A(f.$$.fragment,e),d=!0)},o(e){T(t.$$.fragment,e),T(o.$$.fragment,e),T(f.$$.fragment,e),d=!1},d(e){U(t,e),e&&k(n),e&&k(r),e&&k(i),U(o,e),e&&k(s),e&&k(a),e&&k(c),U(f,e),p=!1,u()}}}function Uo(e){let t,n;return t=new st({props:{title:"Scale",$$slots:{default:[qo]},$$scope:{ctx:e}}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function _o(e,t,n){let r;ee(e,Nn,(e=>n(0,r=e)));return[r,function(){Dn(null),qn(1)},()=>qn(Math.max(0,r-.01)),e=>{qn(parseFloat(e.currentTarget.value))},()=>qn(r+.01)]}class Vo extends ${constructor(e){super(),m(this,e,_o,Uo,y,{})}}function Bo(e){let t,n,r;return{c(){t=le("circle"),this.h()},l(e){t=x(e,"circle",{cx:!0,cy:!0,class:!0,r:!0},1),w(t).forEach(k),this.h()},h(){O(t,"cx",n=e[1].x),O(t,"cy",r=e[1].y),O(t,"class","RotateCenter svelte-1ritlke"),O(t,"r","175")},m(e,n){C(e,t,n)},p(e,l){2&l&&n!==(n=e[1].x)&&O(t,"cx",n),2&l&&r!==(r=e[1].y)&&O(t,"cy",r)},d(e){e&&k(t)}}}function Ko(e){let t,n,r,l,i,o=e[4]&&Bo(e);const s=e[7].default,a=v(s,e,e[6],null);return{c(){t=le("g"),o&&o.c(),n=B(),a&&a.c(),this.h()},l(e){t=x(e,"g",{transform:!0},1);var r=w(t);o&&o.l(r),n=B(),a&&a.l(r),r.forEach(k),this.h()},h(){O(t,"transform",e[3])},m(s,c){C(s,t,c),o&&o.m(t,null),R(t,n),a&&a.m(t,null),e[8](t),r=!0,l||(i=I(window,"keydown",e[5]),l=!0)},p(e,[l]){e[4]?o?o.p(e,l):(o=Bo(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),a&&a.p&&(!r||64&l)&&P(a,s,e,e[6],l,null,null),(!r||8&l)&&O(t,"transform",e[3])},i(e){r||(A(a,e),r=!0)},o(e){T(a,e),r=!1},d(n){n&&k(t),o&&o.d(),a&&a.d(n),e[8](null),l=!1,i()}}}function Go(e,t,n){let r,l,i,o=F,s=()=>(o(),o=xe(d,(e=>n(10,i=e))),d);e.$$.on_destroy.push((()=>o()));let{$$slots:a={},$$scope:c}=t;var f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(l,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}a((r=r.apply(e,t||[])).next())}))};let{gleisSelected:d}=t;s();const p=oe();let u,h={x:0,y:0,angle:0},g=0;function $(){n(1,h.angle=0,h),g=0}function m(){p("done",{angle:we(h.angle),host:u}),$(),n(4,l=!1)}d.subscribe((()=>f(void 0,void 0,void 0,(function*(){yield ae(),$(),function(){const{height:e,width:t,minX:r,minY:l}=Oe(i.flatMap((({points:e})=>e.filter((e=>"cc"!==e.type)))));n(1,h.x=r+t/2,h),n(1,h.y=l+e/2,h)}()}))));const y=pe(m,400);return e.$$set=e=>{"gleisSelected"in e&&s(n(0,d=e.gleisSelected)),"$$scope"in e&&n(6,c=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(3,r=`rotate(${h.angle} ${h.x} ${h.y})`)},n(4,l=!1),[d,h,u,r,l,function(e){if(!e.metaKey)switch(e.key){case"R":case"r":if("INPUT"!==e.target.tagName&&"SELECT"!==e.target.tagName){n(4,l=!0),e.preventDefault();let t=.5;const r=Date.now()-g;0!==g&&r<200?t=10:0!==g&&r>200&&r<400&&(t=5),e.shiftKey?n(1,h.angle-=t,h):n(1,h.angle+=t,h),g=Date.now(),y()}break;case"Escape":$(),p("done");break;case"Enter":m(),p("done")}},c,a,function(e){ce[e?"unshift":"push"]((()=>{u=e,n(2,u)}))}]}class Wo extends ${constructor(e){super(),m(this,e,Go,Ko,y,{gleisSelected:0})}}function Fo(e){let t,n;return{c:F,l:F,m(r,l){t||(n=I(window,"keydown",e[1]),t=!0)},p:F,i:F,o:F,d(e){t=!1,n()}}}function Ho(e,t,n){let r,l,i=F,o=()=>(i(),i=xe(a,(e=>n(4,r=e))),a);ee(e,Ue,(e=>n(5,l=e))),e.$$.on_destroy.push((()=>i()));var s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]])}return n};let{gleisSelected:a}=t;return o(),en.subscribe((()=>{})),e.$$set=e=>{"gleisSelected"in e&&o(n(0,a=e.gleisSelected))},[a,function(e){switch(e.key){case"f":case"F":if(r.length>=1){if(e.preventDefault(),e.shiftKey)return void function(e){const t=[];for(const n of e){const e=[];for(const t of n.points)"c1"===t.type||"c2"===t.type?e.push(Object.assign(Object.assign({},t),{type:"c1"===t.type?"c2":"c1"})):e.push(t);t.push({id:n.id,points:e}),_l("updates",t)}un(t)}(r);if(1===r.length){const[e]=r,t=l[e.artnr],[n]=t.segments;let i,o,a;if("Curve"===e.type&&"Curve"===n.type){if([i,o]=e.points,i.root){o.direction!==vt?i=bn(i.x,i.y):i.connectAngle=Ie(i.connectAngle+-1*yt)}else{if([a]=function(e,t){const n=gn(e,t),r=null==n?void 0:n.points.find((t=>"c1"===e.type?"c2"===t.type:"c1"===t.type));return r?[r,n]:[void 0,void 0]}(i,e.id),!a)return void alert("Completely detached points can't be flipped, try rotate/move");{const e=s(i,["root"]);i=Object.assign({},e),i.connectAngle=Ie(i.connectAngle+-1*yt)}}const t=jt({pointOrigin:i,proto:n,connectingPointOrigin:a});un([{id:e.id,points:t}])}else if("Turnout"===e.type){const n=e=>{switch(e){case"s1":case void 0:return"s2";case"s2":return"c1";default:return"s1"}},r=e.points.find((e=>e.type.startsWith("po-")));if(r){const l=n(e.variant),i=Ut({pointOrigin:r,protos:t.segments,connectingPointOrigin:r,variant:l});un([{id:e.id,points:i,variant:l}])}}else if("TurnoutCurved"===e.type){const n=e=>{switch(e){case"c1":case void 0:return"c2";case"c2":return"c3";default:return"c1"}},r=e.points.find((e=>e.type.startsWith("po-")));if(r){const l=n(e.variant),i=_t({pointOrigin:r,protos:t.segments,connectingPointOrigin:r,variant:l});un([{id:e.id,points:i,variant:l}])}}else if("Crossing"===e.type||"Engels"===e.type){const n=t.title.startsWith("DKW"),r=t.title.includes("KW"),l=e=>{switch(e){case"s1":case void 0:return"s2";case"s2":return"s3";case"s3":return"s4";default:return"s1"}},[s,a]=t.segments;let c=e.variant&&"s1"!==e.variant?"s1":"s2";r&&!n&&(c=l(e.variant)),_l("variant",c),[i,o]=e.points;const f=e.points.find((e=>"po-s1"===e.type)),d=Dt({pointOrigin:f,protos:[s,a],variant:c,connectingPointOrigin:f,doubleSlip:n});un([{id:e.id,points:d,variant:c}])}else"Flex"!==e.type&&e.type}}}}]}class Yo extends ${constructor(e){super(),m(this,e,Ho,Fo,y,{gleisSelected:0})}}function Xo(e){let t,n,r,l,i,o,s;return{c(){t=le("rect"),this.h()},l(e){t=x(e,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0},1),w(t).forEach(k),this.h()},h(){O(t,"class","selectionArea svelte-136oz3i"),O(t,"x",n=e[0].x),O(t,"y",r=e[0].y),O(t,"width",l=e[0].width),O(t,"height",i=e[0].height)},m(n,r){C(n,t,r),o||(s=[I(t,"pointerdown",e[5]),I(t,"pointerup",e[7])],o=!0)},p(e,o){1&o&&n!==(n=e[0].x)&&O(t,"x",n),1&o&&r!==(r=e[0].y)&&O(t,"y",r),1&o&&l!==(l=e[0].width)&&O(t,"width",l),1&o&&i!==(i=e[0].height)&&O(t,"height",i)},d(e){e&&k(t),o=!1,L(s)}}}function Jo(e){let t,n,r,l,i,o=!e[4]&&e[0]&&Xo(e);const s=e[13].default,a=v(s,e,e[12],null);return{c(){t=le("g"),o&&o.c(),n=B(),a&&a.c(),this.h()},l(e){t=x(e,"g",{class:!0,transform:!0},1);var r=w(t);o&&o.l(r),n=B(),a&&a.l(r),r.forEach(k),this.h()},h(){O(t,"class","TransformHost"),O(t,"transform",e[2])},m(s,c){C(s,t,c),o&&o.m(t,null),R(t,n),a&&a.m(t,null),e[14](t),r=!0,l||(i=[I(window,"keydown",e[9]),I(window,"keyup",e[8]),I(window,"pointermove",e[6])],l=!0)},p(e,[l]){!e[4]&&e[0]?o?o.p(e,l):(o=Xo(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),a&&a.p&&(!r||4096&l)&&P(a,s,e,e[12],l,null,null),(!r||4&l)&&O(t,"transform",e[2])},i(e){r||(A(a,e),r=!0)},o(e){T(a,e),r=!1},d(n){n&&k(t),o&&o.d(),a&&a.d(n),e[14](null),l=!1,L(i)}}}function Qo(e,t,n){let r,l,i,o=F,s=()=>(o(),o=xe(u,(e=>n(23,i=e))),u);e.$$.on_destroy.push((()=>o()));let a,c,{$$slots:f={},$$scope:d}=t,{selectionArea:p}=t,{gleisSelected:u}=t;s();let h,g,$=!1,m={x:0,y:0},y=0,v=0;const b=oe();function x(e,t){const n=i.map((n=>({id:n.id,points:n.points.map((n=>Object.assign(Object.assign({},n),{[e]:n[e]+t})))})));b("done",{host:a,updates:n})}let w=0;return e.$$set=e=>{"selectionArea"in e&&n(0,p=e.selectionArea),"gleisSelected"in e&&s(n(1,u=e.gleisSelected)),"$$scope"in e&&n(12,d=e.$$scope)},e.$$.update=()=>{3076&e.$$.dirty&&n(2,r=$?`translate(${m.x} ${m.y}) ${r}`:"")},n(4,l=!1),[p,u,r,a,l,function(e){$||(e.stopImmediatePropagation(),c=Fn(e,a),n(10,$=!0))},function(e){if($){e.stopImmediatePropagation();const t=Fn(e,a);y+=Math.abs(e.movementX),v+=Math.abs(e.movementY),h=y>v,g=!h,n(11,m.x=g&&e.shiftKey?0:t.x-c.x,m),n(11,m.y=h&&e.shiftKey?0:t.y-c.y,m),_l("moving",g,g)}},function(e){$&&(e.stopImmediatePropagation(),y=0,v=0,b("done",{host:a}),n(10,$=!1),w=0)},function(e){e.shiftKey||n(4,l=!1)},function(e){let t=1;const r=Date.now()-w;switch(0!==w&&r<200?t=10:0!==w&&r>200&&r<400&&(t=5),e.shiftKey&&n(4,l=!0),e.key){case"ArrowRight":e.shiftKey&&(e.stopImmediatePropagation(),x("x",t));break;case"ArrowLeft":e.shiftKey&&(e.stopImmediatePropagation(),x("x",-t));break;case"ArrowUp":e.shiftKey&&(e.stopImmediatePropagation(),x("y",-t));break;case"ArrowDown":e.shiftKey&&(e.stopImmediatePropagation(),x("y",t))}w=Date.now()},$,m,d,f,function(e){ce[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}class Zo extends ${constructor(e){super(),m(this,e,Qo,Jo,y,{selectionArea:0,gleisSelected:1})}}function es(e){let t;const n=e[6].default,r=v(n,e,e[9],null);return{c(){r&&r.c()},l(e){r&&r.l(e)},m(e,n){r&&r.m(e,n),t=!0},p(e,l){r&&r.p&&(!t||512&l)&&P(r,n,e,e[9],l,null,null)},i(e){t||(A(r,e),t=!0)},o(e){T(r,e),t=!1},d(e){r&&r.d(e)}}}function ts(e){let t,n,r;return t=new Zo({props:{selectionArea:e[1],gleisSelected:e[0],$$slots:{default:[es]},$$scope:{ctx:e}}}),t.$on("done",e[7]),{c(){N(t.$$.fragment),n=M()},l(e){z(t.$$.fragment,e),n=D(e)},m(e,l){q(t,e,l),C(e,n,l),r=!0},p(e,n){const r={};2&n&&(r.selectionArea=e[1]),1&n&&(r.gleisSelected=e[0]),512&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){r||(A(t.$$.fragment,e),r=!0)},o(e){T(t.$$.fragment,e),r=!1},d(e){U(t,e),e&&k(n)}}}function ns(e){let t,n;return t=new Yo({props:{gleisSelected:e[0]}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.gleisSelected=e[0]),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function rs(e){let t,n,r,l,i;n=new Wo({props:{gleisSelected:e[0],$$slots:{default:[ts]},$$scope:{ctx:e}}}),n.$on("done",e[8]);let o=e[2].length>=1&&ns(e);return{c(){t=le("g"),N(n.$$.fragment),o&&o.c(),this.h()},l(e){t=x(e,"g",{id:!0},1);var r=w(t);z(n.$$.fragment,r),o&&o.l(r),r.forEach(k),this.h()},h(){O(t,"id","selected-gleis")},m(s,a){C(s,t,a),q(n,t,null),o&&o.m(t,null),r=!0,l||(i=[I(window,"keydown",e[5]),I(window,"keyup",e[4])],l=!0)},p(e,[r]){const l={};1&r&&(l.gleisSelected=e[0]),515&r&&(l.$$scope={dirty:r,ctx:e}),n.$set(l),e[2].length>=1?o?(o.p(e,r),4&r&&A(o,1)):(o=ns(e),o.c(),A(o,1),o.m(t,null)):o&&(_(),T(o,1,1,(()=>{o=null})),V())},i(e){r||(A(n.$$.fragment,e),A(o),r=!0)},o(e){T(n.$$.fragment,e),T(o),r=!1},d(e){e&&k(t),U(n),o&&o.d(),l=!1,L(i)}}}function ls(e,t,n){let r,l,i=F,o=()=>(i(),i=xe(p,(e=>n(2,r=e))),p);ee(e,pr,(e=>n(11,l=e))),e.$$.on_destroy.push((()=>i()));let{$$slots:s={},$$scope:a}=t;var c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(l,i){function o(e){try{a(r.next(e))}catch(t){i(t)}}function s(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}a((r=r.apply(e,t||[])).next())}))},f=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(n[r[l]]=e[r[l]])}return n};let d,{gleisSelected:p}=t;function u(e,t=0){const n=[];r.forEach((r=>{const i=r.points.map((n=>{var{x:r,y:i,connectAngle:o=0}=n,s=f(n,["x","y","connectAngle"]);const a=Tt(l,e,{x:r,y:i}),c=Object.assign(Object.assign(Object.assign({},a),{connectAngle:o}),s);return 0!==t&&(c.connectAngle=o+t),c}));n.push({id:r.id,points:i})})),un(n)}o(),p.subscribe((()=>c(void 0,void 0,void 0,(function*(){yield ae(),function(){const e=r.flatMap((e=>e.points.filter((e=>"cc"!==e.type))));if(e.length){const{height:t,width:r,minX:l,minY:i}=Oe(e);n(1,d={height:t,width:r,x:l,y:i})}}()}))));return e.$$set=e=>{"gleisSelected"in e&&o(n(0,p=e.gleisSelected)),"$$scope"in e&&n(9,a=e.$$scope)},[p,d,r,u,function(e){e.shiftKey},function(e){switch(e.shiftKey,e.key){case"d":if(e.metaKey){e.preventDefault();const t={},n=[];for(const e of r){const r=wt();n.push(r),t[r]=Object.assign(Object.assign({},e),{id:r,points:e.points.map((e=>({x:e.x+100,y:e.y+100})))})}on((e=>Object.assign(Object.assign({},e),t))),tn(n)}}},s,e=>{var t,n,r;(null==(t=e.detail)?void 0:t.host)&&((null==(r=null==(n=e.detail)?void 0:n.updates)?void 0:r.length)?un(e.detail.updates):u(e.detail.host))},e=>{var t,n;Wn.set(!1),(null==(t=e.detail)?void 0:t.host)&&u(e.detail.host,(null==(n=e.detail)?void 0:n.angle)||0)},a]}class is extends ${constructor(e){super(),m(this,e,ls,rs,y,{gleisSelected:0})}}function os(e){let t,n,r,l,i,o,s;const a=e[5].default,c=v(a,e,e[4],null);return l=new pt({props:{name:"chevron-left"}}),{c(){t=b("aside"),c&&c.c(),n=M(),r=b("div"),N(l.$$.fragment),this.h()},l(e){t=x(e,"ASIDE",{class:!0});var i=w(t);c&&c.l(i),n=D(i),r=x(i,"DIV",{class:!0});var o=w(r);z(l.$$.fragment,o),o.forEach(k),i.forEach(k),this.h()},h(){O(r,"class","Toggle svelte-iznq8k"),O(t,"class","SideMenu svelte-iznq8k"),E(t,"isVisible",e[0])},m(a,f){C(a,t,f),c&&c.m(t,null),R(t,n),R(t,r),q(l,r,null),i=!0,o||(s=I(r,"click",e[6]),o=!0)},p(e,[n]){c&&c.p&&(!i||16&n)&&P(c,a,e,e[4],n,null,null),1&n&&E(t,"isVisible",e[0])},i(e){i||(A(c,e),A(l.$$.fragment,e),i=!0)},o(e){T(c,e),T(l.$$.fragment,e),i=!1},d(e){e&&k(t),c&&c.d(e),U(l),o=!1,s()}}}function ss(e,t,n){let r,l,{$$slots:i={},$$scope:o}=t;const[s,a]=Hn;ee(e,s,(e=>n(3,l=e)));return e.$$set=e=>{"$$scope"in e&&n(4,o=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r="visible"===l)},[r,s,a,l,o,i,()=>a(r?"hidden":"visible")]}class as extends ${constructor(e){super(),m(this,e,ss,os,y,{})}}function cs(e,t,n){const r=e.slice();return r[14]=t[n][0],r[15]=t[n][1],r}function fs(e,t,n){const r=e.slice();return r[18]=t[n],r}function ds(e,t,n){const r=e.slice();return r[21]=t[n][0],r[22]=t[n][1],r}function ps(e,t){let n,r,l,i=t[22].title+"";return{key:e,first:null,c(){n=b("option"),r=K(i),this.h()},l(e){n=x(e,"OPTION",{value:!0});var t=w(n);r=G(t,i),t.forEach(k),this.h()},h(){n.__value=l=t[21],n.value=n.__value,this.first=n},m(e,t){C(e,n,t),R(n,r)},p(e,o){t=e,16&o&&i!==(i=t[22].title+"")&&W(r,i),16&o&&l!==(l=t[21])&&(n.__value=l,n.value=n.__value)},d(e){e&&k(n)}}}function us(e){let t,n=e[18].title+"";return{c(){t=K(n)},l(e){t=G(e,n)},m(e,n){C(e,t,n)},p(e,r){4&r&&n!==(n=e[18].title+"")&&W(t,n)},d(e){e&&k(t)}}}function hs(e){let t,n;return t=new Fe({props:{isActive:e[1]===e[18].id,$$slots:{default:[us]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[12](e[14],e[18])})),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(n,r){e=n;const l={};6&r&&(l.isActive=e[1]===e[18].id),33554436&r&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function gs(e){let t,n,r=e[15],l=[];for(let o=0;o<r.length;o+=1)l[o]=hs(fs(e,r,o));const i=e=>T(l[e],1,1,(()=>{l[e]=null}));return{c(){t=b("div");for(let e=0;e<l.length;e+=1)l[e].c();this.h()},l(e){t=x(e,"DIV",{class:!0});var n=w(t);for(let t=0;t<l.length;t+=1)l[t].l(n);n.forEach(k),this.h()},h(){O(t,"class","TrackButtons svelte-1yjwiie")},m(e,r){C(e,t,r);for(let n=0;n<l.length;n+=1)l[n].m(t,null);n=!0},p(e,n){if(262&n){let o;for(r=e[15],o=0;o<r.length;o+=1){const i=fs(e,r,o);l[o]?(l[o].p(i,n),A(l[o],1)):(l[o]=hs(i),l[o].c(),A(l[o],1),l[o].m(t,null))}for(_(),o=r.length;o<l.length;o+=1)i(o);V()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)A(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)T(l[t]);n=!1},d(e){e&&k(t),te(l,e)}}}function $s(e){let t,n;return t=new Fe({props:{isActive:e[1]===e[0][e[14]],$$slots:{default:[ms]},$$scope:{ctx:e}}}),t.$on("click",(function(){return e[11](e[14])})),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(n,r){e=n;const l={};7&r&&(l.isActive=e[1]===e[0][e[14]]),33554469&r&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function ms(e){var t;let n,r=(null==(t=e[5][e[0][e[14]]])?void 0:t.title)+"";return{c(){n=K(r)},l(e){n=G(e,r)},m(e,t){C(e,n,t)},p(e,t){var l;37&t&&r!==(r=(null==(l=e[5][e[0][e[14]]])?void 0:l.title)+"")&&W(n,r)},d(e){e&&k(n)}}}function ys(e){let t,n,r=e[0]&&e[0][e[14]]&&$s(e);return{c(){t=b("div"),r&&r.c(),this.h()},l(e){t=x(e,"DIV",{slot:!0});var n=w(t);r&&r.l(n),n.forEach(k),this.h()},h(){O(t,"slot","header-right")},m(e,l){C(e,t,l),r&&r.m(t,null),n=!0},p(e,n){e[0]&&e[0][e[14]]?r?(r.p(e,n),5&n&&A(r,1)):(r=$s(e),r.c(),A(r,1),r.m(t,null)):r&&(_(),T(r,1,1,(()=>{r=null})),V())},i(e){n||(A(r),n=!0)},o(e){T(r),n=!1},d(e){e&&k(t),r&&r.d()}}}function vs(e){let t,n,r,l;return n=new st({props:{title:e[14],dropdown:!0,$$slots:{"header-right":[ys],default:[gs]},$$scope:{ctx:e}}}),{c(){t=b("div"),N(n.$$.fragment),r=M(),this.h()},l(e){t=x(e,"DIV",{class:!0});var l=w(t);z(n.$$.fragment,l),r=D(l),l.forEach(k),this.h()},h(){O(t,"class","TrackLibCategory svelte-1yjwiie")},m(e,i){C(e,t,i),q(n,t,null),R(t,r),l=!0},p(e,t){const r={};4&t&&(r.title=e[14]),33554471&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){l||(A(n.$$.fragment,e),l=!0)},o(e){T(n.$$.fragment,e),l=!1},d(e){e&&k(t),U(n)}}}function bs(e){let t,n,r,l,i,o,s=[],a=new Map,c=Object.entries(e[4]);const f=e=>e[21];for(let h=0;h<c.length;h+=1){let t=ds(e,c,h),n=f(t);a.set(n,s[h]=ps(n,t))}let d=e[2],p=[];for(let h=0;h<d.length;h+=1)p[h]=vs(cs(e,d,h));const u=e=>T(p[e],1,1,(()=>{p[e]=null}));return{c(){t=b("div"),n=b("select");for(let e=0;e<s.length;e+=1)s[e].c();r=M();for(let e=0;e<p.length;e+=1)p[e].c();this.h()},l(e){t=x(e,"DIV",{class:!0});var l=w(t);n=x(l,"SELECT",{value:!0});var i=w(n);for(let t=0;t<s.length;t+=1)s[t].l(i);i.forEach(k),r=D(l);for(let t=0;t<p.length;t+=1)p[t].l(l);l.forEach(k),this.h()},h(){O(t,"class","TrackLibControl svelte-1yjwiie")},m(a,c){C(a,t,c),R(t,n);for(let e=0;e<s.length;e+=1)s[e].m(n,null);ve(n,e[3]),R(t,r);for(let e=0;e<p.length;e+=1)p[e].m(t,null);l=!0,i||(o=[I(window,"keydown",e[9]),I(n,"input",e[10])],i=!0)},p(e,[r]){if(16&r&&(c=Object.entries(e[4]),s=ne(s,r,f,1,e,c,a,n,re,ps,null,ds)),(!l||24&r)&&ve(n,e[3]),423&r){let n;for(d=e[2],n=0;n<d.length;n+=1){const l=cs(e,d,n);p[n]?(p[n].p(l,r),A(p[n],1)):(p[n]=vs(l),p[n].c(),A(p[n],1),p[n].m(t,null))}for(_(),n=d.length;n<p.length;n+=1)u(n);V()}},i(e){if(!l){for(let e=0;e<d.length;e+=1)A(p[e]);l=!0}},o(e){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)T(p[t]);l=!1},d(e){e&&k(t);for(let t=0;t<s.length;t+=1)s[t].d();te(p,e),i=!1,L(o)}}}function xs(e,t,n){let r,l,i,o,s,a,c;ee(e,Yn,(e=>n(13,r=e))),ee(e,Be,(e=>n(0,l=e))),ee(e,Ve,(e=>n(2,o=e))),ee(e,Ne,(e=>n(3,s=e))),ee(e,Re,(e=>n(4,a=e))),ee(e,_e,(e=>n(5,c=e)));const[f,d]=Qt;function p(e,t){d(t),Ke((n=>Object.assign(Object.assign({},n),{[e]:t})))}ee(e,f,(e=>n(1,i=e)));return[l,i,o,s,a,c,f,d,p,function(e){var t;if("gleis"===r&&l){const n=Object.entries(l);if(["1","2","3","4","5","6","7","8","9"].includes(e.key)&&n[parseInt(e.key,10)-1]){let[r,l]=n[parseInt(e.key,10)-1];if(i===l){const n=o.find((([e])=>e===r)),i=n[1].findIndex((e=>e.id===l));e.shiftKey||(l=(null===(t=n[1][i+1])||void 0===t?void 0:t.id)||n[1][0].id)}p(r,l)}}},e=>{ze(e.currentTarget.value)},e=>{d(l[e])},(e,t)=>{p(e,t.id)}]}class ws extends ${constructor(e){super(),m(this,e,xs,bs,y,{})}}function ks(e,t,n){const r=e.slice();return r[8]=t[n],r}function Os(e,t,n){const r=e.slice();return r[11]=t[n][0],r[12]=t[n][1],r}function Ss(e,t,n){const r=e.slice();return r[8]=t[n],r}function Es(e,t){let n,r,l;return r=new Sr({props:{gleisProps:t[8],proto:t[6][t[8].artnr]}}),{key:e,first:null,c(){n=B(),N(r.$$.fragment),this.h()},l(e){n=B(),z(r.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){C(e,n,t),q(r,e,t),l=!0},p(e,n){t=e;const l={};4&n&&(l.gleisProps=t[8]),4&n&&(l.proto=t[6][t[8].artnr]),r.$set(l)},i(e){l||(A(r.$$.fragment,e),l=!0)},o(e){T(r.$$.fragment,e),l=!1},d(e){e&&k(n),U(r,e)}}}function Cs(e,t){let n,r,l,i,o=[],s=new Map,a=t[12];const c=e=>e[8].id;for(let f=0;f<a.length;f+=1){let e=Ss(t,a,f),n=c(e);s.set(n,o[f]=Es(n,e))}return l=new Yr({props:{gleisPlanned:t[12]}}),{key:e,first:null,c(){n=B();for(let e=0;e<o.length;e+=1)o[e].c();r=M(),N(l.$$.fragment),this.h()},l(e){n=B();for(let t=0;t<o.length;t+=1)o[t].l(e);r=D(e),z(l.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){C(e,n,t);for(let n=0;n<o.length;n+=1)o[n].m(e,t);C(e,r,t),q(l,e,t),i=!0},p(e,n){t=e,68&n&&(a=t[12],_(),o=ne(o,n,c,1,t,a,s,r.parentNode,se,Es,r,Ss),V());const i={};4&n&&(i.gleisPlanned=t[12]),l.$set(i)},i(e){if(!i){for(let e=0;e<a.length;e+=1)A(o[e]);A(l.$$.fragment,e),i=!0}},o(e){for(let t=0;t<o.length;t+=1)T(o[t]);T(l.$$.fragment,e),i=!1},d(e){e&&k(n);for(let t=0;t<o.length;t+=1)o[t].d(e);e&&k(r),U(l,e)}}}function Is(e){let t,n,r,l;return t=new is({props:{gleisSelected:an,$$slots:{default:[Ls]},$$scope:{ctx:e}}}),r=new Yr({props:{gleisPlanned:e[3],quickConnectEnabled:!0}}),{c(){N(t.$$.fragment),n=M(),N(r.$$.fragment)},l(e){z(t.$$.fragment,e),n=D(e),z(r.$$.fragment,e)},m(e,i){q(t,e,i),C(e,n,i),q(r,e,i),l=!0},p(e,n){const l={};131096&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l);const i={};8&n&&(i.gleisPlanned=e[3]),r.$set(i)},i(e){l||(A(t.$$.fragment,e),A(r.$$.fragment,e),l=!0)},o(e){T(t.$$.fragment,e),T(r.$$.fragment,e),l=!1},d(e){U(t,e),e&&k(n),U(r,e)}}}function Ps(e){let t,n;return t=new br({}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p:F,i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function As(e){let t,n;return t=new Sr({props:{gleisProps:e[8],proto:e[6][e[8].artnr]}}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.gleisProps=e[8]),8&n&&(r.proto=e[6][e[8].artnr]),t.$set(r)},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ts(e,t){let n,r,l,i,o;const s=[As,Ps],a=[];function c(e,t){var n;return(null==(n=e[4])?void 0:n.id)!==e[8].id?0:1}return r=c(t),l=a[r]=s[r](t),{key:e,first:null,c(){n=B(),l.c(),i=B(),this.h()},l(e){n=B(),l.l(e),i=B(),this.h()},h(){this.first=n},m(e,t){C(e,n,t),a[r].m(e,t),C(e,i,t),o=!0},p(e,n){let o=r;r=c(t=e),r===o?a[r].p(t,n):(_(),T(a[o],1,1,(()=>{a[o]=null})),V(),l=a[r],l?l.p(t,n):(l=a[r]=s[r](t),l.c()),A(l,1),l.m(i.parentNode,i))},i(e){o||(A(l),o=!0)},o(e){T(l),o=!1},d(e){e&&k(n),a[r].d(e),e&&k(i)}}}function Ls(e){let t,n,r=[],l=new Map,i=e[3];const o=e=>e[8].id;for(let s=0;s<i.length;s+=1){let t=ks(e,i,s),n=o(t);l.set(n,r[s]=Ts(n,t))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=B()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=B()},m(e,l){for(let t=0;t<r.length;t+=1)r[t].m(e,l);C(e,t,l),n=!0},p(e,n){88&n&&(i=e[3],_(),r=ne(r,n,o,1,e,i,l,t.parentNode,se,Ts,t,ks),V())},i(e){if(!n){for(let e=0;e<i.length;e+=1)A(r[e]);n=!0}},o(e){for(let t=0;t<r.length;t+=1)T(r[t]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&k(t)}}}function js(e){let t,n;return t=new br({}),{c(){N(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,r){q(t,e,r),n=!0},i(e){n||(A(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){U(t,e)}}}function Ms(e){let t,n,r,l,i,o=[],s=new Map,a=Object.entries(e[2]);const c=e=>e[11];for(let p=0;p<a.length;p+=1){let t=Os(e,a,p),n=c(t);s.set(n,o[p]=Cs(n,t))}let f=e[3].length&&Is(e),d=e[5]&&js();return l=new Al({}),{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=M(),f&&f.c(),n=M(),d&&d.c(),r=M(),N(l.$$.fragment)},l(e){for(let t=0;t<o.length;t+=1)o[t].l(e);t=D(e),f&&f.l(e),n=D(e),d&&d.l(e),r=D(e),z(l.$$.fragment,e)},m(e,s){for(let t=0;t<o.length;t+=1)o[t].m(e,s);C(e,t,s),f&&f.m(e,s),C(e,n,s),d&&d.m(e,s),C(e,r,s),q(l,e,s),i=!0},p(e,l){68&l&&(a=Object.entries(e[2]),_(),o=ne(o,l,c,1,e,a,s,t.parentNode,se,Cs,t,Os),V()),e[3].length?f?(f.p(e,l),8&l&&A(f,1)):(f=Is(e),f.c(),A(f,1),f.m(n.parentNode,n)):f&&(_(),T(f,1,1,(()=>{f=null})),V()),e[5]?d?32&l&&A(d,1):(d=js(),d.c(),A(d,1),d.m(r.parentNode,r)):d&&(_(),T(d,1,1,(()=>{d=null})),V())},i(e){if(!i){for(let e=0;e<a.length;e+=1)A(o[e]);A(f),A(d),A(l.$$.fragment,e),i=!0}},o(e){for(let t=0;t<o.length;t+=1)T(o[t]);T(f),T(d),T(l.$$.fragment,e),i=!1},d(e){for(let t=0;t<o.length;t+=1)o[t].d(e);e&&k(t),f&&f.d(e),e&&k(n),d&&d.d(e),e&&k(r),U(l,e)}}}function Ds(e){let t,n,r,l,i,o,s,a,c,f,d,p;return t=new lo({}),r=new Do({}),i=new tl({}),s=new dl({}),c=new rr({}),d=new Cn({}),{c(){N(t.$$.fragment),n=M(),N(r.$$.fragment),l=M(),N(i.$$.fragment),o=M(),N(s.$$.fragment),a=M(),N(c.$$.fragment),f=M(),N(d.$$.fragment)},l(e){z(t.$$.fragment,e),n=D(e),z(r.$$.fragment,e),l=D(e),z(i.$$.fragment,e),o=D(e),z(s.$$.fragment,e),a=D(e),z(c.$$.fragment,e),f=D(e),z(d.$$.fragment,e)},m(e,u){q(t,e,u),C(e,n,u),q(r,e,u),C(e,l,u),q(i,e,u),C(e,o,u),q(s,e,u),C(e,a,u),q(c,e,u),C(e,f,u),q(d,e,u),p=!0},i(e){p||(A(t.$$.fragment,e),A(r.$$.fragment,e),A(i.$$.fragment,e),A(s.$$.fragment,e),A(c.$$.fragment,e),A(d.$$.fragment,e),p=!0)},o(e){T(t.$$.fragment,e),T(r.$$.fragment,e),T(i.$$.fragment,e),T(s.$$.fragment,e),T(c.$$.fragment,e),T(d.$$.fragment,e),p=!1},d(e){U(t,e),e&&k(n),U(r,e),e&&k(l),U(i,e),e&&k(o),U(s,e),e&&k(a),U(c,e),e&&k(f),U(d,e)}}}function Rs(e){let t,n,r,l,i,o,s,a,c,f,d,p,u,h,g,$,m,y,v;return o=new ws({}),c=new il({}),d=new Vo({}),u=new fr({}),$=new vo({props:{$$slots:{default:[Ms]},$$scope:{ctx:e}}}),y=new as({props:{$$slots:{default:[Ds]},$$scope:{ctx:e}}}),{c(){t=b("main"),n=b("header"),r=b("h1"),l=K("Gleis planner"),i=M(),N(o.$$.fragment),s=M(),a=b("div"),N(c.$$.fragment),f=M(),N(d.$$.fragment),p=M(),N(u.$$.fragment),h=M(),g=b("div"),N($.$$.fragment),m=M(),N(y.$$.fragment),this.h()},l(e){t=x(e,"MAIN",{class:!0,"data-editmode":!0});var v=w(t);n=x(v,"HEADER",{class:!0});var b=w(n);r=x(b,"H1",{class:!0});var O=w(r);l=G(O,"Gleis planner"),O.forEach(k),i=D(b),z(o.$$.fragment,b),s=D(b),a=x(b,"DIV",{class:!0});var S=w(a);z(c.$$.fragment,S),f=D(S),z(d.$$.fragment,S),p=D(S),z(u.$$.fragment,S),S.forEach(k),b.forEach(k),h=D(v),g=x(v,"DIV",{class:!0});var E=w(g);z($.$$.fragment,E),E.forEach(k),m=D(v),z(y.$$.fragment,v),v.forEach(k),this.h()},h(){O(r,"class","Logo svelte-14gkaxu"),O(a,"class","PanelGroup svelte-14gkaxu"),O(n,"class","Header svelte-14gkaxu"),O(g,"class","PlaneContainer svelte-14gkaxu"),O(t,"class","App svelte-14gkaxu"),O(t,"data-editmode",e[1]),E(t,"isLoading",e[0])},m(e,b){C(e,t,b),R(t,n),R(n,r),R(r,l),R(n,i),q(o,n,null),R(n,s),R(n,a),q(c,a,null),R(a,f),q(d,a,null),R(a,p),q(u,a,null),R(t,h),R(t,g),q($,g,null),R(t,m),q(y,t,null),v=!0},p(e,[n]){const r={};131132&n&&(r.$$scope={dirty:n,ctx:e}),$.$set(r);const l={};131072&n&&(l.$$scope={dirty:n,ctx:e}),y.$set(l),(!v||2&n)&&O(t,"data-editmode",e[1]),1&n&&E(t,"isLoading",e[0])},i(e){v||(A(o.$$.fragment,e),A(c.$$.fragment,e),A(d.$$.fragment,e),A(u.$$.fragment,e),A($.$$.fragment,e),A(y.$$.fragment,e),v=!0)},o(e){T(o.$$.fragment,e),T(c.$$.fragment,e),T(d.$$.fragment,e),T(u.$$.fragment,e),T($.$$.fragment,e),T(y.$$.fragment,e),v=!1},d(e){e&&k(t),U(o),U(c),U(d),U(u),U($),U(y)}}}function Ns(e,t,n){let r,l,i,o,s,a;ee(e,Ue,(e=>n(7,r=e))),ee(e,Yn,(e=>n(1,l=e))),ee(e,sn,(e=>n(2,i=e))),ee(e,an,(e=>n(3,o=e))),ee(e,cn,(e=>n(4,s=e))),ee(e,Rt,(e=>n(5,a=e)));let c=!0;const f=r;return Promise.all(Le).then((()=>n(0,c=!1))),[c,l,i,o,s,a,f]}new class extends ${constructor(e){super(),m(this,e,Ns,Rs,y,{})}}({target:document.body});
